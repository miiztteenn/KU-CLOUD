import {
    showLoadingModal,
    LOADING,
    ERROR_INPUT,
    addEventValidate,
    resetInputValidate,
    checkError,
    checkAuthRes,
} from '../../utility.js';

let provinces = null;
let amphures = null;
let districts = null;

validate.validators.presence.message = "is required";

let validateInput = {
    company: {
        parent: "",
        validate: {
            companyname: {
                presence: {
                    allowEmpty: false
                },
                length: {
                    maximum: 50,
                },
            },
            alias: {
                presence: {
                    allowEmpty: false
                },
                length: {
                    maximum: 50,
                },
            },
            note: {
                presence: {
                    allowEmpty: false
                },
                length: {
                    maximum: 50,
                },
            },
        }
    },
    account: {
        parent: "",
        validate: {
            email: {
                presence: true,
                email: true
            },
            firstname: {
                presence: {
                    allowEmpty: false
                },
                length: {
                    maximum: 50,
                },
            },
            lastname: {
                presence: {
                    allowEmpty: false
                },
                length: {
                    maximum: 50,
                },
            },
            phone: {
                presence: {
                    allowEmpty: false
                },
                format: {
                    pattern: "[0-9]+",
                    flags: "i",
                    message: "can only contain 0-9"
                },
                length: {
                    minimum: 10,
                    maximum: 10,
                },
            },
            username: {
                presence: {
                    allowEmpty: false
                },
                length: {
                    maximum: 50,
                },
            },
        }
    },
    address: {
        parent: "",
        validate: {
            address_detail: {
                presence: {
                    allowEmpty: false,
                }
            },
            province: {
                presence: {
                    allowEmpty: false,
                }
            },
            amphure: {
                presence: {
                    allowEmpty: false,
                }
            },
            district: {
                presence: {
                    allowEmpty: false,
                }
            },
            zip_code: {
                presence: {
                    allowEmpty: false,
                }
            },
        }
    }
}



var CompanyRepository = new (function () {
    var companyList = [];
    var datatableObject = null;
    var modelCreate = null;
    var modalDetail = null;
    var modalEdit = null;
    var modalDelete = null;

    /* Initial Function */
    this.initialAndRun = () => {
        this.refreshDatatable();
        addEventValidate(validateInput.company);
        addEventValidate(validateInput.account);
        addEventValidate(validateInput.address);
    };

    this.refreshDatatable = () => {
        showLoadingStatus(true);
        $.ajax({
            url: END_POINT +  "admin/companydata",
            method: 'GET',
            success: function (result, textStatus, xhr) {
                checkAuthRes(xhr);
                initialDatatable();

                companyList = result.company;
                showLoadingStatus(false);
                updateDatatableData(result);
            },
            error: function (error) {
                console.log(error);
            }
        });
    };

    var initialDatatable = () => {
        if (datatableObject !== null) {
            return false;
        }

        $("#btn-create").unbind().click(function () {
            onCreateClick();
            resetInputValidate();
        });

        datatableObject = $('#datatable-company').dataTable();
    }



    var showLoadingStatus = (show) => {
        if (show) {
            $('#datatable-company').hide();
            $('#total-company').hide();
        }
        else {
            $('#datatable-company').show();
            $('.text-static').show();
            $('#total-company').show();
            $('.lds-roller').hide();
            $('.text-loading').hide();
        }
    }

    var updateDatatableData = (companyList) => {
        var Datatable = new Array();
        datatableObject.fnClearTable();
        let total_company = 0;
        $.each(companyList.company, function (index, item) {
            var ret = [];
            ret[0] = item.company_name;
            ret[1] = item.alias;
            ret[2] = item.note;
            ret[3] = ` <center>
                            <button type="button" class="btn btn-primary btn-sm btn-detail" index=${index} data-toggle="tooltip"
                                data-placement="top" title="Detail">
                                <i class="fas fa-list"></i>
                            </button>
                            <button type="button" class="btn btn-success btn-sm btn-edit" index=${index}  data-toggle="tooltip"
                                data-placement="top" title="Edit">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button type="button" class="btn btn-danger btn-sm btn-delete"  index=${index}  data-toggle="tooltip"
                                data-placement="top" title="Delete">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </center>`;
            Datatable.push(ret);
            total_company++;
        });

        datatableObject.fnAddData(Datatable);
        $("#total-company").html(`Total ${total_company} Company`);
        $('#datatable-company').on('click', '.btn-detail', function () {
            onDetailClick($(this).attr('index'));
        });

        $('#datatable-company').on('click', '.btn-edit', function () {
            onEditClick($(this).attr('index'));
            resetInputValidate();
        });


        $('#datatable-company').on('click', '.btn-delete', function () {
            onDeleteClick($(this).attr('index'));
        });

        $('[data-toggle="tooltip"]').tooltip();
    }

    /* Action Function */
    var onCreateClick = () => {
        if (modelCreate === null) {
            modelCreate =
                `<div class="modal fade" id="addUser">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title">Create Company</h4>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>
                        <div class="modal-body">
                            <form id="form-add-company">
                                <div class="container"> 
                                    <h4>Company detail</h4>       
                                    <div class="row">
                                        <div class="col-xl-6 col-12 mt-2">
                                            <label for="">Company Name <span class="text-danger">*</span></label>
                                            <input type="text" name="companyname" class="form-control" id="add_company_name_val" />
                                            <small class="messages-error"></small>
                                        </div>
                                        <div class="col-xl-6 col-12 mt-2">
                                            <label for="">Alias <span class="text-danger">*</span></label>
                                            <input type="text" name="alias" class="form-control" id="add_alias_val" />
                                            <small class="messages-error"></small>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-12 mt-2">
                                            <label for="address">Note <span class="text-danger">*</span></label>
                                            <textarea name="note" id="add_note_val" cols="30" rows="5" class="form-control"></textarea>
                                            <small class="messages-error"></small>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-12 mt-2">
                                            <label for="address">Address <span class="text-danger">*</span></label>
                                            <textarea name="address_detail" id="address_create" cols="30" rows="5" class="form-control"></textarea>
                                            <small class="messages-error"></small>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-12 mt-2">
                                            <label for="province">Province <span class="text-danger">*</span></label>
                                            <select name="province" id="province_create" class="form-control">
                                                <option value="">--Select provice--</option>
                                            </select>
                                            <small class="messages-error"></small>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-12 mt-2">
                                            <label for="amphure">Amphure <span class="text-danger">*</span></label>
                                            <select name="amphure" id="amphure_create" class="form-control">
                                                <option value="">--Select amphure--</option>
                                            </select>
                                            <small class="messages-error"></small>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xl-6 col-12 mt-2">
                                            <label for="district">District <span class="text-danger">*</span></label>
                                            <select name="district" id="district_create" class="form-control">
                                                <option value="">--Select district--</option>
                                            </select>
                                            <small class="messages-error"></small>
                                        </div>
                                        <div class="col-xl-6 col-12 mt-2">
                                            <label for="zip_code">Zip code <span class="text-danger">*</span></label>
                                            <input name="zip_code" id="zip_code_create" class="form-control">
                                            <small class="messages-error"></small>
                                        </div>
                                    </div>
                                    <hr>
                                    <h4>User detail</h4> 
                                    <div class="row">
                                        <div class="col-12 mt-2">
                                            <label for="account">Username <span class="text-danger">*</span></label>
                                            <input type="text" name="username" class="form-control" id="accountname">
                                            <small class="messages-error"></small>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xl-6 col-12 mt-2">
                                            <label for="firstname">Firstname <span class="text-danger">*</span></label>
                                            <input type="text" name="firstname" class="form-control" id="firstname">
                                            <small class="messages-error"></small>
                                        </div>
                                        <div class="col-xl-6 col-12 mt-2">
                                            <label for="lname">Lastname <span class="text-danger">*</span></label>
                                            <input type="text" name="lastname" class="form-control" id="lastname">
                                            <small class="messages-error"></small>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-12 mt-2">
                                            <label for="email">Email address <span class="text-danger">*</span></label>
                                            <input type="email" name="email" class="form-control" id="email" autocomplete="nope">
                                            <small class="messages-error"></small>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-12 mt-2">
                                            <label for="phone">Phone <span class="text-danger">*</span></label>
                                            <input type="text" name="phone" class="form-control" id="phone">
                                            <small class="messages-error"></small>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>              
                        <div class="modal-footer">
                            <button type="button" id="btn-create-save" class="btn btn-success btn-block">Save</button>
                        </div>          
                    </div>
                </div>
            </div>`
            $('body').append(modelCreate);
        }

        $("#btn-create-save").unbind().click(function () {
            validateInput.company.parent = "form#form-add-company";
            validateInput.account.parent = "form#form-add-company";
            validateInput.address.parent = "form#form-add-company";

            checkError(validateInput.company);
            checkError(validateInput.account);
            checkError(validateInput.address);

            if(checkError(validateInput.company) || checkError(validateInput.account) || checkError(validateInput.address)) return;

            createSaveChange($(this));
        })

        $("#province_create").change(function(){
            $("#zip_code_create").val('')
            if($(this).val() != ""){
                $("#district_create").html(`<option value="">--Select district--</option>`);
                getAmphuresByProvince($(this).val(), "create");
            }
            else{
                $("#district_create").html(`<option value="">--Select district--</option>`);
                $("#amphure_create").html(`<option value="">--Select amphure--</option>`);
            }
        });

        $("#amphure_create").change(function(){
            $("#zip_code_create").val('')
            if($(this).val() != ""){
                getDistrictsByAmphures($("#province_create").val(),$(this).val(), "create");
            }
            else{
                $("#district_create").html(`<option value="">--Select district--</option>`);
            }
        });

        $("#district_create").change(function(){
            $("#zip_code_create").val('')
            if($(this).val() != ""){
                let district = districts.filter(data => {
                    return data.district_id === $(this).val();
                });
                console.log(district);
                $("#zip_code_create").val(district[0].zip_code);
            }
            else{
                $("#zip_code_create").val('')
            }
        });

        getProvinces("create");

        $('#addUser').modal('show');
    }

    var createSaveChange = () => {
        let company_name_input = $("#add_company_name_val").val();
        let alias_input = $("#add_alias_val").val();
        let note_input = $("#add_note_val").val();
        let address_detail = $("#address_create").val();
        let province = $("#province_create").val();
        let amphure = $("#amphure_create").val();
        let district = $("#district_create").val();
        let accountname = $("#accountname").val();
        let firstname = $("#firstname").val();
        let lastname = $("#lastname").val();
        let email = $("#email").val();
        let phone = $("#phone").val();

        $.ajax({
            url: END_POINT + "admin/companydata/create",
            dataType: 'json',
            method: "POST",
            data:
            {
                company_name_input: company_name_input,
                alias_input: alias_input,
                note_input: note_input,
                address_detail: address_detail,
                province: province,
                amphure: amphure,
                district: district,
                accountname: accountname,
                firstname: firstname,
                lastname: lastname,
                email: email,
                phone: phone,
            },
            success: (res, textStatus, xhr) => {
                checkAuthRes(xhr);
                this.refreshDatatable();
                $("#addUser").modal('hide');
            },
            error: (res) => {
                console.log(res);
            }
        })
    }

    var onDetailClick = (key) => {
        if (modalDetail === null) {
            modalDetail =
                `<div class="modal fade" id="detailCompany">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="title-company">Company Details</h5>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div class="container">
                                <div class="row">
                                    <div class="col-xl-6 col-12 mt-2">
                                        <label for="">Company Name</label>
                                        <input type="text" class="form-control" id="company_name_detail" readonly/>
                                    </div>
                                    <div class="col-xl-6 col-12 mt-2">
                                        <label for="">Alias</label>
                                        <input type="text" class="form-control" id="alias_detail" readonly/>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12 mt-2">
                                        <label for="address">Note</label>
                                        <textarea name="note" id="note_detail" cols="30" rows="5" class="form-control" readonly></textarea>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12 mt-2">
                                        <label for="address">Address</label>
                                        <textarea name="address_detail" id="address_detail" cols="30" rows="5" class="form-control" readonly></textarea>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12 mt-2">
                                        <label for="province">Province</label>
                                        <input type="text" class="form-control" id="province_detail" readonly/>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12 mt-2">
                                        <label for="amphure">Amphure</label>
                                        <input type="text" class="form-control" id="amphure_detail" readonly/>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xl-6 col-12 mt-2">
                                        <label for="district">District</label>
                                        <input type="text" class="form-control" id="district_detail" readonly/>
                                    </div>
                                    <div class="col-xl-6 col-12 mt-2">
                                        <label for="zip_code">Zip code</label>
                                        <input name="zip_code" id="zip_code_detail" class="form-control" readonly/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>`;

            $('body').append(modalDetail);
        }

        $('#company_name_detail').val(companyList[key].company_name);
        $('#alias_detail').val(companyList[key].alias);
        $('#note_detail').val(companyList[key].note);
        $('#address_detail').val(companyList[key].address_detail);
        $('#province_detail').val(companyList[key].pNameTh);
        $('#amphure_detail').val(companyList[key].aNameTh);
        $('#district_detail').val(companyList[key].dNameTh);
        $('#zip_code_detail').val(companyList[key].zip_code);

        $("#detailCompany").modal('show');
    }

    var onEditClick = (key) => {
        if (modalEdit === null) {
            modalEdit =
                `<div class="modal fade" id="editCompany">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title">Edit Company</h4>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>
                        <div class="modal-body">
                            <form id="form-edit-company"> 
                                <div class="container">
                                    <div class="row">
                                        <div class="col-xl-6 col-12 mt-2">
                                            <label for="">Company Name <span class="text-danger">*</span></label>
                                            <input type="text" name="companyname" class="form-control" id="company_name_edit" />
                                            <small class="messages-error"></small>
                                        </div>
                                        <div class="col-xl-6 col-12 mt-2">
                                            <label for="">Alias <span class="text-danger">*</span></label>
                                            <input type="text" name="alias" class="form-control" id="alias_edit" />
                                            <small class="messages-error"></small>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-12 mt-2">
                                            <label for="address">Note <span class="text-danger">*</span></label>
                                            <textarea name="note" id="note_edit" cols="30" rows="5" class="form-control"></textarea>
                                            <small class="messages-error"></small>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-12 mt-2">
                                            <label for="address">Address <span class="text-danger">*</span></label>
                                            <textarea name="address_detail" id="address_edit" cols="30" rows="5" class="form-control"></textarea>
                                            <small class="messages-error"></small>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-12 mt-2">
                                            <label for="province">Province <span class="text-danger">*</span></label>
                                            <select name="province" id="province_edit" class="form-control">
                                                <option value="">--Select provice--</option>
                                            </select>
                                            <small class="messages-error"></small>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-12 mt-2">
                                            <label for="amphure">Amphure <span class="text-danger">*</span></label>
                                            <select name="amphure" id="amphure_edit" class="form-control">
                                                <option value="">--Select amphure--</option>
                                            </select>
                                            <small class="messages-error"></small>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xl-6 col-12 mt-2">
                                            <label for="district">District <span class="text-danger">*</span></label>
                                            <select name="district" id="district_edit" class="form-control">
                                                <option value="">--Select district--</option>
                                            </select>
                                            <small class="messages-error"></small>
                                        </div>
                                        <div class="col-xl-6 col-12 mt-2">
                                            <label for="zip_code">Zip code <span class="text-danger">*</span></label>
                                            <input name="zip_code" id="zip_code_edit" class="form-control">
                                            <small class="messages-error"></small>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" id="btn-edit-submit" class="btn btn-success btn-block">Save</button>
                        </div>
                    </div>
                </div>
            </div>`

            $('body').append(modalEdit);
        }

        $("#province_edit").change(function(){
            $("#zip_code_edit").val('')
            if($(this).val() != ""){
                $("#district_edit").html(`<option value="">--Select district--</option>`);
                getAmphuresByProvince($(this).val(), "edit", companyList[key].amphure_id);
            }
            else{
                $("#district_edit").html(`<option value="">--Select district--</option>`);
                $("#amphure_edit").html(`<option value="">--Select amphure--</option>`);
            }
        });

        $("#amphure_edit").change(function(){
            $("#zip_code_edit").val('')
            if($(this).val() != ""){
                getDistrictsByAmphures($("#province_edit").val(),$(this).val(), "edit", companyList[key].district_id);
            }
            else{
                $("#district_edit").html(`<option value="">--Select district--</option>`);
            }
        });

        $("#district_edit").change(function(){
            $("#zip_code_edit").val('')
            if($(this).val() != ""){
                let district = districts.filter(data => {
                    return data.district_id === $(this).val();
                });
                console.log(district);
                $("#zip_code_edit").val(district[0].zip_code);
            }
            else{
                $("#zip_code_edit").val('')
            }
        });

        getProvinces("edit", companyList[key].province_id);
        getAmphuresByProvince(companyList[key].province_id, "edit", companyList[key].amphure_id);
        getDistrictsByAmphures( companyList[key].province_id, companyList[key].amphure_id, "edit", companyList[key].district_id);

        $('#company_name_edit').val(companyList[key].company_name);
        $('#alias_edit').val(companyList[key].alias);
        $('#note_edit').val(companyList[key].note);
        $('#address_edit').val(companyList[key].address_detail);
        $('#zip_code_edit').val(companyList[key].zip_code);

        $("#btn-edit-submit").unbind().click(function () {

            validateInput.company.parent = "form#form-edit-company";
            validateInput.address.parent = "form#form-edit-company";

            checkError(validateInput.company);
            checkError(validateInput.address);

            if(checkError(validateInput.company) || checkError(validateInput.address)) return;

            editSaveChange(key);
        })

        $('#editCompany').modal('show');
    }

    var editSaveChange = (key) => {
        let company_name_input = $("#company_name_edit").val();
        let alias_input = $("#alias_edit").val();
        let note_input = $("#note_edit").val();
        let address_detail = $("#address_edit").val();
        let province = $("#province_edit").val();
        let amphure = $("#amphure_edit").val();
        let district = $("#district_edit").val();

        $.ajax({
            url: END_POINT +  "admin/companydata/edit",
            dataType: 'json',
            method: "PUT",
            data:
            {
                company_id_input: companyList[key].company_id,
                company_name_input: company_name_input,
                alias_input: alias_input,
                note_input: note_input,
                address_detail: address_detail,
                province: province,
                amphure: amphure,
                district: district
            },
            success: (res, textStatus, xhr) => {
                checkAuthRes(xhr);
                this.refreshDatatable();
                $("#editCompany").modal('hide');
            },
            error: (res) => {
                console.log(res);
            }
        })
    }

    var onDeleteClick = (key) => {
        if (modalDelete === null) {
            modalDelete =
                `<div class="modal fade" id="DeleteUser">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title">Delete User Company</h4>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>
                        <div class="modal-body">
                            <form id="form-delete-user">
                                <h6 id="span-text-confirm"></h6>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" id="btn-delete-submit" class="btn btn-danger btn-block">Delete</button>
                        </div>
                    </div>
                </div>
            </div>`;

            $('body').append(modalDelete);
        }

        $.ajax({
            url: END_POINT +  "admin/companydata/checkdelete",
            method: "GET",
            data:
            {
                company_id: companyList[key].id
            },
            success: (result, textStatus, xhr) => {
                checkAuthRes(xhr);
                if (result) {
                    $('#span-text-confirm').html("Are you sure to delete " + companyList[key].name + " ? ");
                    $('#btn-delete-submit').show();
                }
                else {
                    $('#span-text-confirm').html("Cannot delete.");
                    $('#btn-delete-submit').hide();
                }
            },
            error: (res) => {
                console.log(res);
            }
        });

        $("#btn-delete-submit").unbind().click(function () {
            deleteSaveChange(key);
        })

        $('#DeleteUser').modal('show');
    }

    var deleteSaveChange = (key) => {
        $.ajax({
            url: END_POINT +  "admin/companydata/delete",
            method: "DELETE",
            data:
            {
                company_id: companyList[key].id
            },
            success: (result, textStatus, xhr) => {
                checkAuthRes(xhr);
                this.refreshDatatable();
                $("#DeleteUser").modal('hide');
            },
            error: (res) => {
                console.log(res);
            }
        });
    }

})

/* Set initial value */
$(document).ready(function () {
    var companyTable = CompanyRepository;
    companyTable.initialAndRun({});
});

let createSelectProvices = (input_type, value) => {
    let html = `<option value="">--Select province--</option>`;
    provinces.map(data => {
        html += `<option value="${data.province_id}">${data.name_th} ${data.name_en}</option>`
    })

    $("#province_" + input_type).html(html);

    if(input_type == "edit")
    {
        $('#province_' + input_type).val(value);
    }
}

let getProvinces = (input_type, value) => {
    $.ajax({
        url:END_POINT + 'address/provinces',
        method: 'GET',
        success:(res, textStatus, xhr) => {
            checkAuthRes(xhr);
            provinces = res.data;
           createSelectProvices(input_type, value); 
        },
        error:(res) => {
            console.log(res);
        }
     });
}

let createSelectAmphures = (input_type, value) => {
    let html = `<option value="">--Select amphure--</option>`;
    amphures.map(data => {
        html += `<option value="${data.amphure_id}">${data.name_th} ${data.name_en}</option>`
    })

    $("#amphure_" + input_type).html(html);

    if(input_type == "edit")
    {
        $('#amphure_' + input_type).val(value);
    }
}

let getAmphuresByProvince = ($province_id, input_type, value) => {
    $.ajax({
        url:END_POINT + `address/amphures/province/${$province_id}`,
        method: 'GET',
        success:(res, textStatus, xhr) => {
            checkAuthRes(xhr);
            amphures = res.data;
            createSelectAmphures(input_type, value); 
        },
        error:(res) => {
            console.log(res);
        }
     });
}

let createSelectdistrict = (input_type, value) => {
    let html = `<option value="">--Select district--</option>`;
    districts.map(data => {
        html += `<option value="${data.district_id}">${data.name_th} ${data.name_en}</option>`
    })

    $("#district_" + input_type).html(html);

    if(input_type == "edit")
    {
        $('#district_' + input_type).val(value);
    }
}

let getDistrictsByAmphures = (province_id,amphure_id, input_type, value)=>{
    $.ajax({
        url:END_POINT + `address/districts/province/${province_id}/amphure/${amphure_id}`,
        method: 'GET',
        success:(res, textStatus, xhr) => {
            checkAuthRes(xhr);
            districts = res.data;
            createSelectdistrict(input_type, value); 
        },
        error:(res) => {
            console.log(res);
        }
     });
}