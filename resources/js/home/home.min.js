import {resetInputValidate,showErrorsForInputCustom} from '../utility';

$(document).ready(function () {
    $("#header_xl").css('margin-top',$("#navbar_fixed").css('height'));
    $("#header_sm").css('margin-top',$("#navbar_fixed").css('height'));


    $(".nav_login").click(function() {
        $("#model_body_login").modal('show');

    });

    $("#btn_close_login").click(function() {
        $("#model_background_login").hide();
        $("#navbar_fixed").addClass('fixed-top');
    });

    $("#model_background_login").click(function () {
        $("#model_background_login").hide();
        $("#navbar_fixed").addClass('fixed-top');
    });

    $("#model_body_login").click(function (e) {
        e.stopPropagation();
    });


    AOS.init();

    $("a#about").click(function () {
        let path = END_POINT_WED + "/Home";
  
        if(location.href.indexOf(path) > -1)
        {
            let winHeight = $(window).height() * (80 / 100);
            window.scrollTo({
                top: winHeight,
                behavior: 'smooth'
              });
        }
        else
        {
            window.location.href = END_POINT_WED + "/Home";
        }
    });

    $("a#contact").click(function () {
        let path = END_POINT_WED + "/Home";

        if(location.href.indexOf(path) > -1)
        {
            let winHeight = $(window).height() * (2);
            window.scrollTo({
                top: winHeight,
                behavior: 'smooth'
            });
        }
        else
        {
            window.location.href = END_POINT_WED + "/Home";
        }
    });

    $('#btn_submit_login').click(function () {
        event.preventDefault();
        let username = $("#username");
        let password = $("#pwd_login");
       
        // if(username.val() == ''){
        //     showErrorsForInputCustom(username,'Username is required');
        //     return;
        // }
        // else if(password.val() == ''){
        //     showErrorsForInputCustom(username,'Password is required');
        //     return;
        // }

        $.ajax({
            url: END_POINT_WED + "/Auth/Login",
            method: "POST",
            dataType: "json",
            data: {
                username: username.val(),
                password: password.val()
            },
            success: (res) => {
                //console.log(res);
                //setCookie("token", res.token);
                setStorage("socket_token", res.socket_token);
                window.location = res.path;
            },
            error: (res) => {
                console.log(res);
                if (res.status === 400) {
                    $(".alert ").show();
                    $(".alert ").html(`<strong>Error!</strong> ${res.responseJSON.error.message}`);
                }
            },
        });
    })

    $("input,button").focus(function () {
        $(".alert").hide();
    });
});
