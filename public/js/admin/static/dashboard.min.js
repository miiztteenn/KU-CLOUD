!function(t){var e={};function a(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=e,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="http://localhost:8080/",a(a.s=0)}({0:function(t,e,a){t.exports=a("AG5F")},"0v0P":function(t,e,a){"use strict";a.d(e,"b",function(){return i}),a.d(e,"a",function(){return n});var i=function(t,e){var a=t;a.find("#loading-save").length||a.find(".modal-body").after(' <div id="loading-save" style="display:none;">\n                        <div class="lds-ring">\n                            <div></div>\n                            <div></div>\n                            <div></div>\n                            <div></div>\n                        </div>\n                        <h6 class=\'text-center\'>Saving Data ...</h6>\n                    </div>'),e?(a.find("form").hide(),a.find("#loading-save").show()):(a.find("form").show(),a.find("#loading-save").hide())},n=function(t){return t.map(function(t){return Object.assign({},t)})}},AG5F:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("0v0P"),n=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}();function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Chart.defaults.global.defaultFontFamily="'Poppins', 'Kanit', 'sans-serif'";var r=function t(e){o(this,t),this.widget=e;var a=null;this.createModalEdit=function(t,e){null===a&&(a='<div class="modal fade" id="EditWidget">\n                                        <div class="modal-dialog modal-lg">\n                                            <div class="modal-content">\n                                                <div class="modal-header">\n                                                    <h5 class="modal-title">Edit Widget</h5>\n                                                    <button type="button" class="close" data-dismiss="modal">&times;</button>\n                                                </div>\n\n                                                <div class="modal-body" id="form-edit-widget">     \n                                                </div>\n\n                                                <div class="modal-footer">\n                                                    <button type="button" id="btn-submit-edit-widget" class="btn btn-success btn-block">Done</button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>',$("body").append(a)),$("#form-edit-widget").html(t),$("#EditWidget").modal("show")},this.closeModalEdit=function(){$("#EditWidget").modal("hide")}},s=function(t){function e(t){o(this,e);var a=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),i=function(){};return a.initCreate=function(){a.createModalEdit('<div class="row" id="div-title">\n                            <div class="col-6">\n                                <lable>Title</label>\n                            <input type="text" class="form-control" id="edit-title"/>\n                            </div>\n                        </div>',i),$("#edit-title").val(t.title_name)},a}return d(e,r),e}(),c=function(t){function e(t){o(this,e);var a=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),i=function(){};return a.initCreate=function(){a.createModalEdit('<div id="edit-Gauges" class="edit-widget-form"> \n                            <div class="row">\n                                <div class="col-6">\n                                    <lable>Title</label>\n                                    <input type="text" class="form-control" id="edit-title"/>\n                                </div>\n                                <div class="col-6">\n                                    <lable>Unit</label>\n                                    <input type="text" class="form-control" id="edit-unit"/>\n                                </div>\n                            </div>\n                        </div>',i),$("#edit-title").val(t.title_name),$("#edit-unit").val(t.unit)},a}return d(e,r),e}(),u=function(t){function e(t){o(this,e);var a=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),i=function(){};return a.initCreate=function(){a.createModalEdit('<div class="row" id="div-title">\n                            <div class="col-6">\n                                <lable>Title</label>\n                            <input type="text" class="form-control" id="edit-title"/>\n                            </div>\n                        </div>',i),$("#edit-title").val(t.title_name)},a}return d(e,r),e}(),p=function(t){function e(t){o(this,e);var a=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),i=function(){};return a.initCreate=function(){a.createModalEdit('<div class="row" id="div-title">\n                            <div class="col-6">\n                                <lable>Title</label>\n                                <input type="text" class="form-control" id="edit-title"/>\n                            </div>\n                            <div class="col-6">\n                                <lable>Unit</label>\n                                <input type="text" class="form-control" id="edit-unit"/>\n                            </div>\n                        </div>',i),$("#edit-title").val(t.title_name),$("#edit-unit").val(t.unit)},a}return d(e,r),e}(),f=function(t){function e(t){o(this,e);var a=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),i=function(){$("#btn-submit-edit-widget").unbind().click(function(){n()})},n=function(){$("#"+t.widgetId).html($("#edit-text-custom").val()),$("#"+t.widgetId).css({"font-size":$("#edit-font-size").val()+"px"}),t.textbox=$("#edit-text-custom").val(),t.fontsize=$("#edit-font-size").val(),a.closeModalEdit()};return a.initCreate=function(){a.createModalEdit('<div id = "edit-text-box" class="value_widget">\n                            <div class="row">\n                                <div class="col-6">\n                                    <label>Text</label>\n                                    <input type="text" id="edit-text-custom" class="form-control" />\n                                </div>\n                                <div class="col-6">\n                                    <label>Font Size (px)</label>\n                                    <input type="number" id="edit-font-size" class="form-control" />\n                                </div>\n                            </div>\n                        </div> ',i),$("#edit-text-custom").val(t.textbox),$("#edit-font-size").val(t.fontsize),i()},a}return d(e,r),e}(),g=function(){function t(e){var a=this;o(this,t),this.itemId=e.itemId,this.widgetId=e.widgetId,this.type=e.type,this.lastUpdateId=e.lastUpdateId,this.title_name=e.title_name,this.lastUpdate=e.lastUpdate,this.timeInterval=e.timeInterval,this.wi=e.wi,this.updateLastUpdate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t?(a.lastUpdate=new Date(t),$("#"+a.lastUpdateId).html(a.lastUpdate.toDateString()+" "+a.lastUpdate.toLocaleTimeString())):(a.lastUpdate=new Date,$("#"+a.lastUpdateId).html(a.lastUpdate.toDateString()+" "+a.lastUpdate.toLocaleTimeString()))};var i={cellHeight:80,verticalMargin:10,float:!1},n=[{x:0,y:0,width:6,height:7}],l=null,d=null,r=function(){$(".btn-delete-wi").unbind().click(function(){h($(this))}),$(".btn-edit-wi").unbind().click(function(){var t,e,a,i;t=$(this),e=$(t).attr("item"),a=x.getWidgetById(e),i=null,"MutiLine"===a.type?i=new s(a):"text-line"===a.type?i=new p(a):"Gauges"===a.type?i=new c(a):"Map"===a.type?i=new u(a):"TextBox"===a.type&&(i=new f(a)),i.initCreate()}),$(".btn-full-screen").unbind().click(function(){g($(this))})},g=function(t){var e=x.getWidgetById(t.attr("item"));$("#modal-full-screen").modal("show"),$("#content-widget").html(e.selectWiContentFull()),e.createFullWidget()},h=function(t){null===d&&(d='\n                <div class="modal fade" id="DeleteWidget">\n                    <div class="modal-dialog">\n                        <div class="modal-content">\n                            <div class="modal-header">\n                                <h5 class="modal-title">Delete Widget</h5>\n                                <button type="button" class="close" data-dismiss="modal">&times;</button>\n                            </div>\n    \n                            <div class="modal-body">\n                                <h6>Are you sure to delete this widget?</h6>\n                            </div>\n    \n                            <div class="modal-footer">\n                                <button type="button" id="" class="btn btn-danger btn-block btn-submit-delete-widget">Delete</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>',$("body").append(d)),$("#DeleteWidget").modal("show"),$(".btn-submit-delete-widget").unbind().click(function(){v($(t)),$("#DeleteWidget").modal("hide")})},v=function(t){var e=$(t).attr("item");l.removeWidget($("#"+e).closest(".grid-stack-item"));var a=w.findIndex(function(t){return t.itemId==e});w.splice(a,1)};this.selectWiContent=function(){switch(a.type){case"MutiLine":return'<canvas id="'+a.widgetId+'"></canvas>';case"text-line":return' <h2 class="text-left"><span id="'+a.itemId.replace("item-","value_")+'">0</span> '+a.unit+'</h2>\n                             <canvas id="'+a.widgetId+'"></canvas>\n                            ';case"Gauges":return'\n                            <h2><span id="'+a.itemId.replace("item-","gauges-text-")+'">0</span> <span>'+a.unit+'</span></h2>\n                            <canvas id="'+a.widgetId+'"></canvas>\n                            ';case"Map":return'\n                            <div id="'+a.widgetId+'"></div>\n                            ';case"TextBox":return'<span id="'+a.widgetId+'"></span>'}},this.selectWiContentFull=function(){switch(a.type){case"MutiLine":return'<canvas id="'+a.fullScreenId+'"></canvas>';case"text-line":return' <h2 class="text-left"><span id="'+a.itemId.replace("item-","value_full")+'">0</span> '+a.unit+'</h2>\n                             <canvas id="'+a.fullScreenId+'"></canvas>\n                            ';case"Gauges":return'\n                            <h2><span id="'+a.itemId.replace("item-","gauges-text-full")+'">0</span> <span>'+a.unit+'</span></h2>\n                            <canvas id="'+a.fullScreenId+'"></canvas>\n                            ';case"Map":return'\n                            <div id="'+a.fullScreenId+'"></div>\n                            '}},this.createWidget=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=n.pop()||{x:3,y:4,width:6,height:7};$(".grid-stack").gridstack(i),l=$(".grid-stack").data("gridstack");var d="";"TextBox"!==a.type?d=(d=(d=(d=(d=$("#layout-widget").html()).replace(/div_id/g,a.itemId)).replace("((wi))",a.selectWiContent())).replace("((title_name))",a.title_name)).replace("{last_update}",a.lastUpdateId):(e.width=6,e.height=1,d=(d=(d=$("#layout-widget-text").html()).replace(/div_id/g,a.itemId)).replace("((wi))",a.selectWiContent())),e.id=a.itemId;var o,s;(t?l.addWidget($(d),t.x,t.y,t.width,t.height,!0,null,null,null,null,e.id):l.addWidget($(d),e.x,e.y,e.width,e.height,!0,null,null,null,null,e.id)).data("_gridstack_data",JSON.stringify((s={type:(o=a).type,timeInterval:o.timeInterval},"MutiLine"===o.type?(s.title_name=o.title_name,s.datasets=o.datasets):"text-line"===o.type?(s.title_name=o.title_name,s.unit=o.unit,s.rgb=o.rgb):"Gauges"===o.type?(s.title_name=o.title_name,s.opts=o.opts,s.limitMin=o.limitMin,s.limitMax=o.limitMax,s.unit=o.unit):"Map"===o.type?s.title_name=o.title_name:"TextBox"===o.type&&(s.textbox=o.textbox,s.fontsize=o.fontsize),s))),r()}}return n(t,null,[{key:"formateDataSave",value:function(t){var e={type:t.type,timeInterval:t.timeInterval};return"MutiLine"===t.type?(e.title_name=t.title_name,e.datasets=t.datasets):"text-line"===t.type?(e.title_name=t.title_name,e.unit=t.unit,e.rgb=t.rgb):"Gauges"===t.type?(e.title_name=t.title_name,e.opts=t.opts,e.limitMin=t.limitMin,e.limitMax=t.limitMax,e.unit=t.unit):"Map"===t.type?e.title_name=t.title_name:"TextBox"===t.type&&(e.textbox=t.textbox,e.fontsize=t.fontsize),e}}]),t}(),h=function(t){function e(t){o(this,e);var a=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));a.fullScreenId=t.fullScreenId,a.chart=null,a.datasets=t.datasets;var n={maintainAspectRatio:!1,scales:{yAxes:[{gridLines:{display:!1},ticks:{beginAtZero:!0,fontFamily:"'Poppins', 'Kanit', 'sans-serif'",fontStyle:"bold"}}],xAxes:[{gridLines:{display:!1},ticks:{fontFamily:"'Poppins', 'Kanit', 'sans-serif'",fontStyle:"bold"}}]},legend:{labels:{fontFamily:"'Poppins', 'Kanit', 'sans-serif'",fontColor:"black"}}};return a.createMutiLine=function(){var t=document.getElementById(a.widgetId);console.log(a.datasets);var e=new Chart(t,{type:"line",data:{datasets:Object(i.a)(a.datasets)},options:n});a.chart=e},a.createFullWidget=function(){var t=document.getElementById(a.fullScreenId);new Chart(t,{type:"line",data:{datasets:Object(i.a)(a.datasets)},options:n})},a.updateData=function(){var t=a.chart,e=Math.random(),i=new Date;t.data.labels.push(i.toLocaleTimeString()),t.data.datasets.forEach(function(t){t.data.length>10&&t.data.splice(0,1);var a=Math.random();t.data.push(e+a)}),t.data.labels.length>10&&t.data.labels.splice(0,1),t.update(),a.updateLastUpdate()},a}return d(e,g),e}(),v=function(t){function e(t){o(this,e);var a=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));a.fullScreenId=t.fullScreenId,a.unit=t.unit,a.rgb=t.rgb;var i={maintainAspectRatio:!1,responsive:!0,scales:{yAxes:[{display:!1}],xAxes:[{display:!1}]},legend:{display:!1},elements:{point:{radius:0},line:{tension:0}},layout:{padding:{left:0,right:0,top:0,bottom:30}},stepsize:100};return a.createTextLine=function(){var t=document.getElementById(a.widgetId),e=new Chart(t,{type:"line",data:{labels:[],datasets:[{label:"",data:[],backgroundColor:["rgba(255, 255, 255, 0)"],borderColor:[a.rgb],borderWidth:2}]},options:i});return a.chart=e,a.updateData(),e},a.createFullWidget=function(){var t=document.getElementById(a.fullScreenId);new Chart(t,{type:"line",data:{labels:[],datasets:[{label:"",data:[],backgroundColor:["rgba(255, 255, 255, 0)"],borderColor:[a.rgb],borderWidth:2}]},options:i})},a.updateData=function(){var t=a.widgetId;t=t.replace("myChart_","value_");var e=a.chart,i=Math.floor(100+900*Math.random()),n=new Date;e.data.labels.push(n.toLocaleTimeString()),e.data.datasets.forEach(function(e){e.data.length>10&&e.data.splice(0,1),e.data.push(i),$("#"+t).html(i)}),e.data.labels.length>10&&e.data.labels.splice(0,1),e.update(),a.updateLastUpdate()},a.liveData=function(){var t=a.widgetId;t=t.replace("myChart_","value_");var e=a.chart,i=new Date;e.data.labels.push(i.toLocaleTimeString()),e.data.datasets.forEach(function(t){t.data.length>10&&t.data.splice(0,1);var e=t.data[t.data.length-1];t.data.push(e)}),e.data.labels.length>10&&e.data.labels.splice(0,1),e.update()},a}return d(e,h),e}(),m=function(t){function e(t){o(this,e);var a=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return a.fullScreenId=t.fullScreenId,a.textId=t.textId,a.gaugeWidget=null,a.opts=t.opts,a.limitMax=t.limitMax,a.limitMin=t.limitMin,a.unit=t.unit,a.createGages=function(){var t=document.getElementById(a.widgetId),e=new Gauge(t).setOptions(a.opts);e.maxValue=a.limitMax,e.setMinValue(0),e.animationSpeed=32,e.set(0),a.gaugeWidget=e,a.updateData()},a.updateData=function(){var t=Math.floor(99*Math.random());$("#"+a.textId).html(t),a.gaugeWidget.set(t),a.updateLastUpdate()},a}return d(e,g),e}(),b=function(t){function e(t){o(this,e);var a=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return a.fullScreenId=t.fullScreenId,a.myMap=null,a.createMap=function(){var t=void 0,e=a.widgetId,i=$("#"+a.itemId).height()-100;$("#"+e).css("height",i),$("#"+e).css("width","auto"),t=L.map(e,{dragging:!0,zoomControl:!0,scrollWheelZoom:!1,zoomAnimation:!1}),$.getJSON("https://raw.githubusercontent.com/apisit/thailand.json/master/thailand.json").then(function(e){var a=new L.TileLayer.BoundaryCanvas("https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{boundary:e,minZoom:5,maxZoom:9,attribution:"&copy; Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ"});t.addLayer(a);var i=L.geoJSON(e);t.fitBounds(i.getBounds())}).then(function(){setTimeout(function(){t.invalidateSize(!0),$.ajax({dataType:"json",url:"/js/company/test-api.json",async:!1,success:function(e){var a=[],i=e.WeatherForecasts;for(var n in i)L.marker([i[n].location.lat,i[n].location.lon]).addTo(t).bindPopup(i[n].location.province+" อ ุณหภูมิที่ระดับพื้นผิว : "+i[n].forecasts[1].data.tc+" °C"),a.push([i[n].location.lat,i[n].location.lon,i[n].forecasts[1].data.tc/100]);L.heatLayer(a,{radius:75}).addTo(t)}})},1e3)}),$(".grid-stack").on("change",function(e,a){null!=t&&t.invalidateSize(!0)}),a.myMap=t,console.log(a.myMap)},a.createFullWidget=function(){var t=void 0,e=a.fullScreenId;$("#"+e).css("height","450px"),$("#"+e).css("width","auto"),t=L.map(e,{dragging:!0,zoomControl:!0,scrollWheelZoom:!1,zoomAnimation:!1}),$.getJSON("https://raw.githubusercontent.com/apisit/thailand.json/master/thailand.json").then(function(e){var a=new L.TileLayer.BoundaryCanvas("https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{boundary:e,minZoom:5,maxZoom:9,attribution:"&copy; Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ"});t.addLayer(a);var i=L.geoJSON(e);t.fitBounds(i.getBounds())}).then(function(){setTimeout(function(){t.invalidateSize(!0),$.ajax({dataType:"json",url:"/js/company/test-api.json",async:!1,success:function(e){var a=[],i=e.WeatherForecasts;for(var n in i)L.marker([i[n].location.lat,i[n].location.lon]).addTo(t).bindPopup(i[n].location.province+" อ ุณหภูมิที่ระดับพื้นผิว : "+i[n].forecasts[1].data.tc+" °C"),a.push([i[n].location.lat,i[n].location.lon,i[n].forecasts[1].data.tc/100]);L.heatLayer(a,{radius:75}).addTo(t)}})},1e3)})},a}return d(e,g),e}(),y=function(t){function e(t){o(this,e);var a=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return a.textbox=t.textbox,a.fontsize=t.fontsize,a.createTextBox=function(){console.log($("#"+a.widgetId)),$("#"+a.widgetId).html(a.textbox),$("#"+a.widgetId).css({"font-size":a.fontsize+"px"})},a}return d(e,g),e}(),w=[],x=function(){function t(){o(this,t);var e={cellHeight:80,verticalMargin:10,float:!1},a=null,i=null,n=function(){return $("#widget_type").val()},l=function(){return $("#title-name").val()},d=function(){return $("#time-interval").val()},r=function(){return(new Date).toUTCString()},s=function(){var t=n(),e=Math.floor(1e5+9e5*Math.random()),a=null,i=null;"MutiLine"===t?(i=function(t){for(var e=$("#Mutiline_value").find(".label-y-chart-line").length,a=[],i=0;i<e;i++){var o,s=$("#Mutiline_value").find(".label-y-chart-line"),c=$("#Mutiline_value").find(".rgb-chart-line");o={label:$(s[i]).val(),backgroundColor:"rgba(255,255,255,0.0)",borderColor:$(c[i]).val(),borderWidth:2},a.push(o)}return{itemId:"item-"+t,widgetId:"myChart_"+t,lastUpdateId:"myChartLastUpdate_"+t,fullScreenId:"myChartFull_"+t,type:n(),title_name:l(),lastUpdate:r(),timeInterval:d(),datasets:[].concat(a)}}(e),(a=new h(Object.assign({},i))).createWidget(),a.createMutiLine()):"text-line"===t?(i=function(t){var e=$("#text-line").find("#unit").val(),a=$("#value-text-line").find("#rgb").val();return{itemId:"item-"+t,widgetId:"myChart_"+t,lastUpdateId:"myChartLastUpdate_"+t,fullScreenId:"myChartFull_"+t,type:n(),title_name:l(),lastUpdate:r(),timeInterval:d(),rgb:a,unit:e}}(e),(a=new v(i)).createWidget(),a.createTextLine()):"Gauges"===t?(i=function(t){var e=$("#Gauges").find("#g_limitMin").val(),a=$("#Gauges").find("#g_limitMax").val(),i=$("#Gauges").find("#unit").val();return{textId:"gauges-text-"+t,itemId:"item-"+t,widgetId:"gauges-"+t,lastUpdateId:"gaugesLastUpdate-"+t,fullScreenId:"gaugesFull-"+t,type:n(),title_name:l(),lastUpdate:r(),timeInterval:d(),limitMax:a,limitMin:e,unit:i,opts:{angle:0,lineWidth:.23,radiusScale:1,pointer:{length:.6,strokeWidth:.035,color:"#000000"},limitMax:!1,limitMin:!1,colorStart:"#6FADCF",colorStop:"#8FC0DA",strokeColor:"#E0E0E0",generateGradient:!0,highDpiSupport:!0,staticLabels:{font:"10px Poppins",labels:[0,Number(a)],color:"#000000",fractionDigits:0}}}}(e),(a=new m(i)).createWidget(),a.createGages()):"Map"===t?(i=function(t){return{itemId:"item-"+t,widgetId:"map-"+t,lastUpdateId:"mapLastUpdate-"+t,fullScreenId:"mapFull-"+t,type:n(),title_name:l(),lastUpdate:r(),timeInterval:d()}}(e),(a=new b(i)).createWidget(),a.createMap()):"TextBox"===t&&(i=function(t){var e=$("#text-box").find("#text-custom").val(),a=$("#text-box").find("#font-size").val();return{itemId:"item-"+t,widgetId:"text-"+t,type:n(),title_name:null,lastUpdate:null,timeInterval:null,textbox:e,fontsize:a}}(e),(a=new y(i)).createWidget(),a.createTextBox()),w.push(a)},c=function(){$("#settingW").click(function(){clearInterval(i),$(this).hide(),$(".full-screen").hide(),$(".edit-widget").show(),$("#addW").show(),$("#saveW").show(),$("#cancelW").show(),a.enableMove(!0),a.enableResize(!0)}),$("#widget_type").change(function(){var t;$(".value_widget").hide(),t=n(),$(".value_widget").hide(),$("#default-value").show(),"MutiLine"===t?$("#MutiLine").show():"text-line"===t?$("#text-line").show():"Gauges"===t?$("#Gauges").show():"TextBox"===t?($("#text-box").show(),$("#default-value").hide()):$("#form-input-widget").html("")}),$("#addW").unbind().click(function(){$("input[type=text]").val(""),$("#myModal").modal("show")}),$("#add-new-widget").unbind().click(function(){s()}),$("#saveW").unbind().click(function(){var e;$("#saveW").hide(),$("#addW").hide(),$("#cancelW").hide(),$("#settingW").show(),$(".full-screen").show(),$(".edit-widget").hide(),u(),e=_.map($(".grid-stack > .grid-stack-item:visible"),function(e){var a=(e=$(e)).data("_gridstack_node"),i=(e.data("_gridstack_data"),t.getWidgetById(a.id));return{x:a.x,y:a.y,width:a.width,height:a.height,widget:g.formateDataSave(i)}}),setStorage("dashboard",e),a.enableMove(!1),a.enableResize(!1)}),$("#cancelW").unbind().click(function(){$("#saveW").hide(),$("#addW").hide(),$(".edit-widget").hide(),$(".full-screen").show(),$("#cancelW").hide(),$("#settingW").show(),u(),a.enableMove(!1),a.enableResize(!1)}),$("#btn-add-value-Mutiline").unbind().click(function(){var t;t=$("#line_value_layout").html(),$("#Mutiline_value").append(t)})},u=function(){i=setInterval(function(){w.length>0&&p([].concat(w))},1e3)},p=function(e){for(var a=0;a<e.length;a++){var i=e[a];i.updateData&&(t.diffTime(i.lastUpdate,i.timeInterval)>=i.timeInterval?i.updateData():i.liveData&&i.liveData())}};this.initDashboard=function(){c();""!=getStorage("dashboard")&&function(t){var e=null,a=null,i=null,n="";for(var l in t){var d=Math.floor(1e5+9e5*Math.random());e=null,a=t[l].widget,i=t[l],n=a.type,a.itemId="item-"+d,a.lastUpdate=r(),"MutiLine"===n?(a.widgetId="myChart_"+d,a.fullScreenId="myChartFull_"+d,a.lastUpdateId="myChartLastUpdate_"+d,(e=new h(a)).createWidget(i),e.createMutiLine()):"Gauges"===n?(a.textId="gauges-text-"+d,a.widgetId="gauges-"+d,a.lastUpdateId="gaugesLastUpdate-"+d,a.fullScreenId="gaugesFull-"+d,(e=new m(a)).createWidget(i),e.createGages()):"text-line"===n?(a.widgetId="myChart_"+d,a.lastUpdateId="myChartLastUpdate_"+d,a.fullScreenId="myChartFull_"+d,(e=new v(a)).createWidget(i),e.createTextLine()):"Map"===n?(a.widgetId="map-"+d,a.lastUpdateId="mapLastUpdate_"+d,a.fullScreenId="mapFull-"+d,(e=new b(a)).createWidget(i),e.createMap()):"TextBox"===n&&(a.widgetId="text-"+d,(e=new y(a)).createWidget(i),e.createTextBox()),w.push(e)}$(".edit-widget").hide()}(GridStackUI.Utils.sort(getStorage("dashboard"))),u(),$(".grid-stack").gridstack(e),(a=$(".grid-stack").data("gridstack")).enableMove(!1),a.enableResize(!1),$("#loading").remove()}}return n(t,null,[{key:"diffTime",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var e=new Date,a=new Date(t),i=(e.getTime()-a.getTime())/1e3;return Math.abs(Math.round(i))}},{key:"updateGridData",value:function(t){}},{key:"getWidgetById",value:function(t){return w.find(function(e){return e.itemId==t})}}]),t}();$(document).ready(function(){$("#sidebarCollapse").click(),(new x).initDashboard(),$(".grid-stack").on("gsresizestop",function(t,e){var a=$(e),i=JSON.parse(a.data("_gridstack_data")),n=a.data("_gridstack_node");console.log(n);var l=i.type;if("Gauges"===l);else if("Map"===l){x.getWidgetById(n.id).myMap.invalidateSize()}})})}});