!function(t){var e={};function i(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="http://localhost:8080/",i(i.s=0)}({0:function(t,e,i){t.exports=i("AG5F")},"0v0P":function(t,e,i){"use strict";i.d(e,"b",function(){return a}),i.d(e,"a",function(){return n});var a=function(t,e){var i=t;i.find("#loading-save").length||i.find(".modal-body").after(' <div id="loading-save" style="display:none;">\n                        <div class="lds-ring">\n                            <div></div>\n                            <div></div>\n                            <div></div>\n                            <div></div>\n                        </div>\n                        <h6 class=\'text-center\'>Saving Data ...</h6>\n                    </div>'),e?(i.find("form").hide(),i.find(".modal-footer").hide(),i.find("#loading-save").show()):(i.find("form").show(),i.find(".modal-footer").show(),i.find("#loading-save").hide())},n=function(t){return t.map(function(t){return Object.assign({},t)})}},AG5F:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("0v0P"),n=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}();function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Chart.defaults.global.defaultFontFamily="'Poppins', 'Kanit', 'sans-serif'";var s=function t(e){var i=this;o(this,t),this.widget=e;var a=null;this.createModalEdit=function(t,e){null===a&&(a='<div class="modal fade" id="EditWidget">\n                                        <div class="modal-dialog modal-lg">\n                                            <div class="modal-content">\n                                                <div class="modal-header">\n                                                    <h5 class="modal-title">Edit Widget</h5>\n                                                    <button type="button" class="close" data-dismiss="modal">&times;</button>\n                                                </div>\n\n                                                <div class="modal-body" id="form-edit-widget">     \n                                                </div>\n\n                                                <div class="modal-footer">\n                                                    <button type="button" id="btn-submit-edit-widget" class="btn btn-success btn-block">Save</button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>',$("body").append(a)),$("#form-edit-widget").html(t),$("#EditWidget").modal("show")},this.submitEditClick=function(t){$("#btn-submit-edit-widget").unbind().click(function(){t()})},this.closeModalEdit=function(){$("#EditWidget").modal("hide")},this.findTitleWidget=function(){return $("#"+i.widget.itemId).find(".title-widget")}},r=function(t){function e(t){o(this,e);var i=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),a=function(){i.submitEditClick(n)},n=function(){var t=$("#edit-title").val();$(i.findTitleWidget()).html(t),i.widget.title_name=t,i.closeModalEdit()};return i.initCreate=function(){i.createModalEdit('<div class="row" id="div-title">\n                            <div class="col-6">\n                                <lable>Title</label>\n                            <input type="text" class="form-control" id="edit-title"/>\n                            </div>\n                        </div>',a),a(),$("#edit-title").val(t.title_name)},i}return d(e,s),e}(),c=function(t){function e(t){o(this,e);var i=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),a=function(){i.submitEditClick(n)},n=function(){var t=$("#edit-title").val(),e=$("#edit-unit").val(),a=i.widget.itemId.replace("item-","unit_");$(i.findTitleWidget()).html(t),$("#"+a).html(e),i.widget.title_name=t,i.widget.unit=e,i.closeModalEdit()};return i.initCreate=function(){i.createModalEdit('<div id="edit-Gauges" class="edit-widget-form"> \n                            <div class="row">\n                                <div class="col-6">\n                                    <lable>Title</label>\n                                    <input type="text" class="form-control" id="edit-title"/>\n                                </div>\n                                <div class="col-6">\n                                    <lable>Unit</label>\n                                    <input type="text" class="form-control" id="edit-unit"/>\n                                </div>\n                            </div>\n                        </div>',a),a(),$("#edit-title").val(t.title_name),$("#edit-unit").val(t.unit)},i}return d(e,s),e}(),u=function(t){function e(t){o(this,e);var i=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),a=function(){i.submitEditClick(n)},n=function(){var t=$("#edit-title").val();$(i.findTitleWidget()).html(t),i.widget.title_name=t,i.closeModalEdit()};return i.initCreate=function(){i.createModalEdit('<div class="row" id="div-title">\n                            <div class="col-6">\n                                <lable>Title</label>\n                            <input type="text" class="form-control" id="edit-title"/>\n                            </div>\n                        </div>',a),a(),$("#edit-title").val(t.title_name)},i}return d(e,s),e}(),p=function(t){function e(t){o(this,e);var i=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),a=function(){i.submitEditClick(n)},n=function(){var t=$("#edit-title").val(),e=$("#edit-unit").val(),a=i.widget.itemId.replace("item-","unit_");$(i.findTitleWidget()).html(t),$("#"+a).html(e),i.widget.title_name=t,i.widget.unit=e,i.closeModalEdit()};return i.initCreate=function(){i.createModalEdit('<div class="row" id="div-title">\n                            <div class="col-6">\n                                <lable>Title</label>\n                                <input type="text" class="form-control" id="edit-title"/>\n                            </div>\n                            <div class="col-6">\n                                <lable>Unit</label>\n                                <input type="text" class="form-control" id="edit-unit"/>\n                            </div>\n                        </div>',a),a(),$("#edit-title").val(t.title_name),$("#edit-unit").val(t.unit)},i}return d(e,s),e}(),f=function(t){function e(t){o(this,e);var i=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),a=function(){i.submitEditClick(n)},n=function(){$("#"+t.widgetId).html($("#edit-text-custom").val()),$("#"+t.widgetId).css({"font-size":$("#edit-font-size").val()+"px"}),t.textbox=$("#edit-text-custom").val(),t.fontsize=$("#edit-font-size").val(),i.closeModalEdit()};return i.initCreate=function(){i.createModalEdit('<div id = "edit-text-box" class="value_widget">\n                            <div class="row">\n                                <div class="col-6">\n                                    <label>Text</label>\n                                    <input type="text" id="edit-text-custom" class="form-control" />\n                                </div>\n                                <div class="col-6">\n                                    <label>Font Size (px)</label>\n                                    <input type="number" id="edit-font-size" class="form-control" />\n                                </div>\n                            </div>\n                        </div> ',a),a(),$("#edit-text-custom").val(t.textbox),$("#edit-font-size").val(t.fontsize)},i}return d(e,s),e}(),g=function(){function t(e){var i=this;o(this,t),this.itemId=e.itemId,this.widgetId=e.widgetId,this.type=e.type,this.lastUpdateId=e.lastUpdateId,this.title_name=e.title_name,this.lastUpdate=e.lastUpdate,this.timeInterval=e.timeInterval,this.wi=e.wi,this.updateLastUpdate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t?(i.lastUpdate=new Date(t),$("#"+i.lastUpdateId).html(i.lastUpdate.toDateString()+" "+i.lastUpdate.toLocaleTimeString())):(i.lastUpdate=new Date,$("#"+i.lastUpdateId).html(i.lastUpdate.toDateString()+" "+i.lastUpdate.toLocaleTimeString()))};var a={cellHeight:80,verticalMargin:10,float:!1},n=[{x:0,y:0,width:6,height:7}],l=null,d=null,s=function(){$(".btn-delete-wi").unbind().click(function(){m($(this))}),$(".btn-edit-wi").unbind().click(function(){var t,e,i,a;t=$(this),e=$(t).attr("item"),i=x.getWidgetById(e),a=null,"MutiLine"===i.type?a=new r(i):"text-line"===i.type?a=new p(i):"Gauges"===i.type?a=new c(i):"Map"===i.type?a=new u(i):"TextBox"===i.type&&(a=new f(i)),a.initCreate()}),$(".btn-full-screen").unbind().click(function(){g($(this))})},g=function(t){var e=x.getWidgetById(t.attr("item"));$("#modal-full-screen").modal("show"),$("#content-widget").html(e.selectWiContentFull()),e.createFullWidget()},m=function(t){null===d&&(d='\n                <div class="modal fade" id="DeleteWidget">\n                    <div class="modal-dialog modal-dialog-centered">\n                        <div class="modal-content">\n                            <div class="modal-header">\n                                <h5 class="modal-title">Delete Widget</h5>\n                                <button type="button" class="close" data-dismiss="modal">&times;</button>\n                            </div>\n    \n                            <div class="modal-body">\n                                <h6>Are you sure to delete this widget?</h6>\n                            </div>\n    \n                            <div class="modal-footer">\n                                <button type="button" id="" class="btn btn-danger btn-block btn-submit-delete-widget">Delete</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>',$("body").append(d)),$("#DeleteWidget").modal("show"),$(".btn-submit-delete-widget").unbind().click(function(){v($(t)),$("#DeleteWidget").modal("hide")})},v=function(t){var e=$(t).attr("item");l.removeWidget($("#"+e).closest(".grid-stack-item"));var i=w.findIndex(function(t){return t.itemId==e});w.splice(i,1)};this.selectWiContent=function(){switch(i.type){case"MutiLine":return'<canvas id="'+i.widgetId+'"></canvas>';case"text-line":return' <h2 class="text-left"><span id="'+i.itemId.replace("item-","value_")+'">0</span> <span  id="'+i.itemId.replace("item-","unit_")+'">'+i.unit+'</span></h2>\n                             <canvas id="'+i.widgetId+'"></canvas>\n                            ';case"Gauges":return'\n                            <h2><span id="'+i.itemId.replace("item-","gauges-text-")+'">0</span> <span  id="'+i.itemId.replace("item-","unit_")+'">'+i.unit+'</span></h2>\n                            <canvas id="'+i.widgetId+'"></canvas>\n                            ';case"Map":return'\n                            <div id="'+i.widgetId+'"></div>\n                            ';case"TextBox":return'<span id="'+i.widgetId+'"></span>'}},this.selectWiContentFull=function(){switch(i.type){case"MutiLine":return'<canvas id="'+i.fullScreenId+'"></canvas>';case"text-line":return' <h2 class="text-left"><span id="'+i.itemId.replace("item-","value_full")+'">0</span> '+i.unit+'</h2>\n                             <canvas id="'+i.fullScreenId+'"></canvas>\n                            ';case"Gauges":return'\n                            <h2><span id="'+i.itemId.replace("item-","gauges-text-full")+'">0</span> <span>'+i.unit+'</span></h2>\n                            <canvas id="'+i.fullScreenId+'"></canvas>\n                            ';case"Map":return'\n                            <div id="'+i.fullScreenId+'"></div>\n                            '}},this.createWidget=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=n.pop()||{x:3,y:4,width:6,height:7};$(".grid-stack").gridstack(a),l=$(".grid-stack").data("gridstack");var d="";"TextBox"!==i.type?d=(d=(d=(d=(d=$("#layout-widget").html()).replace(/div_id/g,i.itemId)).replace("((wi))",i.selectWiContent())).replace("((title_name))",i.title_name)).replace("{last_update}",i.lastUpdateId):(e.width=6,e.height=1,d=(d=(d=$("#layout-widget-text").html()).replace(/div_id/g,i.itemId)).replace("((wi))",i.selectWiContent())),e.id=i.itemId;var o,r;(t?l.addWidget($(d),t.x,t.y,t.width,t.height,!0,null,null,null,null,e.id):l.addWidget($(d),e.x,e.y,e.width,e.height,!0,null,null,null,null,e.id)).data("_gridstack_data",JSON.stringify((r={type:(o=i).type,timeInterval:o.timeInterval},"MutiLine"===o.type?(r.title_name=o.title_name,r.datasets=o.datasets):"text-line"===o.type?(r.title_name=o.title_name,r.unit=o.unit,r.rgb=o.rgb):"Gauges"===o.type?(r.title_name=o.title_name,r.opts=o.opts,r.limitMin=o.limitMin,r.limitMax=o.limitMax,r.unit=o.unit):"Map"===o.type?r.title_name=o.title_name:"TextBox"===o.type&&(r.textbox=o.textbox,r.fontsize=o.fontsize),r))),s()}}return n(t,null,[{key:"formateDataSave",value:function(t){var e={type:t.type,timeInterval:t.timeInterval};return"MutiLine"===t.type?(e.title_name=t.title_name,e.datasets=t.datasets):"text-line"===t.type?(e.title_name=t.title_name,e.unit=t.unit,e.rgb=t.rgb):"Gauges"===t.type?(e.title_name=t.title_name,e.opts=t.opts,e.limitMin=t.limitMin,e.limitMax=t.limitMax,e.unit=t.unit):"Map"===t.type?e.title_name=t.title_name:"TextBox"===t.type&&(e.textbox=t.textbox,e.fontsize=t.fontsize),e}}]),t}(),m=function(t){function e(t){o(this,e);var i=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));i.fullScreenId=t.fullScreenId,i.chart=null,i.datasets=t.datasets;var n={maintainAspectRatio:!1,scales:{yAxes:[{gridLines:{display:!1},ticks:{beginAtZero:!0,fontFamily:"'Poppins', 'Kanit', 'sans-serif'",fontStyle:"bold"}}],xAxes:[{gridLines:{display:!1},ticks:{fontFamily:"'Poppins', 'Kanit', 'sans-serif'",fontStyle:"bold"}}]},legend:{labels:{fontFamily:"'Poppins', 'Kanit', 'sans-serif'",fontColor:"black"}}};return i.createMutiLine=function(){var t=document.getElementById(i.widgetId);console.log(i.datasets);var e=new Chart(t,{type:"line",data:{datasets:Object(a.a)(i.datasets)},options:n});i.chart=e},i.createFullWidget=function(){var t=document.getElementById(i.fullScreenId);new Chart(t,{type:"line",data:{datasets:Object(a.a)(i.datasets)},options:n})},i.updateData=function(){var t=i.chart,e=Math.random(),a=new Date;t.data.labels.push(a.toLocaleTimeString()),t.data.datasets.forEach(function(t){t.data.length>10&&t.data.splice(0,1);var i=Math.random();t.data.push(e+i)}),t.data.labels.length>10&&t.data.labels.splice(0,1),t.update(),i.updateLastUpdate()},i}return d(e,g),e}(),v=function(t){function e(t){o(this,e);var i=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));i.fullScreenId=t.fullScreenId,i.unit=t.unit,i.rgb=t.rgb;var a={maintainAspectRatio:!1,responsive:!0,scales:{yAxes:[{display:!1}],xAxes:[{display:!1}]},legend:{display:!1},elements:{point:{radius:0},line:{tension:0}},layout:{padding:{left:0,right:0,top:0,bottom:30}},stepsize:100};return i.createTextLine=function(){var t=document.getElementById(i.widgetId),e=new Chart(t,{type:"line",data:{labels:[],datasets:[{label:"",data:[],backgroundColor:["rgba(255, 255, 255, 0)"],borderColor:[i.rgb],borderWidth:2}]},options:a});return i.chart=e,i.updateData(),e},i.createFullWidget=function(){var t=document.getElementById(i.fullScreenId);new Chart(t,{type:"line",data:{labels:[],datasets:[{label:"",data:[],backgroundColor:["rgba(255, 255, 255, 0)"],borderColor:[i.rgb],borderWidth:2}]},options:a})},i.updateData=function(){var t=i.widgetId;t=t.replace("myChart_","value_");var e=i.chart,a=Math.floor(100+900*Math.random()),n=new Date;e.data.labels.push(n.toLocaleTimeString()),e.data.datasets.forEach(function(e){e.data.length>10&&e.data.splice(0,1),e.data.push(a),$("#"+t).html(a)}),e.data.labels.length>10&&e.data.labels.splice(0,1),e.update(),i.updateLastUpdate()},i.liveData=function(){var t=i.widgetId;t=t.replace("myChart_","value_");var e=i.chart,a=new Date;e.data.labels.push(a.toLocaleTimeString()),e.data.datasets.forEach(function(t){t.data.length>10&&t.data.splice(0,1);var e=t.data[t.data.length-1];t.data.push(e)}),e.data.labels.length>10&&e.data.labels.splice(0,1),e.update()},i}return d(e,m),e}(),h=function(t){function e(t){o(this,e);var i=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.fullScreenId=t.fullScreenId,i.textId=t.textId,i.gaugeWidget=null,i.opts=t.opts,i.limitMax=t.limitMax,i.limitMin=t.limitMin,i.unit=t.unit,i.createGages=function(){var t=document.getElementById(i.widgetId),e=new Gauge(t).setOptions(i.opts);e.maxValue=i.limitMax,e.setMinValue(0),e.animationSpeed=32,e.set(0),i.gaugeWidget=e,i.updateData()},i.updateData=function(){var t=Math.floor(99*Math.random());$("#"+i.textId).html(t),i.gaugeWidget.set(t),i.updateLastUpdate()},i}return d(e,g),e}(),b=function(t){function e(t){o(this,e);var i=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.fullScreenId=t.fullScreenId,i.myMap=null,i.createMap=function(){var t=void 0,e=i.widgetId,a=$("#"+i.itemId).height()-100;$("#"+e).css("height",a),$("#"+e).css("width","auto"),t=L.map(e,{dragging:!0,zoomControl:!0,scrollWheelZoom:!1,zoomAnimation:!1}),$.getJSON("https://raw.githubusercontent.com/apisit/thailand.json/master/thailand.json").then(function(e){var i=new L.TileLayer.BoundaryCanvas("https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{boundary:e,minZoom:5,maxZoom:9,attribution:"&copy; Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ"});t.addLayer(i);var a=L.geoJSON(e);t.fitBounds(a.getBounds())}).then(function(){setTimeout(function(){t.invalidateSize(!0),$.ajax({dataType:"json",url:"/js/company/test-api.json",async:!1,success:function(e){var i=[],a=e.WeatherForecasts;for(var n in a)L.marker([a[n].location.lat,a[n].location.lon]).addTo(t).bindPopup(a[n].location.province+" อ ุณหภูมิที่ระดับพื้นผิว : "+a[n].forecasts[1].data.tc+" °C"),i.push([a[n].location.lat,a[n].location.lon,a[n].forecasts[1].data.tc/100]);L.heatLayer(i,{radius:75}).addTo(t)}})},1e3)}),$(".grid-stack").on("change",function(e,i){null!=t&&t.invalidateSize(!0)}),i.myMap=t,console.log(i.myMap)},i.createFullWidget=function(){var t=void 0,e=i.fullScreenId;$("#"+e).css("height","450px"),$("#"+e).css("width","auto"),t=L.map(e,{dragging:!0,zoomControl:!0,scrollWheelZoom:!1,zoomAnimation:!1}),$.getJSON("https://raw.githubusercontent.com/apisit/thailand.json/master/thailand.json").then(function(e){var i=new L.TileLayer.BoundaryCanvas("https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{boundary:e,minZoom:5,maxZoom:9,attribution:"&copy; Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ"});t.addLayer(i);var a=L.geoJSON(e);t.fitBounds(a.getBounds())}).then(function(){setTimeout(function(){t.invalidateSize(!0),$.ajax({dataType:"json",url:"/js/company/test-api.json",async:!1,success:function(e){var i=[],a=e.WeatherForecasts;for(var n in a)L.marker([a[n].location.lat,a[n].location.lon]).addTo(t).bindPopup(a[n].location.province+" อ ุณหภูมิที่ระดับพื้นผิว : "+a[n].forecasts[1].data.tc+" °C"),i.push([a[n].location.lat,a[n].location.lon,a[n].forecasts[1].data.tc/100]);L.heatLayer(i,{radius:75}).addTo(t)}})},1e3)})},i}return d(e,g),e}(),y=function(t){function e(t){o(this,e);var i=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.textbox=t.textbox,i.fontsize=t.fontsize,i.createTextBox=function(){console.log($("#"+i.widgetId)),$("#"+i.widgetId).html(i.textbox),$("#"+i.widgetId).css({"font-size":i.fontsize+"px"})},i}return d(e,g),e}(),w=[],x=function(){function t(){o(this,t);var e={cellHeight:80,verticalMargin:10,float:!1},i=null,a=null,n=function(){return $("#widget_type").val()},l=function(){return $("#title-name").val()},d=function(){return $("#time-interval").val()},s=function(){return(new Date).toUTCString()},r=function(){var t=n(),e=Math.floor(1e5+9e5*Math.random()),i=null,a=null;"MutiLine"===t?(a=function(t){for(var e=$("#Mutiline_value").find(".label-y-chart-line").length,i=[],a=0;a<e;a++){var o,r=$("#Mutiline_value").find(".label-y-chart-line"),c=$("#Mutiline_value").find(".rgb-chart-line");o={label:$(r[a]).val(),backgroundColor:"rgba(255,255,255,0.0)",borderColor:$(c[a]).val(),borderWidth:2},i.push(o)}return{itemId:"item-"+t,widgetId:"myChart_"+t,lastUpdateId:"myChartLastUpdate_"+t,fullScreenId:"myChartFull_"+t,type:n(),title_name:l(),lastUpdate:s(),timeInterval:d(),datasets:[].concat(i)}}(e),(i=new m(Object.assign({},a))).createWidget(),i.createMutiLine()):"text-line"===t?(a=function(t){var e=$("#text-line").find("#unit").val(),i=$("#value-text-line").find("#rgb").val();return{itemId:"item-"+t,widgetId:"myChart_"+t,lastUpdateId:"myChartLastUpdate_"+t,fullScreenId:"myChartFull_"+t,type:n(),title_name:l(),lastUpdate:s(),timeInterval:d(),rgb:i,unit:e}}(e),(i=new v(a)).createWidget(),i.createTextLine()):"Gauges"===t?(a=function(t){var e=$("#Gauges").find("#g_limitMin").val(),i=$("#Gauges").find("#g_limitMax").val(),a=$("#Gauges").find("#unit").val();return{textId:"gauges-text-"+t,itemId:"item-"+t,widgetId:"gauges-"+t,lastUpdateId:"gaugesLastUpdate-"+t,fullScreenId:"gaugesFull-"+t,type:n(),title_name:l(),lastUpdate:s(),timeInterval:d(),limitMax:i,limitMin:e,unit:a,opts:{angle:0,lineWidth:.23,radiusScale:1,pointer:{length:.6,strokeWidth:.035,color:"#000000"},limitMax:!1,limitMin:!1,colorStart:"#6FADCF",colorStop:"#8FC0DA",strokeColor:"#E0E0E0",generateGradient:!0,highDpiSupport:!0,staticLabels:{font:"10px Poppins",labels:[0,Number(i)],color:"#000000",fractionDigits:0}}}}(e),(i=new h(a)).createWidget(),i.createGages()):"Map"===t?(a=function(t){return{itemId:"item-"+t,widgetId:"map-"+t,lastUpdateId:"mapLastUpdate-"+t,fullScreenId:"mapFull-"+t,type:n(),title_name:l(),lastUpdate:s(),timeInterval:d()}}(e),(i=new b(a)).createWidget(),i.createMap()):"TextBox"===t&&(a=function(t){var e=$("#text-box").find("#text-custom").val(),i=$("#text-box").find("#font-size").val();return{itemId:"item-"+t,widgetId:"text-"+t,type:n(),title_name:null,lastUpdate:null,timeInterval:null,textbox:e,fontsize:i}}(e),(i=new y(a)).createWidget(),i.createTextBox()),w.push(i)},c=function(){$("#settingW").click(function(){clearInterval(a),$(this).hide(),$(".full-screen").hide(),$(".edit-widget").show(),$("#addW").show(),$("#saveW").show(),$("#cancelW").show(),i.enableMove(!0),i.enableResize(!0)}),$("#widget_type").change(function(){var t;$(".value_widget").hide(),t=n(),$(".value_widget").hide(),$("#default-value").show(),"MutiLine"===t?$("#MutiLine").show():"text-line"===t?$("#text-line").show():"Gauges"===t?$("#Gauges").show():"TextBox"===t?($("#text-box").show(),$("#default-value").hide()):$("#form-input-widget").html("")}),$("#addW").unbind().click(function(){$("input[type=text]").val(""),$("#myModal").modal("show")}),$("#add-new-widget").unbind().click(function(){r()}),$("#saveW").unbind().click(function(){var e;$("#saveW").hide(),$("#addW").hide(),$("#cancelW").hide(),$("#settingW").show(),$(".full-screen").show(),$(".edit-widget").hide(),u(),e=_.map($(".grid-stack > .grid-stack-item:visible"),function(e){var i=(e=$(e)).data("_gridstack_node"),a=(e.data("_gridstack_data"),t.getWidgetById(i.id));return{x:i.x,y:i.y,width:i.width,height:i.height,widget:g.formateDataSave(a)}}),setStorage("dashboard",e),i.enableMove(!1),i.enableResize(!1)}),$("#cancelW").unbind().click(function(){$("#saveW").hide(),$("#addW").hide(),$(".edit-widget").hide(),$(".full-screen").show(),$("#cancelW").hide(),$("#settingW").show(),u(),i.enableMove(!1),i.enableResize(!1)}),$("#btn-add-value-Mutiline").unbind().click(function(){var t;t=$("#line_value_layout").html(),$("#Mutiline_value").append(t)})},u=function(){a=setInterval(function(){w.length>0&&p([].concat(w))},1e3)},p=function(e){for(var i=0;i<e.length;i++){var a=e[i];a.updateData&&(t.diffTime(a.lastUpdate,a.timeInterval)>=a.timeInterval?a.updateData():a.liveData&&a.liveData())}};this.initDashboard=function(){c();""!=getStorage("dashboard")&&function(t){var e=null,i=null,a=null,n="";for(var l in t){var d=Math.floor(1e5+9e5*Math.random());e=null,i=t[l].widget,a=t[l],n=i.type,i.itemId="item-"+d,i.lastUpdate=s(),"MutiLine"===n?(i.widgetId="myChart_"+d,i.fullScreenId="myChartFull_"+d,i.lastUpdateId="myChartLastUpdate_"+d,(e=new m(i)).createWidget(a),e.createMutiLine()):"Gauges"===n?(i.textId="gauges-text-"+d,i.widgetId="gauges-"+d,i.lastUpdateId="gaugesLastUpdate-"+d,i.fullScreenId="gaugesFull-"+d,(e=new h(i)).createWidget(a),e.createGages()):"text-line"===n?(i.widgetId="myChart_"+d,i.lastUpdateId="myChartLastUpdate_"+d,i.fullScreenId="myChartFull_"+d,(e=new v(i)).createWidget(a),e.createTextLine()):"Map"===n?(i.widgetId="map-"+d,i.lastUpdateId="mapLastUpdate_"+d,i.fullScreenId="mapFull-"+d,(e=new b(i)).createWidget(a),e.createMap()):"TextBox"===n&&(i.widgetId="text-"+d,(e=new y(i)).createWidget(a),e.createTextBox()),w.push(e)}$(".edit-widget").hide()}(GridStackUI.Utils.sort(getStorage("dashboard"))),u(),$(".grid-stack").gridstack(e),(i=$(".grid-stack").data("gridstack")).enableMove(!1),i.enableResize(!1),$("#loading").remove()}}return n(t,null,[{key:"diffTime",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var e=new Date,i=new Date(t),a=(e.getTime()-i.getTime())/1e3;return Math.abs(Math.round(a))}},{key:"updateGridData",value:function(t){}},{key:"getWidgetById",value:function(t){return w.find(function(e){return e.itemId==t})}}]),t}();$(document).ready(function(){$("#sidebarCollapse").click(),(new x).initDashboard(),$(".grid-stack").on("gsresizestop",function(t,e){var i=$(e),a=JSON.parse(i.data("_gridstack_data")),n=i.data("_gridstack_node");console.log(n);var l=a.type;if("Gauges"===l);else if("Map"===l){x.getWidgetById(n.id).myMap.invalidateSize()}})})}});