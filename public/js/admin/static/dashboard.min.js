!function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="http://localhost:8080/",i(i.s=0)}({0:function(t,e,i){t.exports=i("AG5F")},"0v0P":function(t,e,i){"use strict";i.d(e,"c",function(){return n}),i.d(e,"b",function(){return l}),i.d(e,"a",function(){return o});var n=function(t){return t.map(function(t){return Object.assign({},t)})},a=null,l={set:function(t){a=t.html();var e=t.attr("data-loading-text");t.html(e),t.prop("disabled",!0)},reset:function(t){t.html(a),t.prop("disabled",!1)}},o={set:function(t,e){$(".text-alert").remove(),Object.keys(t).map(function(i){e[i]&&($(t[i].el).removeClass("input-error"),$(t[i].el).addClass("input-error"),$(t[i].el).after('<p class="text-alert small" style="color:red">'+e[i]+"</p>"),$(t[i].el).focus(function(){$(t[i].el).removeClass("input-error"),$(t[i].el).next(".text-alert").remove()}),setTimeout(function(){$(t[i].el).removeClass("input-error"),$(".text-alert").remove()},6e3))})},reset:function(t){$(t).removeClass("input-error"),$(".text-alert").remove()}}},AG5F:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("0v0P"),a=i("t4zo"),l=(i.n(a),function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}());function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Chart.defaults.global.defaultFontFamily="'Poppins', 'Kanit', 'sans-serif'";var s=function t(e){var i=this;r(this,t),this.widget=e;var n=null;this.createModalEdit=function(t,e){null===n&&(n='<div class="modal fade" id="EditWidget">\n                                        <div class="modal-dialog modal-lg">\n                                            <div class="modal-content">\n                                                <div class="modal-header">\n                                                    <h5 class="modal-title">Edit Widget</h5>\n                                                    <button type="button" class="close" data-dismiss="modal">&times;</button>\n                                                </div>\n\n                                                <div class="modal-body" id="form-edit-widget">     \n                                                </div>\n\n                                                <div class="modal-footer">\n                                                    <button type="button" id="btn-submit-edit-widget" class="btn btn-success btn-block">Save</button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>',$("body").append(n)),$("#form-edit-widget").html(t),$("#EditWidget").modal("show")},this.submitEditClick=function(t){$("#btn-submit-edit-widget").unbind().click(function(){t()})},this.closeModalEdit=function(){$("#EditWidget").modal("hide")},this.findTitleWidget=function(){return $("#"+i.widget.itemId).find(".title-widget")}},c=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n=function(){i.submitEditClick(a)},a=function(){var t=$("#edit-title").val();$(i.findTitleWidget()).html(t),i.widget.title_name=t,i.closeModalEdit()};return i.initCreate=function(){i.createModalEdit('<div class="row" id="div-title">\n                            <div class="col-6">\n                                <lable>Title</label>\n                            <input type="text" class="form-control" id="edit-title"/>\n                            </div>\n                        </div>',n),n(),$("#edit-title").val(t.title_name)},i}return d(e,s),e}(),u=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n=function(){i.submitEditClick(a)},a=function(){var t=$("#edit-title").val(),e=$("#edit-unit").val(),n=i.widget.itemId.replace("item-","unit_");$(i.findTitleWidget()).html(t),$("#"+n).html(e),i.widget.title_name=t,i.widget.unit=e,i.closeModalEdit()};return i.initCreate=function(){i.createModalEdit('<div id="edit-Gauges" class="edit-widget-form"> \n                            <div class="row">\n                                <div class="col-6">\n                                    <lable>Title</label>\n                                    <input type="text" class="form-control" id="edit-title"/>\n                                </div>\n                                <div class="col-6">\n                                    <lable>Unit</label>\n                                    <input type="text" class="form-control" id="edit-unit"/>\n                                </div>\n                            </div>\n                        </div>',n),n(),$("#edit-title").val(t.title_name),$("#edit-unit").val(t.unit)},i}return d(e,s),e}(),p=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n=function(){i.submitEditClick(a)},a=function(){var t=$("#edit-title").val();$(i.findTitleWidget()).html(t),i.widget.title_name=t,i.closeModalEdit()};return i.initCreate=function(){i.createModalEdit('<div class="row" id="div-title">\n                            <div class="col-6">\n                                <lable>Title</label>\n                            <input type="text" class="form-control" id="edit-title"/>\n                            </div>\n                        </div>',n),n(),$("#edit-title").val(t.title_name)},i}return d(e,s),e}(),f=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n=function(){i.submitEditClick(a)},a=function(){var t=$("#edit-title").val(),e=$("#edit-unit").val();$(i.findTitleWidget()).html(t),$("#"+i.widget.widgetId).next("span").html(e),i.widget.title_name=t,i.widget.unit=e,i.closeModalEdit()};return i.initCreate=function(){i.createModalEdit('<div class="row" id="div-title">\n                            <div class="col-6">\n                                <lable>Title</label>\n                                <input type="text" class="form-control" id="edit-title"/>\n                            </div>\n                            <div class="col-6">\n                                <lable>Unit</label>\n                                <input type="text" class="form-control" id="edit-unit"/>\n                            </div>\n                        </div>',n),n(),$("#edit-title").val(t.title_name),$("#edit-unit").val(t.unit)},i}return d(e,s),e}(),m=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n=function(){i.submitEditClick(a)},a=function(){var t=$("#edit-title").val(),e=$("#edit-unit").val(),n=i.widget.itemId.replace("item-","unit_");$(i.findTitleWidget()).html(t),$("#"+n).html(e),i.widget.title_name=t,i.widget.unit=e,i.closeModalEdit()};return i.initCreate=function(){i.createModalEdit('<div class="row" id="div-title">\n                            <div class="col-6">\n                                <lable>Title</label>\n                                <input type="text" class="form-control" id="edit-title"/>\n                            </div>\n                            <div class="col-6">\n                                <lable>Unit</label>\n                                <input type="text" class="form-control" id="edit-unit"/>\n                            </div>\n                        </div>',n),n(),$("#edit-title").val(t.title_name),$("#edit-unit").val(t.unit)},i}return d(e,s),e}(),g=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n=function(){i.submitEditClick(a)},a=function(){$("#"+t.widgetId).html($("#edit-text-custom").val()),$("#"+t.widgetId).css({"font-size":$("#edit-font-size").val()+"px"}),t.textbox=$("#edit-text-custom").val(),t.fontsize=$("#edit-font-size").val(),i.closeModalEdit()};return i.initCreate=function(){i.createModalEdit('<div id = "edit-text-box" class="value_widget">\n                            <div class="row">\n                                <div class="col-6">\n                                    <label>Text</label>\n                                    <input type="text" id="edit-text-custom" class="form-control" />\n                                </div>\n                                <div class="col-6">\n                                    <label>Font Size (px)</label>\n                                    <input type="number" id="edit-font-size" class="form-control" />\n                                </div>\n                            </div>\n                        </div> ',n),n(),$("#edit-text-custom").val(t.textbox),$("#edit-font-size").val(t.fontsize)},i}return d(e,s),e}(),v=function(){function t(e){var i=this;r(this,t),this.itemId=e.itemId,this.widgetId=e.widgetId,this.type=e.type,this.lastUpdateId=e.lastUpdateId,this.title_name=e.title_name,this.lastUpdate=e.lastUpdate,this.timeInterval=e.timeInterval,this.wi=e.wi,this.updateLastUpdate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t?(i.lastUpdate=new Date(t),$("#"+i.lastUpdateId).html(i.lastUpdate.toDateString()+" "+i.lastUpdate.toLocaleTimeString())):(i.lastUpdate=new Date,$("#"+i.lastUpdateId).html(i.lastUpdate.toDateString()+" "+i.lastUpdate.toLocaleTimeString()))};var n={cellHeight:80,verticalMargin:10,float:!1},a=[{x:0,y:0,width:6,height:7}],l=null,o=null,d=function(){$(".btn-delete-wi").unbind().click(function(){v($(this))}),$(".btn-edit-wi").unbind().click(function(){var t,e,i,n;t=$(this),e=$(t).attr("item"),i=T.getWidgetById(e),n=null,"MutiLine"===i.type?n=new c(i):"text-line"===i.type?n=new m(i):"Gauges"===i.type?n=new u(i):"Map"===i.type?n=new p(i):"TextValue"===i.type?n=new f(i):"TextBox"===i.type&&(n=new g(i)),n.initCreate()}),$(".btn-full-screen").unbind().click(function(){s($(this))})},s=function(t){var e=T.getWidgetById(t.attr("item"));$("#modal-full-screen").modal("show"),$("#content-widget").html(e.selectWiContentFull()),e.createFullWidget()},v=function(t){null===o&&(o='\n                <div class="modal fade" id="DeleteWidget">\n                    <div class="modal-dialog modal-dialog-centered">\n                        <div class="modal-content">\n                            <div class="modal-header">\n                                <h5 class="modal-title">Delete Widget</h5>\n                                <button type="button" class="close" data-dismiss="modal">&times;</button>\n                            </div>\n    \n                            <div class="modal-body">\n                                <h6>Are you sure to delete this widget?</h6>\n                            </div>\n    \n                            <div class="modal-footer">\n                                <button type="button" id="" class="btn btn-danger btn-block btn-submit-delete-widget">Delete</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>',$("body").append(o)),$("#DeleteWidget").modal("show"),$(".btn-submit-delete-widget").unbind().click(function(){h($(t)),$("#DeleteWidget").modal("hide")})},h=function(t){var e=$(t).attr("item");l.removeWidget($("#"+e).closest(".grid-stack-item"));var i=M.findIndex(function(t){return t.itemId==e});M.splice(i,1)};this.selectWiContent=function(){switch(i.type){case"MutiLine":return'<canvas id="'+i.widgetId+'"></canvas>';case"text-line":return' <h2 class="text-left"><span id="'+i.itemId.replace("item-","value_")+'">0</span> <span  id="'+i.itemId.replace("item-","unit_")+'">'+i.unit+'</span></h2>\n                             <canvas id="'+i.widgetId+'"></canvas>\n                            ';case"Gauges":return i.itemId.replace("item-","gauges-text-"),i.itemId.replace("item-","unit_"),'\n                            \n                            <div id="'+i.widgetId+'"></div>\n                            ';case"Map":return'\n                            <div id="'+i.widgetId+'"></div>\n                            ';case"TextValue":return'\n                            <h1 style="color:'+i.rgb+'"><span id="'+i.widgetId+'">0</span> <span>'+i.unit+"</span><h1>\n                            ";case"TextBox":return'<span id="'+i.widgetId+'"></span>'}},this.selectWiContentFull=function(){switch(i.type){case"MutiLine":return'<canvas id="'+i.fullScreenId+'"></canvas>';case"text-line":return' <h2 class="text-left"><span id="'+i.itemId.replace("item-","value_full")+'">0</span> '+i.unit+'</h2>\n                             <canvas id="'+i.fullScreenId+'"></canvas>\n                            ';case"Gauges":return'\n                            <h2><span id="'+i.itemId.replace("item-","gauges-text-full")+'">0</span> <span>'+i.unit+'</span></h2>\n                            <canvas id="'+i.fullScreenId+'"></canvas>\n                            ';case"Map":return'\n                            <div id="'+i.fullScreenId+'"></div>\n                            '}},this.createWidget=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=a.pop()||{x:3,y:4,width:6,height:7};$(".grid-stack").gridstack(n),l=$(".grid-stack").data("gridstack");var o="";"TextBox"!==i.type?(o=$("#layout-widget").html(),"TextValue"===i.type&&(e.width=4,e.height=4,o=$("#layout-widget-text-value").html()),o=(o=(o=(o=o.replace(/div_id/g,i.itemId)).replace("((wi))",i.selectWiContent())).replace("((title_name))",i.title_name)).replace("{last_update}",i.lastUpdateId)):(e.width=6,e.height=1,o=(o=(o=$("#layout-widget-text").html()).replace(/div_id/g,i.itemId)).replace("((wi))",i.selectWiContent())),e.id=i.itemId;var r,s;(t?l.addWidget($(o),t.x,t.y,t.width,t.height,!0,null,null,null,null,e.id):l.addWidget($(o),e.x,e.y,e.width,e.height,!0,null,null,null,null,e.id)).data("_gridstack_data",JSON.stringify((s={type:(r=i).type,timeInterval:r.timeInterval},"MutiLine"===r.type?(s.title_name=r.title_name,s.datasets=r.datasets):"text-line"===r.type?(s.title_name=r.title_name,s.unit=r.unit,s.rgb=r.rgb):"Gauges"===r.type?(s.title_name=r.title_name,s.opts=r.opts,s.limitMin=r.limitMin,s.limitMax=r.limitMax,s.unit=r.unit):"Map"===r.type?s.title_name=r.title_name:"TextValue"===r.type?(s.title_name=r.title_name,s.unit=r.unit,s.rgb=r.rgb):"TextBox"===r.type&&(s.textbox=r.textbox,s.fontsize=r.fontsize),s))),d()}}return l(t,null,[{key:"formateDataSave",value:function(t){var e={type:t.type,timeInterval:t.timeInterval};return"MutiLine"===t.type?(e.title_name=t.title_name,e.datasets=t.datasets):"text-line"===t.type?(e.title_name=t.title_name,e.unit=t.unit,e.rgb=t.rgb):"Gauges"===t.type?(e.title_name=t.title_name,e.opts=t.opts,e.limitMin=t.limitMin,e.limitMax=t.limitMax,e.unit=t.unit):"Map"===t.type?e.title_name=t.title_name:"TextValue"===t.type?(e.title_name=t.title_name,e.unit=t.unit,e.rgb=t.rgb):"TextBox"===t.type&&(e.textbox=t.textbox,e.fontsize=t.fontsize),e}}]),t}(),h=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));i.fullScreenId=t.fullScreenId,i.chart=null,i.datasets=t.datasets;var a={maintainAspectRatio:!1,scales:{yAxes:[{gridLines:{display:!1},ticks:{beginAtZero:!0,fontFamily:"'Poppins', 'Kanit', 'sans-serif'",fontStyle:"bold"}}],xAxes:[{gridLines:{display:!1},ticks:{fontFamily:"'Poppins', 'Kanit', 'sans-serif'",fontStyle:"bold"}}]},legend:{labels:{fontFamily:"'Poppins', 'Kanit', 'sans-serif'",fontColor:"black"}}};return i.createMutiLine=function(){var t=document.getElementById(i.widgetId),e=new Chart(t,{type:"line",data:{datasets:Object(n.c)(i.datasets)},options:a});i.chart=e},i.createFullWidget=function(){var t=document.getElementById(i.fullScreenId);new Chart(t,{type:"line",data:{datasets:Object(n.c)(i.datasets)},options:a})},i.updateData=function(){var t=i.chart,e=Math.random(),n=new Date;t.data.labels.push(n.toLocaleTimeString()),t.data.datasets.forEach(function(t){t.data.length>10&&t.data.splice(0,1);var i=Math.random();t.data.push(e+i)}),t.data.labels.length>10&&t.data.labels.splice(0,1),t.update(),i.updateLastUpdate()},i}return d(e,v),e}(),b=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));i.fullScreenId=t.fullScreenId,i.unit=t.unit,i.rgb=t.rgb;var n={maintainAspectRatio:!1,responsive:!0,scales:{yAxes:[{display:!1}],xAxes:[{display:!1}]},legend:{display:!1},elements:{point:{radius:0},line:{tension:0}},layout:{padding:{left:0,right:0,top:0,bottom:30}},stepsize:100};return i.createTextLine=function(){var t=document.getElementById(i.widgetId),e=new Chart(t,{type:"line",data:{labels:[],datasets:[{label:"",data:[],backgroundColor:["rgba(255, 255, 255, 0)"],borderColor:[i.rgb],borderWidth:2}]},options:n});return i.chart=e,i.updateData(),e},i.createFullWidget=function(){var t=document.getElementById(i.fullScreenId);new Chart(t,{type:"line",data:{labels:[],datasets:[{label:"",data:[],backgroundColor:["rgba(255, 255, 255, 0)"],borderColor:[i.rgb],borderWidth:2}]},options:n})},i.updateData=function(){var t=i.widgetId;t=t.replace("myChart_","value_");var e=i.chart,n=Math.floor(100+900*Math.random()),a=new Date;e.data.labels.push(a.toLocaleTimeString()),e.data.datasets.forEach(function(e){e.data.length>10&&e.data.splice(0,1),e.data.push(n),$("#"+t).html(n)}),e.data.labels.length>10&&e.data.labels.splice(0,1),e.update(),i.updateLastUpdate()},i.liveData=function(){var t=i.widgetId;t=t.replace("myChart_","value_");var e=i.chart,n=new Date;e.data.labels.push(n.toLocaleTimeString()),e.data.datasets.forEach(function(t){t.data.length>10&&t.data.splice(0,1);var e=t.data[t.data.length-1];t.data.push(e)}),e.data.labels.length>10&&e.data.labels.splice(0,1),e.update()},i}return d(e,h),e}(),y=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.fullScreenId=t.fullScreenId,i.textId=t.textId,i.gaugeWidget=null,i.opts=t.opts,i.limitMax=t.limitMax,i.limitMin=t.limitMin,i.unit=t.unit,i.createGages=function(){i.gaugeWidget=new JustGage({id:i.widgetId,value:getRandomInt(0,100),min:0,max:100,symbol:" "+i.unit,relativeGaugeSize:!0,titlePosition:"below"}),$("#"+i.widgetId).height($("#"+i.widgetId).height()-5),$("#"+i.widgetId).addClass("container"),i.updateData()},i.updateData=function(){i.gaugeWidget.refresh(getRandomInt(0,100)),i.updateLastUpdate()},i}return d(e,v),e}(),w=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.fullScreenId=t.fullScreenId,i.myMap=null,i.createMap=function(){var t=void 0,e=i.widgetId,n=$("#"+i.itemId).height()-100;$("#"+e).css("height",n),$("#"+e).css("width","auto"),t=L.map(e,{dragging:!0,zoomControl:!0,scrollWheelZoom:!1,zoomAnimation:!1}),$.getJSON("https://raw.githubusercontent.com/apisit/thailand.json/master/thailand.json").then(function(e){var i=new L.TileLayer.BoundaryCanvas("https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{boundary:e,minZoom:5,maxZoom:9,attribution:"&copy; Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ"});t.addLayer(i);var n=L.geoJSON(e);t.fitBounds(n.getBounds())}).then(function(){setTimeout(function(){t.invalidateSize(!0),$.ajax({dataType:"json",url:"/js/company/test-api.json",async:!1,success:function(e){var i=[],n=e.WeatherForecasts;for(var a in n)L.marker([n[a].location.lat,n[a].location.lon]).addTo(t).bindPopup(n[a].location.province+" อ ุณหภูมิที่ระดับพื้นผิว : "+n[a].forecasts[1].data.tc+" °C"),i.push([n[a].location.lat,n[a].location.lon,n[a].forecasts[1].data.tc/100]);L.heatLayer(i,{radius:75}).addTo(t)}})},1e3)}),$(".grid-stack").on("change",function(e,i){null!=t&&t.invalidateSize(!0)}),i.myMap=t,console.log(i.myMap)},i.createFullWidget=function(){var t=void 0,e=i.fullScreenId;$("#"+e).css("height","450px"),$("#"+e).css("width","auto"),t=L.map(e,{dragging:!0,zoomControl:!0,scrollWheelZoom:!1,zoomAnimation:!1}),$.getJSON("https://raw.githubusercontent.com/apisit/thailand.json/master/thailand.json").then(function(e){var i=new L.TileLayer.BoundaryCanvas("https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{boundary:e,minZoom:5,maxZoom:9,attribution:"&copy; Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ"});t.addLayer(i);var n=L.geoJSON(e);t.fitBounds(n.getBounds())}).then(function(){setTimeout(function(){t.invalidateSize(!0),$.ajax({dataType:"json",url:"/js/company/test-api.json",async:!1,success:function(e){var i=[],n=e.WeatherForecasts;for(var a in n)L.marker([n[a].location.lat,n[a].location.lon]).addTo(t).bindPopup(n[a].location.province+" อ ุณหภูมิที่ระดับพื้นผิว : "+n[a].forecasts[1].data.tc+" °C"),i.push([n[a].location.lat,n[a].location.lon,n[a].forecasts[1].data.tc/100]);L.heatLayer(i,{radius:75}).addTo(t)}})},1e3)})},i}return d(e,v),e}(),x=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.textValue=t.textValue,i.unit=t.unit,i.rgb=t.rgb,i.createTextValue=function(){i.updateData()},i.updateData=function(){var t=Math.floor(99*Math.random());$("#"+i.widgetId).html(t),i.updateLastUpdate()},i}return d(e,v),e}(),I=function(t){function e(t){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.textbox=t.textbox,i.fontsize=t.fontsize,i.createTextBox=function(){console.log($("#"+i.widgetId)),$("#"+i.widgetId).html(i.textbox),$("#"+i.widgetId).css({"font-size":i.fontsize+"px"})},i}return d(e,v),e}(),M=[],T=function(){function t(){r(this,t);var e={cellHeight:80,verticalMargin:10,float:!1},i=null,n=null,a=function(){return $("#widget_type").val()},l=function(){return $("#title-name").val()},o=function(){return $("#time-interval").val()},d=function(){return(new Date).toUTCString()},s=function(){var t=a(),e=Math.floor(1e5+9e5*Math.random()),i=null,n=null;"MutiLine"===t?(n=function(t){for(var e=$("#Mutiline_value").find(".label-y-chart-line").length,i=[],n=0;n<e;n++){var r,s=$("#Mutiline_value").find(".label-y-chart-line"),c=$("#Mutiline_value").find(".rgb-chart-line");r={label:$(s[n]).val(),backgroundColor:"rgba(255,255,255,0.0)",borderColor:$(c[n]).val(),borderWidth:2},i.push(r)}return{itemId:"item-"+t,widgetId:"myChart_"+t,lastUpdateId:"myChartLastUpdate_"+t,fullScreenId:"myChartFull_"+t,type:a(),title_name:l(),lastUpdate:d(),timeInterval:o(),datasets:[].concat(i)}}(e),(i=new h(Object.assign({},n))).createWidget(),i.createMutiLine()):"text-line"===t?(n=function(t){var e=$("#text-line").find("#unit").val(),i=$("#value-text-line").find("#rgb").val();return{itemId:"item-"+t,widgetId:"myChart_"+t,lastUpdateId:"myChartLastUpdate_"+t,fullScreenId:"myChartFull_"+t,type:a(),title_name:l(),lastUpdate:d(),timeInterval:o(),rgb:i,unit:e}}(e),(i=new b(n)).createWidget(),i.createTextLine()):"Gauges"===t?(n=function(t){var e=$("#Gauges").find("#g_limitMin").val(),i=$("#Gauges").find("#g_limitMax").val(),n=$("#Gauges").find("#unit").val();return{textId:"gauges-text-"+t,itemId:"item-"+t,widgetId:"gauges-"+t,lastUpdateId:"gaugesLastUpdate-"+t,fullScreenId:"gaugesFull-"+t,type:a(),title_name:l(),lastUpdate:d(),timeInterval:o(),limitMax:i,limitMin:e,unit:n,opts:{angle:0,lineWidth:.23,radiusScale:1,pointer:{length:.6,strokeWidth:.035,color:"#000000"},limitMax:!1,limitMin:!1,colorStart:"#6FADCF",colorStop:"#8FC0DA",strokeColor:"#E0E0E0",generateGradient:!0,highDpiSupport:!0,staticLabels:{font:"10px Poppins",labels:[0,Number(i)],color:"#000000",fractionDigits:0}}}}(e),(i=new y(n)).createWidget(),i.createGages()):"Map"===t?(n=function(t){return{itemId:"item-"+t,widgetId:"map-"+t,lastUpdateId:"mapLastUpdate-"+t,fullScreenId:"mapFull-"+t,type:a(),title_name:l(),lastUpdate:d(),timeInterval:o()}}(e),(i=new w(n)).createWidget(),i.createMap()):"TextValue"==t?(n=function(t){var e=$("#TextValue").find("#unit").val(),i=$("#TextValue").find("#rgb").val();return{itemId:"item-"+t,widgetId:"text-value"+t,lastUpdateId:"textValueLastUpdate-"+t,fullScreenId:"textValueFull-"+t,type:a(),title_name:l(),lastUpdate:d(),timeInterval:o(),unit:e,rgb:i}}(e),(i=new x(n)).createWidget(),i.createTextValue()):"TextBox"===t&&(n=function(t){var e=$("#text-box").find("#text-custom").val(),i=$("#text-box").find("#font-size").val();return{itemId:"item-"+t,widgetId:"text-"+t,type:a(),title_name:null,lastUpdate:null,timeInterval:null,textbox:e,fontsize:i}}(e),(i=new I(n)).createWidget(),i.createTextBox()),M.push(i)},c=function(){$("#settingW").click(function(){clearInterval(n),$(this).hide(),$(".full-screen").hide(),$(".edit-widget").show(),$("#addW").show(),$("#saveW").show(),$("#cancelW").show(),i.enableMove(!0),i.enableResize(!0)}),$("#widget_type").change(function(){var t;$(".value_widget").hide(),t=a(),$(".value_widget").hide(),$("#default-value").show(),"MutiLine"===t?$("#MutiLine").show():"text-line"===t?$("#text-line").show():"Gauges"===t?$("#Gauges").show():"TextValue"===t?$("#TextValue").show():"TextBox"===t?($("#text-box").show(),$("#default-value").hide()):$("#form-input-widget").html("")}),$("#addW").unbind().click(function(){$("input[type=text]").val(""),$("#myModal").modal("show")}),$("#add-new-widget").unbind().click(function(){s()}),$("#saveW").unbind().click(function(){var e;$("#saveW").hide(),$("#addW").hide(),$("#cancelW").hide(),$("#settingW").show(),$(".full-screen").show(),$(".edit-widget").hide(),u(),e=_.map($(".grid-stack > .grid-stack-item:visible"),function(e){var i=(e=$(e)).data("_gridstack_node"),n=t.getWidgetById(i.id);return{x:i.x,y:i.y,width:i.width,height:i.height,widget:v.formateDataSave(n)}}),$.ajax({url:"http://localhost:8000/api/company/static",method:"PUT",data:{static_id:$("#static_id").html(),dashboard:JSON.stringify(e,null,"")},success:function(t){console.log(t)},error:function(t){console.log(t)}}),i.enableMove(!1),i.enableResize(!1)}),$("#cancelW").unbind().click(function(){$("#saveW").hide(),$("#addW").hide(),$(".edit-widget").hide(),$(".full-screen").show(),$("#cancelW").hide(),$("#settingW").show(),u(),i.enableMove(!1),i.enableResize(!1)}),$("#btn-add-value-Mutiline").unbind().click(function(){var t;t=$("#line_value_layout").html(),$("#Mutiline_value").append(t)}),$("#btn-add-datasource").unbind().click(function(){$("#addDatasource").modal("show")}),$("#btn-detail-toggle ").unbind().click(function(){$("#top-header").slideToggle("fast"),$(this).toggleClass("flip")})},u=function(){n=setInterval(function(){M.length>0&&p([].concat(M))},1e3)},p=function(e){for(var i=0;i<e.length;i++){var n=e[i];n.updateData&&(t.diffTime(n.lastUpdate,n.timeInterval)>=n.timeInterval?n.updateData():n.liveData&&n.liveData())}};this.initDashboard=function(){c();$.ajax({url:"http://localhost:8000/api/company/static/"+$("#static_id").html(),method:"GET",success:function(t){t.data&&(function(t){var e=null,i=null,n=null,a="";for(var l in t){var o=Math.floor(1e5+9e5*Math.random());e=null,i=t[l].widget,n=t[l],a=i.type,i.itemId="item-"+o,i.lastUpdate=d(),"MutiLine"===a?(i.widgetId="myChart_"+o,i.fullScreenId="myChartFull_"+o,i.lastUpdateId="myChartLastUpdate_"+o,(e=new h(i)).createWidget(n),e.createMutiLine()):"Gauges"===a?(i.textId="gauges-text-"+o,i.widgetId="gauges-"+o,i.lastUpdateId="gaugesLastUpdate-"+o,i.fullScreenId="gaugesFull-"+o,(e=new y(i)).createWidget(n),e.createGages()):"text-line"===a?(i.widgetId="myChart_"+o,i.lastUpdateId="myChartLastUpdate_"+o,i.fullScreenId="myChartFull_"+o,(e=new b(i)).createWidget(n),e.createTextLine()):"Map"===a?(i.widgetId="map-"+o,i.lastUpdateId="mapLastUpdate_"+o,i.fullScreenId="mapFull-"+o,(e=new w(i)).createWidget(n),e.createMap()):"TextValue"===a?(i.widgetId="text-value"+o,i.lastUpdateId="textValueLastUpdate"+o,i.fullScreenId="textValueFull-"+o,(e=new x(i)).createWidget(n),e.createTextValue()):"TextBox"===a&&(i.widgetId="text-"+o,(e=new I(i)).createWidget(n),e.createTextBox()),M.push(e)}$(".edit-widget").hide()}(GridStackUI.Utils.sort(JSON.parse(t.data[0].dashboard))),$("#loading").remove(),u(),$.ajax({url:"http://localhost:8000/api/company/webservices",success:function(t){t.data.map(function(t){$("#channel-data").append('<option value="'+t.webservice_id+'">'+t.service_name+"</option>")})},error:function(t){console.log(t)}}),$(".grid-stack").gridstack(e),(i=$(".grid-stack").data("gridstack")).enableMove(!1),i.enableResize(!1))},error:function(t){console.log(t)}})}}return l(t,null,[{key:"diffTime",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var e=new Date,i=new Date(t),n=(e.getTime()-i.getTime())/1e3;return Math.abs(Math.round(n))}},{key:"updateGridData",value:function(t){}},{key:"getWidgetById",value:function(t){return M.find(function(e){return e.itemId==t})}}]),t}();$(document).ready(function(){$("#sidebarCollapse").click(),(new T).initDashboard(),$(".grid-stack").on("gsresizestop",function(t,e){var i=$(e),n=JSON.parse(i.data("_gridstack_data")),a=i.data("_gridstack_node"),l=n.type;if("Gauges"===l);else if("MutiLine"===l){t.target,i.find(".card-body").width(),i.find(".card-body").height();var o=i.find(".card-body");$(o).find("canvas")}else if("Map"===l){T.getWidgetById(a.id).myMap.invalidateSize()}})})},DuR2:function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},t4zo:function(t,e,i){(function(i){var n,a,l;a=[],void 0===(l="function"==typeof(n=function(){"use strict";function e(t,e,i){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){o(n.response,e,i)},n.onerror=function(){console.error("could not download file")},n.send()}function n(t){var e=new XMLHttpRequest;return e.open("HEAD",t,!1),e.send(),200<=e.status&&299>=e.status}function a(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(i){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var l="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof i&&i.global===i?i:void 0,o=l.saveAs||"object"!=typeof window||window!==l?function(){}:"download"in HTMLAnchorElement.prototype?function(t,i,o){var d=l.URL||l.webkitURL,r=document.createElement("a");i=i||t.name||"download",r.download=i,r.rel="noopener","string"==typeof t?(r.href=t,r.origin===location.origin?a(r):n(r.href)?e(t,i,o):a(r,r.target="_blank")):(r.href=d.createObjectURL(t),setTimeout(function(){d.revokeObjectURL(r.href)},4e4),setTimeout(function(){a(r)},0))}:"msSaveOrOpenBlob"in navigator?function(t,i,l){if(i=i||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Depricated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,l),i);else if(n(t))e(t,i,l);else{var o=document.createElement("a");o.href=t,o.target="_blank",setTimeout(function(){a(o)})}}:function(t,i,n,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof t)return e(t,i,n);var o="application/octet-stream"===t.type,d=/constructor/i.test(l.HTMLElement)||l.safari,r=/CriOS\/[\d]+/.test(navigator.userAgent);if((r||o&&d)&&"object"==typeof FileReader){var s=new FileReader;s.onloadend=function(){var t=s.result;t=r?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=t:location=t,a=null},s.readAsDataURL(t)}else{var c=l.URL||l.webkitURL,u=c.createObjectURL(t);a?a.location=u:location.href=u,a=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}};l.saveAs=o.saveAs=o,void 0!==t&&(t.exports=o)})?n.apply(e,a):n)||(t.exports=l)}).call(e,i("DuR2"))}});