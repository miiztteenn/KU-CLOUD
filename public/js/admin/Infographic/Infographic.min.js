!function(t){var e={};function a(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="http://localhost:8080/",a(a.s=19)}({"0v0P":function(t,e,a){"use strict";a.d(e,"f",function(){return s}),a.d(e,"e",function(){return i}),a.d(e,"j",function(){return o}),a.d(e,"a",function(){return l}),e.b=function(t){var e=$(t.parent).find("input, textarea, select");e.each(function(){$(this).change(function(){var a=$(this),n={},s="";e.each(function(){s=$(this).attr("name");var t=$(this).val();n[s]=""==t?null:t});var i=validate(n,t.validate)||{};console.log(a,i),d(a,i[a.attr("name")])})})},e.d=function(t){var e=!0,a={};$(t.parent).find("input, textarea, select").each(function(){var t=$(this).attr("name"),e=$(this).val();a[t]=""==e?null:e});var n=validate(a,t.validate)||{};validate.isEmpty(n)?e=!1:(!function(t,e){var a=$(t.parent).find("input, textarea, select");console.log(e);var n=Object.keys(e);a.each(function(){var t=$(this),a=t.attr("name");n.map(function(n){n===a&&d(t,e[a])})})}(t,n),e=!0);return console.log("isError = "+e),e},e.k=function(){$("input, textarea, select").removeClass("has-success"),$("input, textarea, select").removeClass("has-error"),$(".messages-error").html("")},e.h=function(t){var e={};return function t(a,s){Array.isArray(a)?a.forEach(function(e,a){t(e,s.concat(a))}):null===a||"object"!==(void 0===a?"undefined":n(a))?e[s.join("/")]=a:Object.keys(a).forEach(function(e){t(a[e],s.concat(e))})}(t,[]),e},e.i=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},e.g=function(t,e){var a=(t.getTime()-e.getTime())/1e3;return a/=3600,Math.abs(Math.round(a))},e.c=function(t){if(t.getResponseHeader("authorization")){var e=t.getResponseHeader("authorization").split(" ")[1];setCookie("token",e)}};var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(t){return t.map(function(t){return Object.assign({},t)})},i=function(t,e){return t=t.replace("#",""),"rgba("+parseInt(t.substring(0,2),16)+","+parseInt(t.substring(2,4),16)+","+parseInt(t.substring(4,6),16)+","+e/100+")"},o=function(){return"#"+(16777215*Math.random()<<0).toString(16)},r=null,l={set:function(t){r=t.html();var e=t.attr("data-loading-text");t.html(e),t.prop("disabled",!0)},reset:function(t){t.html(r),t.prop("disabled",!1)}};function d(t,e){validate.isEmpty(e)?(t.removeClass("has-error"),t.addClass("has-success"),t.parent().find(".messages-error").html("")):(t.removeClass("has-success"),t.addClass("has-error"),t.parent().find(".messages-error").html(e[0]))}},19:function(t,e,a){t.exports=a("k1SS")},"5P9E":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}();var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,[{key:"WidgetGraphObject",value:function(t,e,a,n,s){this.id=t,this.canvasTag=e,this.chartData=a,this.chartOption=n,this.type=s}},{key:"MapWidgetObject",value:function(t,e,a){this.id=t,this.mapTag=e,this.type=a}},{key:"HeadFontObject",value:function(t,e,a){this.id=t,this.spanTag=e,this.type=a}},{key:"WidgetTableObject",value:function(t,e,a){this.id=t,this.tableTag=e,this.type=a}},{key:"WidgetImageObject",value:function(t,e,a){this.id=t,this.divImgTag=e,this.type=a}},{key:"WidgetShapeObject",value:function(t,e,a){this.id=t,this.divTag=e,this.type=a}}]),t}();e.default=s},RASp:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}();var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,[{key:"DataSourceModel",value:function(t){$("#addDatasource").remove();$("body").append('\n        <div class="modal fade" id="addDatasource">\n            <div class="modal-dialog modal-lg">\n                <div class="modal-content">\n\n                    <div class="modal-header">\n                        <h4 class="modal-title">Add Datasource</h4>\n                        <button type="button" class="close" data-dismiss="modal">&times;</button>\n                    </div>\n\n                    <div class="modal-body">\n                        <div class="row">\n                            <div class="col-12">\n                                <label for="">Name</label>\n                                <input type="text" id="name_datasource" class="form-control">\n                            </div>\n                        </div>\n                        <div class="row">\n                            <div class="col-6">\n                                <label for="">Channel</label>\n                                <select name="" id="webservice_id" class="form-control">\n                                    <option value="">--Select Channel--</option>\n                                </select>\n                            </div>\n                            <div class="col-6">\n                                <label for="">Set time interval (s)</label>\n                                <input type="number" id="add-data-time-interval" class="form-control">\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="modal-footer">\n                        <a class="btn btn-success btn-block" id="btn-add-new-datasource" href="#">Save</a>\n                    </div>\n                </div>\n            </div>\n        </div>'),$("#addDatasource").modal("show"),$.ajax({url:"http://localhost:8000/api/company/webservices",success:function(t){t.data.map(function(t){$("#webservice_id").append('<option value="'+t.webservice_id+'">'+t.service_name+"</option>")})},error:function(t){console.log(t)}}),$("#btn-add-new-datasource").unbind().click(function(){$.ajax({url:"http://localhost:8000/api/admin/infographic/createDatasource",method:"POST",data:{info_id:t,name:$("#name_datasource").val(),webservice_id:$("#webservice_id").val(),timeInterval:$("#add-data-time-interval").val()},success:function(t){$("#addDatasource").modal("hide")},error:function(t){console.log(t)}})})}}]),t}();e.default=s},SeUI:function(t,e,a){var n,s,i;!function(a,o){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=o():(s=[],void 0===(i="function"==typeof(n=o)?n.apply(e,s):n)||(t.exports=i))}(0,function(){"use strict";var t=Object.prototype.toString;function e(t,e){return null!=t&&Object.prototype.hasOwnProperty.call(t,e)}function a(t){if(!t)return!0;if(s(t)&&0===t.length)return!0;if("string"!=typeof t){for(var a in t)if(e(t,a))return!1;return!0}return!1}function n(e){return t.call(e)}var s=Array.isArray||function(e){return"[object Array]"===t.call(e)};function i(t){var e=parseInt(t);return e.toString()===t?e:t}function o(t){t=t||{};var o=function(t){return Object.keys(o).reduce(function(e,a){return"create"===a?e:("function"==typeof o[a]&&(e[a]=o[a].bind(o,t)),e)},{})};function r(a,n){return t.includeInheritedProps||"number"==typeof n&&Array.isArray(a)||e(a,n)}function l(t,e){if(r(t,e))return t[e]}function d(t,e,a,n){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if("string"==typeof e)return d(t,e.split(".").map(i),a,n);var s=e[0],o=l(t,s);return 1===e.length?(void 0!==o&&n||(t[s]=a),o):(void 0===o&&("number"==typeof e[1]?t[s]=[]:t[s]={}),d(t[s],e.slice(1),a,n))}return o.has=function(a,n){if("number"==typeof n?n=[n]:"string"==typeof n&&(n=n.split(".")),!n||0===n.length)return!!a;for(var o=0;o<n.length;o++){var r=i(n[o]);if(!("number"==typeof r&&s(a)&&r<a.length||(t.includeInheritedProps?r in Object(a):e(a,r))))return!1;a=a[r]}return!0},o.ensureExists=function(t,e,a){return d(t,e,a,!0)},o.set=function(t,e,a,n){return d(t,e,a,n)},o.insert=function(t,e,a,n){var i=o.get(t,e);n=~~n,s(i)||(i=[],o.set(t,e,i)),i.splice(n,0,a)},o.empty=function(t,e){var i,l;if(!a(e)&&(null!=t&&(i=o.get(t,e)))){if("string"==typeof i)return o.set(t,e,"");if(function(t){return"boolean"==typeof t||"[object Boolean]"===n(t)}(i))return o.set(t,e,!1);if("number"==typeof i)return o.set(t,e,0);if(s(i))i.length=0;else{if(!function(t){return"object"==typeof t&&"[object Object]"===n(t)}(i))return o.set(t,e,null);for(l in i)r(i,l)&&delete i[l]}}},o.push=function(t,e){var a=o.get(t,e);s(a)||(a=[],o.set(t,e,a)),a.push.apply(a,Array.prototype.slice.call(arguments,2))},o.coalesce=function(t,e,a){for(var n,s=0,i=e.length;s<i;s++)if(void 0!==(n=o.get(t,e[s])))return n;return a},o.get=function(t,e,a){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if(null==t)return a;if("string"==typeof e)return o.get(t,e.split("."),a);var n=i(e[0]),s=l(t,n);return void 0===s?a:1===e.length?s:o.get(t[n],e.slice(1),a)},o.del=function(t,e){if("number"==typeof e&&(e=[e]),null==t)return t;if(a(e))return t;if("string"==typeof e)return o.del(t,e.split("."));var n=i(e[0]);return r(t,n)?1!==e.length?o.del(t[n],e.slice(1)):(s(t)?t.splice(n,1):delete t[n],t):t},o}var r=o();return r.create=o,r.withInheritedProps=o({includeInheritedProps:!0}),r})},k1SS:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("5P9E"),s=a("RASp"),i=a("SeUI"),o=a.n(i),r=a("0v0P"),l=a("0v0P");function d(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=$("#pathImg").val(),v=$("#infoID").val(),_=$("#infoName").val(),b=window.CircularJSON,f=[],h=[],g={dataTimeSeries:[{RelativeHumidity:"90",VaporPressure:"85",LandVisibility:"45",WindDirection:"24",WindSpeed:"55",Rainfall:"8",Date:"12/02/2016"},{RelativeHumidity:"100",VaporPressure:"80",LandVisibility:"70",WindDirection:"10",WindSpeed:"10",Rainfall:"50",Date:"13/04/2017"},{RelativeHumidity:"50",VaporPressure:"40",LandVisibility:"30",WindDirection:"20",WindSpeed:"10",Rainfall:"5",Date:"14/06/2018"}]},m=function t(){p(this,t),this.createWidget=function(t,a){return interact("#"+a+t).draggable({autoScroll:!0,inertia:!0,restrict:{restriction:"parent",endOnly:!0,elementRect:{top:0,left:0,bottom:1,right:1}}}).resizable({edges:{left:!0,right:!0,bottom:!0,top:!0},restrictEdges:{outer:"parent",endOnly:!0},restrictSize:{min:{width:100,height:50}},inertia:!0}).on("doubletap",function(){$(".sPosition").removeClass("fCorner"),$(".propertyMenu-2").html("")}).on("resizemove",function(n){e(t,a);var s=n.target,i=parseFloat(s.getAttribute("data-x"))||0,o=parseFloat(s.getAttribute("data-y"))||0,r=parseFloat(s.getAttribute("data-z"))||0;s.style.width=n.rect.width+"px",s.style.height=n.rect.height+"px",i+=n.deltaRect.left,o+=n.deltaRect.top,s.style.webkitTransform=s.style.transform="translate("+i+"px,"+o+"px) rotate("+r+"deg)",s.setAttribute("data-x",i),s.setAttribute("data-y",o),s.setAttribute("data-z",r),$("#width_"+t).val(Math.round(n.rect.width)),$("#height_"+t).val(Math.round(n.rect.height)),$("#width_"+t).change(),$("#height_"+t).change()})};var e=function(t,e){$(".sPosition").removeClass("fCorner"),$("#"+e+t).addClass("fCorner")};this.clearfocus=function(){$(".sPosition").removeClass("fCorner")}},y=function(t){function e(){p(this,e);var t=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));t.createLineGraph=function(){var e=Math.floor(1e5+9e5*Math.random());t.clearfocus(),$("#workspace").append('<div id="div_canvas_'+e+'" class="sPosition fCorner"><canvas id="canvas_'+e+'" state-mode="classic"/></div>');var a=$("#canvas_"+e),s=new Chart(a,{type:"line",data:{labels:["Su","Mo","Tu","We","Th","Fr","Sa"],datasets:[{label:"Demo Data 1",data:[0,59,75,20,20,55,40],backgroundColor:"rgba(255, 255, 255, 0)",borderColor:"#05acd3"},{label:"Demo Data 2",data:[0,29,25,20,20,25,20],backgroundColor:"rgba(255, 255, 255, 0)",borderColor:"#00ce68"}]},options:{responsive:!0,maintainAspectRatio:!1,legend:{display:!0,position:"top",labels:{boxWidth:80,fontColor:"black"}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Y Label"}}],xAxes:[{scaleLabel:{display:!0,labelString:"X Label"}}]}}});a.data("graph",s),$(".propertyMenu-2").html(""),(new M).createGraphProp(e,s,"#div_canvas_"+e,"line"),t.createWidget(e,"div_canvas_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#div_canvas_"+e).addClass("fCorner"),$(".propertyMenu-2").html(""),(new M).createGraphProp(e,s,"#div_canvas_"+e,"line")}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#div_canvas_"+e).addClass("fCorner");var a=t.target,n=(parseFloat(a.getAttribute("data-x"))||0)+t.dx,i=(parseFloat(a.getAttribute("data-y"))||0)+t.dy,o=parseFloat(a.getAttribute("data-z"))||0;a.style.webkitTransform=a.style.transform="translate("+n+"px, "+i+"px) rotate("+o+"deg)",a.setAttribute("data-x",n),a.setAttribute("data-y",i),a.setAttribute("data-z",o),$(".propertyMenu-2").html(""),(new M).createGraphProp(e,s,"#div_canvas_"+e,"line")});var i=new n.default;console.log(s.options),i.WidgetGraphObject(e,null,null,null,"line"),console.log(i.chartOption),h.push(i),h=S(h),console.log(h[0].chartOption)},t.createBarGraph=function(){var e=Math.floor(1e5+9e5*Math.random());t.clearfocus(),$("#workspace").append('<div id="div_canvas_'+e+'" class="sPosition fCorner"><canvas id="canvas_'+e+'" state-mode="classic"/></div>');var a=$("#canvas_"+e),s=new Chart(a,{type:"bar",data:{labels:["Su","Mo","Tu","We","Th","Fr","Sa"],datasets:[{label:"Demo Data 1",data:[0,59,75,20,20,55,40],backgroundColor:"#05acd3"},{label:"Demo Data 2",data:[0,29,25,20,20,25,20],backgroundColor:"#00ce68"}]},options:{responsive:!0,maintainAspectRatio:!1,legend:{display:!0,position:"top",labels:{boxWidth:80,fontColor:"black"}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Y Label"}}],xAxes:[{scaleLabel:{display:!0,labelString:"X Label"}}]}}});a.data("graph",s),$(".propertyMenu-2").html(""),(new M).createGraphProp(e,s,"#div_canvas_"+e,"bar"),t.createWidget(e,"div_canvas_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#div_canvas_"+e).addClass("fCorner"),$(".propertyMenu-2").html(""),(new M).createGraphProp(e,s,"#div_canvas_"+e,"bar")}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#div_canvas_"+e).addClass("fCorner");var a=t.target,n=(parseFloat(a.getAttribute("data-x"))||0)+t.dx,i=(parseFloat(a.getAttribute("data-y"))||0)+t.dy,o=parseFloat(a.getAttribute("data-z"))||0;a.style.webkitTransform=a.style.transform="translate("+n+"px, "+i+"px) rotate("+o+"deg)",a.setAttribute("data-x",n),a.setAttribute("data-y",i),a.setAttribute("data-z",o),$(".propertyMenu-2").html(""),(new M).createGraphProp(e,s,"#div_canvas_"+e,"bar")});var i=new n.default;console.log(s.options),i.WidgetGraphObject(e,null,s.data,s.options,"bar"),console.log(i.chartOption),h.push(i),h=S(h),console.log(h[0].chartOption)},t.createPieGraph=function(){var e=Math.floor(1e5+9e5*Math.random());t.clearfocus(),$("#workspace").append('<div id="div_canvas_'+e+'" class="sPosition fCorner"><canvas id="canvas_'+e+'" state-mode="classic"/></div>');var a=$("#canvas_"+e),s=new Chart(a,{type:"pie",data:{labels:["Su","Mo","Tu","We","Th","Fr","Sa"],datasets:[{label:"Demo Data 1",data:[0,59,75,20,20,55,40],backgroundColor:"#05acd3"},{label:"Demo Data 2",data:[0,29,25,20,20,25,20],backgroundColor:"#00ce68"}]},options:{responsive:!0,maintainAspectRatio:!1,legend:{display:!0,position:"top",labels:{boxWidth:80,fontColor:"black"}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Y Label"}}],xAxes:[{scaleLabel:{display:!0,labelString:"X Label"}}]}}});a.data("graph",s),$(".propertyMenu-2").html(""),(new M).createGraphProp(e,s,"#div_canvas_"+e,"pie"),t.createWidget(e,"div_canvas_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#div_canvas_"+e).addClass("fCorner"),$(".propertyMenu-2").html(""),(new M).createGraphProp(e,s,"#div_canvas_"+e,"pie")}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#div_canvas_"+e).addClass("fCorner");var a=t.target,n=(parseFloat(a.getAttribute("data-x"))||0)+t.dx,i=(parseFloat(a.getAttribute("data-y"))||0)+t.dy,o=parseFloat(a.getAttribute("data-z"))||0;a.style.webkitTransform=a.style.transform="translate("+n+"px, "+i+"px) rotate("+o+"deg)",a.setAttribute("data-x",n),a.setAttribute("data-y",i),a.setAttribute("data-z",o),$(".propertyMenu-2").html(""),(new M).createGraphProp(e,s,"#div_canvas_"+e,"pie")});var i=new n.default;console.log(s.options),i.WidgetGraphObject(e,null,s.data,s.options,"pie"),console.log(i.chartOption),h.push(i),h=S(h),console.log(h[0].chartOption)},t.createRadarGraph=function(){var e=Math.floor(1e5+9e5*Math.random());t.clearfocus(),$("#workspace").append('<div id="div_canvas_'+e+'" class="sPosition fCorner"><canvas id="canvas_'+e+'" state-mode="classic"/></div>');var a=$("#canvas_"+e),s=new Chart(a,{type:"radar",data:{labels:["Su","Mo","Tu","We","Th","Fr","Sa"],datasets:[{label:"Demo Data 1",data:[0,59,75,20,20,55,40],backgroundColor:"rgba(255, 255, 255, 0)",borderColor:"#05acd3"},{label:"Demo Data 2",data:[0,29,25,20,20,25,20],backgroundColor:"rgba(255, 255, 255, 0)",borderColor:"#00ce68"}]},options:{responsive:!0,maintainAspectRatio:!1,legend:{display:!0,position:"top",labels:{boxWidth:80,fontColor:"black"}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Y Label"}}],xAxes:[{scaleLabel:{display:!0,labelString:"X Label"}}]}}});a.data("graph",s),$(".propertyMenu-2").html(""),(new M).createGraphProp(e,s,"#div_canvas_"+e,"radar"),t.createWidget(e,"div_canvas_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#div_canvas_"+e).addClass("fCorner"),$(".propertyMenu-2").html(""),(new M).createGraphProp(e,s,"#div_canvas_"+e,"radar")}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#div_canvas_"+e).addClass("fCorner");var a=t.target,n=(parseFloat(a.getAttribute("data-x"))||0)+t.dx,i=(parseFloat(a.getAttribute("data-y"))||0)+t.dy,o=parseFloat(a.getAttribute("data-z"))||0;a.style.webkitTransform=a.style.transform="translate("+n+"px, "+i+"px) rotate("+o+"deg)",a.setAttribute("data-x",n),a.setAttribute("data-y",i),a.setAttribute("data-z",o),$(".propertyMenu-2").html(""),(new M).createGraphProp(e,s,"#div_canvas_"+e,"radar")});var i=new n.default;console.log(s.options),i.WidgetGraphObject(e,null,s.data,s.options,"radar"),console.log(i.chartOption),h.push(i),h=S(h),console.log(h[0].chartOption)},t.loadGraphData=function(e,i,o,r,l){t.clearfocus(),$("#workspace").append(i);var d=$("#canvas_"+e),c=new Chart(d,{type:l,options:r});a(c,o.labels),s(c,o.datasets),d.data("graph",c),$(".propertyMenu-2").html(""),t.clearfocus(),t.createWidget(e,"div_canvas_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#div_canvas_"+e).addClass("fCorner"),$(".propertyMenu-2").html(""),(new M).createGraphProp(e,c,"#div_canvas_"+e,l)}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#div_canvas_"+e).addClass("fCorner");var a=t.target,n=(parseFloat(a.getAttribute("data-x"))||0)+t.dx,s=(parseFloat(a.getAttribute("data-y"))||0)+t.dy,i=parseFloat(a.getAttribute("data-z"))||0;a.style.webkitTransform=a.style.transform="translate("+n+"px, "+s+"px) rotate("+i+"deg)",a.setAttribute("data-x",n),a.setAttribute("data-y",s),a.setAttribute("data-z",i),$(".propertyMenu-2").html(""),(new M).createGraphProp(e,c,"#div_canvas_"+e,l)});var p=new n.default;p.WidgetGraphObject(e,null,c.data,c.options,l),h.push(p),h=S(h)};var a=function(t,e){for(var a=0;a<e.length;a++)t.data.labels.push(e[a]);t.update()},s=function(t,e){for(var a=0;a<e.length;a++){var n={label:e[a].label,data:e[a].data,backgroundColor:e[a].backgroundColor,borderColor:e[a].borderColor};t.data.datasets.push(n)}t.update()};return t}return c(e,m),e}(),w=function(t){function e(){p(this,e);var t=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.createMapWidget=function(){var e=Math.floor(1e5+9e5*Math.random());t.clearfocus(),$("#workspace").append('<div id="div_map_'+e+'" class="sPosition fCorner crispyOutter"><div id="map_'+e+'" class="crispyInner"></div></div>'),$("#map_"+e).css("height",300),$("#map_"+e).css("width",300);var a=void 0,s="map_"+e;a=L.map(s,{dragging:!0,zoomControl:!0,scrollWheelZoom:!1,zoomAnimation:!1}),$.getJSON("https://raw.githubusercontent.com/apisit/thailand.json/master/thailand.json").then(function(t){var e=new L.TileLayer.BoundaryCanvas("https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{boundary:t,minZoom:5,maxZoom:9,attribution:"&copy; Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ"});a.addLayer(e);var n=L.geoJSON(t);a.fitBounds(n.getBounds())}),$(".propertyMenu-2").html(""),(new M).createMapProp(e,"#div_map_"+e,"map",a),t.createWidget(e,"div_map_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#div_map_"+e).addClass("fCorner"),$(".propertyMenu-2").html(""),(new M).createMapProp(e,"#div_map_"+e,"map",a)}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#div_map_"+e).addClass("fCorner");var n=t.target,s=(parseFloat(n.getAttribute("data-x"))||0)+t.dx,i=(parseFloat(n.getAttribute("data-y"))||0)+t.dy,o=parseFloat(n.getAttribute("data-z"))||0;n.style.webkitTransform=n.style.transform="translate("+s+"px, "+i+"px) rotate("+o+"deg)",n.setAttribute("data-x",s),n.setAttribute("data-y",i),n.setAttribute("data-z",o),$(".propertyMenu-2").html(""),(new M).createMapProp(e,"#div_map_"+e,"map",a)});var i=new n.default;i.MapWidgetObject(e,null,"map"),h.push(i)},t.loadMapWidget=function(e,a){t.clearfocus(),$("#workspace").append(a),$("#map_"+e).css("height",300),$("#map_"+e).css("width",300);var s=void 0,i="map_"+e;s=L.map(i,{dragging:!0,zoomControl:!0,scrollWheelZoom:!1,zoomAnimation:!1}),$.getJSON("https://raw.githubusercontent.com/apisit/thailand.json/master/thailand.json").then(function(t){var e=new L.TileLayer.BoundaryCanvas("https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{boundary:t,minZoom:5,maxZoom:9,attribution:"&copy; Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ"});s.addLayer(e);var a=L.geoJSON(t);s.fitBounds(a.getBounds())}),$(".propertyMenu-2").html(""),t.clearfocus(),t.createWidget(e,"div_map_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#div_map_"+e).addClass("fCorner"),$(".propertyMenu-2").html(""),(new M).createMapProp(e,"#div_map_"+e,"map",s)}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#div_map_"+e).addClass("fCorner");var a=t.target,n=(parseFloat(a.getAttribute("data-x"))||0)+t.dx,i=(parseFloat(a.getAttribute("data-y"))||0)+t.dy,o=parseFloat(a.getAttribute("data-z"))||0;a.style.webkitTransform=a.style.transform="translate("+n+"px, "+i+"px) rotate("+o+"deg)",a.setAttribute("data-x",n),a.setAttribute("data-y",i),a.setAttribute("data-z",o),$(".propertyMenu-2").html(""),(new M).createMapProp(e,"#div_map_"+e,"map",s)});var o=new n.default;o.MapWidgetObject(e,null,"map"),h.push(o)},t}return c(e,m),e}(),x=function(t){function e(){p(this,e);var t=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.createHeadGraph=function(e){var a=Math.floor(1e5+9e5*Math.random());t.clearfocus(),"title"==e?$("#workspace").append('<span id="span_'+a+'" class="sPosition fCorner" style="font-size: 100px;">Title</span>'):"subtitle"==e&&$("#workspace").append('<span id="span_'+a+'" class="sPosition fCorner" style="font-size: 40px; color: rgb(73, 73, 73);">subtitle</span>'),$(".propertyMenu-2").html(""),(new M).createTextProp(a,"#span_"+a,"text"),t.createWidget(a,"span_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#span_"+a).addClass("fCorner"),$(".propertyMenu-2").html(""),(new M).createTextProp(a,"#span_"+a,"text")}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#span_"+a).addClass("fCorner");var e=t.target,n=(parseFloat(e.getAttribute("data-x"))||0)+t.dx,s=(parseFloat(e.getAttribute("data-y"))||0)+t.dy,i=parseFloat(e.getAttribute("data-z"))||0;e.style.webkitTransform=e.style.transform="translate("+n+"px, "+s+"px) rotate("+i+"deg)",e.setAttribute("data-x",n),e.setAttribute("data-y",s),e.setAttribute("data-z",i),$(".propertyMenu-2").html(""),(new M).createTextProp(a,"#span_"+a,"text")});var s=new n.default;s.HeadFontObject(a,null,"head"),h.push(s)},t.loadHeadGraph=function(e,a){t.clearfocus(),$("#workspace").append(a),$(".propertyMenu-2").html(""),t.clearfocus(),t.createWidget(e,"span_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#span_"+e).addClass("fCorner"),$(".propertyMenu-2").html(""),(new M).createTextProp(e,"#span_"+e,"text")}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#span_"+e).addClass("fCorner");var a=t.target,n=(parseFloat(a.getAttribute("data-x"))||0)+t.dx,s=(parseFloat(a.getAttribute("data-y"))||0)+t.dy,i=parseFloat(a.getAttribute("data-z"))||0;a.style.webkitTransform=a.style.transform="translate("+n+"px, "+s+"px) rotate("+i+"deg)",a.setAttribute("data-x",n),a.setAttribute("data-y",s),a.setAttribute("data-z",i),$(".propertyMenu-2").html(""),(new M).createTextProp(e,"#span_"+e,"text")});var s=new n.default;s.HeadFontObject(e,null,"head"),h.push(s)},t.createTableGraph=function(){var e=Math.floor(1e5+9e5*Math.random());t.clearfocus(),$("#workspace").append('\n                                <table id="table_'+e+'" class="sPosition fCorner table" table-class="1">\n                                  <tr>\n                                    <th>Column</th>\n                                    <th>Column</th>\n                                    <th>Column</th>\n                                  </tr>\n                                  <tr>\n                                    <td>Data</td>\n                                    <td>Data</td>\n                                    <td>Data</td>\n                                  </tr>\n                                  <tr>\n                                    <td>Data</td>\n                                    <td>Data</td>\n                                    <td>Data</td>\n                                  </tr>\n                                </table>\n                              ');var a=new SimpleTableCellEditor("table_"+e);a.SetEditable("td",{keys:{validation:[13],cancellation:[27]}}),a.SetEditable("th",{keys:{validation:[13],cancellation:[27]}}),$(".propertyMenu-2").html(""),(new M).createTableProp(e,"#table_"+e,"table"),t.createWidget(e,"table_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#table_"+e).addClass("fCorner"),$(".propertyMenu-2").html(""),(new M).createTableProp(e,"#table_"+e,"table")}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#table_"+e).addClass("fCorner");var a=t.target,n=(parseFloat(a.getAttribute("data-x"))||0)+t.dx,s=(parseFloat(a.getAttribute("data-y"))||0)+t.dy,i=parseFloat(a.getAttribute("data-z"))||0;a.style.webkitTransform=a.style.transform="translate("+n+"px, "+s+"px) rotate("+i+"deg)",a.setAttribute("data-x",n),a.setAttribute("data-y",s),a.setAttribute("data-z",i),$(".propertyMenu-2").html(""),(new M).createTableProp(e,"#table_"+e,"table")});var s=new n.default;s.WidgetTableObject(e,null,"table"),h.push(s)},t.loadTableWidget=function(e,a){t.clearfocus(),$("#workspace").append(a);var s=new SimpleTableCellEditor("table_"+e);s.SetEditable("td",{keys:{validation:[13],cancellation:[27]}}),s.SetEditable("th",{keys:{validation:[13],cancellation:[27]}}),$(".propertyMenu-2").html(""),t.clearfocus(),t.createWidget(e,"table_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#table_"+e).addClass("fCorner"),$(".propertyMenu-2").html(""),(new M).createTableProp(e,"#table_"+e,"table")}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#table_"+e).addClass("fCorner");var a=t.target,n=(parseFloat(a.getAttribute("data-x"))||0)+t.dx,s=(parseFloat(a.getAttribute("data-y"))||0)+t.dy,i=parseFloat(a.getAttribute("data-z"))||0;a.style.webkitTransform=a.style.transform="translate("+n+"px, "+s+"px) rotate("+i+"deg)",a.setAttribute("data-x",n),a.setAttribute("data-y",s),a.setAttribute("data-z",i),$(".propertyMenu-2").html(""),(new M).createTableProp(e,"#table_"+e,"table")});var i=new n.default;i.WidgetTableObject(e,null,"table"),h.push(i)},t}return c(e,m),e}(),C=function(t){function e(){p(this,e);var t=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.createImageWidget=function(e){var a=Math.floor(1e5+9e5*Math.random());t.clearfocus(),$("#workspace").append('<div id="div_'+a+'" class="sPosition fCorner"><img id="image_'+a+'" src="'+e+'" class="scaleImage" /></div>'),$("#div_"+a).css("height",150),$("#div_"+a).css("width",150),$(".propertyMenu-2").html(""),(new M).createImageProp(a,"#div_"+a,"#image_"+a,"image"),t.createWidget(a,"div_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#div_"+a).addClass("fCorner"),$(".propertyMenu-2").html(""),(new M).createImageProp(a,"#div_"+a,"#image_"+a,"image")}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#div_"+a).addClass("fCorner");var e=t.target,n=(parseFloat(e.getAttribute("data-x"))||0)+t.dx,s=(parseFloat(e.getAttribute("data-y"))||0)+t.dy,i=parseFloat(e.getAttribute("data-z"))||0;e.style.webkitTransform=e.style.transform="translate("+n+"px, "+s+"px) rotate("+i+"deg)",e.setAttribute("data-x",n),e.setAttribute("data-y",s),e.setAttribute("data-z",i),$(".propertyMenu-2").html(""),(new M).createImageProp(a,"#div_"+a,"#image_"+a,"image")});var s=new n.default;s.WidgetImageObject(a,null,"image"),h.push(s)},t.loadImageWidget=function(e,a){t.clearfocus(),$("#workspace").append(a),$("#div_"+e).css("height",150),$("#div_"+e).css("width",150),$(".propertyMenu-2").html(""),(new M).createImageProp(e,"#div_"+e,"#image_"+e,"image"),t.createWidget(e,"div_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#div_"+e).addClass("fCorner"),$(".propertyMenu-2").html(""),(new M).createImageProp(e,"#div_"+e,"#image_"+e,"image")}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#div_"+e).addClass("fCorner");var a=t.target,n=(parseFloat(a.getAttribute("data-x"))||0)+t.dx,s=(parseFloat(a.getAttribute("data-y"))||0)+t.dy,i=parseFloat(a.getAttribute("data-z"))||0;a.style.webkitTransform=a.style.transform="translate("+n+"px, "+s+"px) rotate("+i+"deg)",a.setAttribute("data-x",n),a.setAttribute("data-y",s),a.setAttribute("data-z",i),$(".propertyMenu-2").html(""),(new M).createImageProp(e,"#div_"+e,"#image_"+e,"image")});var s=new n.default;s.WidgetImageObject(e,null,"image"),h.push(s)},t}return c(e,m),e}(),k=function(t){function e(){p(this,e);var t=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.createShapeWidget=function(e){var a=Math.floor(1e5+9e5*Math.random());t.clearfocus(),"square"==e?$("#workspace").append('<div id="div_'+a+'" class="sPosition fCorner"><div id="shape_'+a+'" class="square"></div></div>'):"circle"==e?$("#workspace").append('<div id="div_'+a+'" class="sPosition fCorner"><div id="shape_'+a+'" class="circle"></div></div>'):"string"==e&&$("#workspace").append('<div id="div_'+a+'" class="sPosition fCorner"><div id="shape_'+a+'" class="string"></div></div>'),$("#div_"+a).css("height",150),$("#div_"+a).css("width",150),$(".propertyMenu-2").html(""),(new M).createShapeProp(a,"#div_"+a,"#shape_"+a,e),t.createWidget(a,"div_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#div_"+a).addClass("fCorner"),$(".propertyMenu-2").html(""),(new M).createShapeProp(a,"#div_"+a,"#shape_"+a,e)}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#div_"+a).addClass("fCorner");var n=t.target,s=(parseFloat(n.getAttribute("data-x"))||0)+t.dx,i=(parseFloat(n.getAttribute("data-y"))||0)+t.dy,o=parseFloat(n.getAttribute("data-z"))||0;n.style.webkitTransform=n.style.transform="translate("+s+"px, "+i+"px) rotate("+o+"deg)",n.setAttribute("data-x",s),n.setAttribute("data-y",i),n.setAttribute("data-z",o),$(".propertyMenu-2").html(""),(new M).createShapeProp(a,"#div_"+a,"#shape_"+a,e)});var s=new n.default;s.WidgetShapeObject(a,null,e),h.push(s)},t.loadShapeWidget=function(e,a,s){t.clearfocus(),console.log(a),$("#workspace").append(a),$(".propertyMenu-2").html(""),t.clearfocus(),t.createWidget(e,"div_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#div_"+e).addClass("fCorner"),$(".propertyMenu-2").html(""),(new M).createShapeProp(e,"#div_"+e,"#shape_"+e,s)}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#div_"+e).addClass("fCorner");var a=t.target,n=(parseFloat(a.getAttribute("data-x"))||0)+t.dx,i=(parseFloat(a.getAttribute("data-y"))||0)+t.dy,o=parseFloat(a.getAttribute("data-z"))||0;a.style.webkitTransform=a.style.transform="translate("+n+"px, "+i+"px) rotate("+o+"deg)",a.setAttribute("data-x",n),a.setAttribute("data-y",i),a.setAttribute("data-z",o),$(".propertyMenu-2").html(""),(new M).createShapeProp(e,"#div_"+e,"#shape_"+e,s)});var i=new n.default;i.WidgetShapeObject(e,null,s),h.push(i)},t}return c(e,m),e}(),A=function t(){p(this,t),$("#propertySpace").html('<div class="propertyMenu-2">\n                                <div class="propertyMenu-2-context"></div>\n                                <div class="propertyMenu-2-paper"></div>\n                              </div>'),this.createContext=function(t,e,a,n){$(".propertyMenu-2-context").append('  \n            <div class="container">\n                <div class="row row-block border-bottom-only">\n                    <div class="col-2">\n                        <button type="button" id="backest_widget_'+t+'" class="btn btn-default"><i class="far fa-caret-square-down"></i></button>\n                    </div>\n                    <div class="col-3">\n                        <button type="button" id="topest_widget_'+t+'"  class="btn btn-default"><i class="far fa-caret-square-up"></i></button>\n                    </div>\n                    <div class="col-2">\n                        <button type="button" id="align_left_widget_'+t+'" class="btn btn-default"><i class="fas fa-align-left"></i></button>\n                    </div>\n                    <div class="col-2">\n                        <button type="button" id="align_center_widget_'+t+'" class="btn btn-default"><i class="fas fa-align-center"></i></button>\n                    </div>\n                    <div class="col-2">         \n                        <button type="button" id="align_right_widget_'+t+'" class="btn btn-default"><i class="fas fa-align-right"></i></button>\n                    </div>\n                </div>\n                <div class="row row-block">\n                    <div class="col-7">\n                        <button type="button" id="download_widget_'+t+'" class="btn btn-default form-control">Download</button>\n                    </div>\n                    <div class="col-2">\n                        <button type="button" id="preview_widget_'+t+'" class="btn btn-default" ><i class="fas fa-desktop"></i></button>\n                    </div>\n                    <div class="col-1">\n                        <button type="button" id="delete_widget_'+t+'" class="btn btn-default" ><i class="fas fa-trash-alt"></i></button>\n                    </div>\n                </div>\n            </div>'),$("#backest_widget_"+t).click(function(){$(".sPosition").each(function(t){$(this).hasClass("fCorner")?$(this).css("z-index",0):$(this).css("z-index",t+1)})}),$("#topest_widget_"+t).click(function(){$(".sPosition").each(function(t){$(this).hasClass("fCorner")?$(this).css("z-index",$(".sPosition").length):$(this).css("z-index",t)})}),$("#align_left_widget_"+t).click(function(){var t=$(e).css("transform").split(",")[5].split(")")[0];$(e).css("transform","translate(0px, "+t+"px)"),$(e).attr("data-x",0),$(e).attr("data-y",t)}),$("#align_center_widget_"+t).click(function(){var t=$(e).css("transform").split(",")[5].split(")")[0],a=297.5-$(e).width()/2;$(e).css("transform","translate("+a+"px, "+t+"px)"),$(e).attr("data-x",a),$(e).attr("data-y",t)}),$("#align_right_widget_"+t).click(function(){var t=$(e).css("transform").split(",")[5].split(")")[0],a=595-$(e).width();$(e).css("transform","translate("+a+"px, "+t+"px)"),$(e).attr("data-x",a),$(e).attr("data-y",t)}),$("#download_widget_"+t).click(function(){var a=$(e).css("transform"),n=$(e).css("data-x"),s=$(e).css("data-y"),i=$(e).css("width"),o=$(e).css("height");$(e).css("transform","translate(0px, 0px)"),$(e).css("data-x",0),$(e).css("data-y",0),$(e).css("width",1920),$(e).css("height",1080),$(e).removeClass("fCorner"),$("#modelDownload_"+t).remove();var r='\n        <div class="modal" id="modelDownload_'+t+'" class="modelcropper">\n            <div class="modal-dialog">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h4 class="modal-title">Download</h4>\n                        <button type="button" id="close_download_'+t+'" class="close" data-dismiss="modal">&times;</button>\n                    </div>\n\n                    <div class="modal-body">\n                        <div class="row justify-content-center">\n                            <div class="col-5 header-line">\n                               <span class="header-title">Save as file</span>\n                               <div class="row">\n                                  <div class="col-6">\n                                    <button type="button" id="download_as_pdf_'+t+'" class="btn btn-default" style="width:inherit;" data-loading-text="<i class=\'fas fa-circle-notch fa-spin\'></i>LOADING..."><i class="far fa-file-pdf" style="margin-right:10px"></i>PDF</button>\n                                  </div>\n                                  <div class="col-6">\n                                    <button type="button" id="download_as_excel_'+t+'" class="btn btn-default" style="width:inherit;" data-loading-text="<i class=\'fas fa-circle-notch fa-spin\'></i>LOADING..."><i class="fas fa-file-excel" style="margin-right:10px"></i>EXCEL</button>\n                                  </div>\n                               </div>\n                            </div>\n                            <div class="col-5 header-line">\n                              <span class="header-title">Save as image</span>\n                                <div class="row">\n                                  <div class="col-6">\n                                    <button type="button" id="download_as_png_'+t+'" class="btn btn-default" style="width:inherit;" data-loading-text="<i class=\'fas fa-circle-notch fa-spin\'></i>LOADING..."><i class="far fa-file-image" style="margin-right:10px"></i>PNG</button>\n                                  </div>\n                                  <div class="col-6">\n                                    <button type="button" id="download_as_jpg_'+t+'" class="btn btn-default" style="width:inherit;" data-loading-text="<i class=\'fas fa-circle-notch fa-spin\'></i>LOADING..."><i class="far fa-image" style="margin-right:10px"></i>JPG</button>\n                                  </div>\n                               </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>';$("body").append(r),$("#modelDownload_"+t).modal("show"),$("#download_as_pdf_"+t).click(function(){l.a.set($("#download_as_pdf_"+t)),html2canvas(document.querySelector(e)).then(function(e){var a=e.toDataURL("image/png"),n=new jsPDF;n.addImage(a,"JPEG",0,0,n.internal.pageSize.getWidth(),n.internal.pageSize.getHeight()),n.save(_+".pdf"),l.a.reset($("#download_as_pdf_"+t))})}),$("#download_as_png_"+t).click(function(){l.a.set($("#download_as_png_"+t)),html2canvas(document.querySelector(e)).then(function(e){var a=e.toDataURL("image/png"),n=document.createElement("a");n.href=a,n.setAttribute("download",_+".png");var s=document.createEvent("MouseEvents");s.initEvent("click",!1,!0),n.dispatchEvent(s),l.a.reset($("#download_as_png_"+t))})}),$("#download_as_jpg_"+t).click(function(){l.a.set($("#download_as_jpg_"+t)),html2canvas(document.querySelector(e)).then(function(e){var a=e.toDataURL("image/png"),n=document.createElement("a");n.href=a,n.setAttribute("download",_+".jpg");var s=document.createEvent("MouseEvents");s.initEvent("click",!1,!0),n.dispatchEvent(s),l.a.reset($("#download_as_jpg_"+t))})}),$("#modelDownload_"+t).on("hidden.bs.modal",function(r){$(e).css("transform",a),$(e).css("data-x",n),$(e).css("data-y",s),$(e).css("width",i),$(e).css("height",o),$(e).addClass("fCorner"),$("#modelDownload_"+t).modal("hide"),$("#modelDownload_"+t).modal("dispose"),$("#modelDownload_"+t).remove()})}),$("#preview_widget_"+t).click(function(){var t=window.open();t.document.write("<h1 id='loading'>Loading...</h1>");var a=$(e).css("transform"),n=$(e).css("data-x"),s=$(e).css("data-y");$(e).css("transform","translate(0px, 0px)"),$(e).css("data-x",0),$(e).css("data-y",0),$(e).removeClass("fCorner"),html2canvas(document.querySelector(e)).then(function(i){var o=i.toDataURL("image/png");$(e).css("transform",a),$(e).css("data-x",n),$(e).css("data-y",s),$(e).addClass("fCorner");var r='<img src="'+o+'">';t.document.write(r),t.document.title="Preview",t.document.getElementById("loading").remove()})}),$("#delete_widget_"+t).click(function(){var e;if(e=t,h=h.filter(function(t){return t.id!=e}),"line"==a||"bar"==a||"pie"==a||"radar"==a){var s=document.getElementById("div_canvas_"+t);n.destroy(),s.remove()}else if("map"==a){document.getElementById("div_map_"+t).remove()}else if("text"==a){document.getElementById("span_"+t).remove()}else if("table"==a){document.getElementById("table_"+t).remove()}else if("image"==a){document.getElementById("div_"+t).remove()}else if("square"==a||"circle"==a||"string"==a){document.getElementById("div_"+t).remove()}$(".propertyMenu-2").html("")})},this.createEditdata=function(t,e,a,n){var s,i,l,d,c=[],p=[],u=[],_=[],b=[],h=[];function m(t,a,n,s){"daily"==a?($("#btn_daily_"+t).click(),$("#start_daily_"+t).val(n),$("#end_daily_"+t).val(s),i=e.data.labels):"monthly"==a?($("#btn_monthly_"+t).click(),$("#start_monthly_"+t).val(n),$("#end_monthly_"+t).val(s),l=e.data.labels):"yearly"==a?($("#btn_yearly_"+t).click(),$("#start_yearly_"+t).val(n),$("#end_yearly_"+t).val(s),e.data.labels):$("#btn_daily_"+t).click()}function y(t,e,a,n){var s=document.getElementById("preview_canvas_"+e+"_"+n),i=new Chart(s,{type:a,options:t.options});return w(i,t.data.labels),x(i,t.data.datasets),i}function w(t,e){t.data.labels=[];for(var a=0;a<e.length;a++)t.data.labels.push(e[a]);t.update()}function x(t,e){t.data.datasets=[];for(var a=0;a<e.length;a++){var n={label:e[a].label,data:e[a].data,backgroundColor:e[a].backgroundColor,borderColor:e[a].borderColor};t.data.datasets.push(n)}t.update()}function C(t,e){t.options=e,t.update()}function k(e){for(var a=void 0,s=0;s<e.data.datasets.length;s++)a="bar"==n||"pie"==n?e.data.datasets[s].backgroundColor:e.data.datasets[s].borderColor,$("#chart_data_"+t).append('\n              <div id="div_preview_chart_'+t+"_"+s+'" class="col-12">\n                <div class="row" style="padding-top:5px; padding-bottom:5px;">\n                  <div class="col-2">\n                    <span>Datasource</span>\n                  </div>\n                  <div class="col-4">\n                    <span>Data</span>\n                  </div>\n                  <div class="col-2">\n                    <span>Aggregate</span>\n                  </div>\n                  <div class="col-2">\n                    <span>Label</span>\n                  </div>\n                  <div class="col-1">\n                    <span>Color</span>\n                  </div>\n                </div>\n                <div class="row" style="padding-top:5px; padding-bottom:5px;">\n                  <div class="col-2">\n                    <select type="text" id="select_datasource_list_'+t+"_"+s+'" name="list_datasource" class="form-control">\n                      <option value="0">-Select-</option>\n                    </select>\n                  </div>\n                  <div class="col-4">\n                    <input type="text" list="datalist_keydata_list_'+t+"_"+s+'" id="id_keydata_list_'+t+"_"+s+'" class="form-control" />\n                    <datalist id="datalist_keydata_list_'+t+"_"+s+'">\n                      <option value="Null"></option>\n                    </datalist> \n                  </div>\n                  <div class="col-2">         \n                    <select type="text" id="select_agg_list_'+t+"_"+s+'" class="form-control">\n                      <option value="0">-Select-</option>\n                      <option value="1">Avg</option>\n                      <option value="2">Max</option>\n                      <option value="3">Min</option>\n                    </select>\n                  </div>\n                  <div class="col-2">\n                    <input type="text" id="label_preview_chart_'+t+"_"+s+'" class="form-control" value="'+e.data.datasets[s].label+'"/>\n                  </div>\n                  <div class="col-1">\n                    <input type="color" id="color_preview_chart_'+t+"_"+s+'" class="form-control" value="'+a+'"/>\n                  </div>\n                  <div class="col-1">\n                    <button type="button" id="delete_preview_chart_'+t+"_"+s+'" class="btn btn-default" ><i class="fas fa-trash-alt"></i></button>\n                  </div>\n                </div>\n              </div>'),0,$("#label_preview_chart_"+t+"_"+s).keyup(D(e,s)),$("#color_preview_chart_"+t+"_"+s).change(T(e,s)),$("#delete_preview_chart_"+t+"_"+s).click(I(e,s)),$("#select_datasource_list_"+t+"_"+s).change(A(e,s)),$("#id_keydata_list_"+t+"_"+s).change(S(e,s)),$("#select_agg_list_"+t+"_"+s).change(P(s)),$("#delete_preview_chart_"+t+"_0").remove();$.ajax({url:"http://localhost:8000/api/infographic/getDatasource",method:"GET",data:{info_id:v},success:function(e){(f=e.data).map(function(t,e){$("select[name='list_datasource']").append('<option value="'+(e+1)+'">'+t.name+"</option>")});for(var a=0;a<c.length;a++)document.getElementById("select_datasource_list_"+t+"_"+a).selectedIndex=c[a],$("#select_datasource_list_"+t+"_"+a).change(),$("#id_keydata_list_"+t+"_"+a).val(p[a]),document.getElementById("select_agg_list_"+t+"_"+a).selectedIndex=u[a]},error:function(t){console.log(t)}})}function A(e,a){return function(){if("series"==s){var n=$("#select_datasource_list_"+t+"_"+a+"_series").val();if(0!=n){$("#datalist_keydata_list_"+t+"_"+a+"_series").html('<option value="Null"></option>'),$("#id_keydata_list_"+t+"_"+a+"_series").val("Null");var o=Object(r.h)(g.dataTimeSeries[0]);for(var p in o)"Date"!=p&&$("#datalist_keydata_list_"+t+"_"+a+"_series").append('<option value="'+p+'"></option>');$("#id_keydata_list_"+t+"_"+a+"_series").val("")}else $("#datalist_keydata_list_"+t+"_"+a+"_series").html('<option value="Null"></option>'),$("#id_keydata_list_"+t+"_"+a+"_series").val("Null");_[a]=n,$("#canvas_"+t).attr("select-datasource-list-series",_)}else{var u=$("#select_datasource_list_"+t+"_"+a).val();if(0!=u){$("#datalist_keydata_list_"+t+"_"+a).html('<option value="Null"></option>'),$("#id_keydata_list_"+t+"_"+a).val("Null");for(var b=0;b<$(".period-tab").length;b++)$(".period-tab")[b].className.includes("active")&&(d=$(".period-tab")[b].value);"daily"==d?$.ajax({url:"http://localhost:8000/api/infographic/getApiDaily",method:"GET",data:{info_id:v},success:function(n){h[a]=n.data;var s=Object(r.h)(h[a].daily[0]);for(var o in s)o.includes("$")&&$("#datalist_keydata_list_"+t+"_"+a).append('<option value="'+o+'"></option>');$("#id_keydata_list_"+t+"_"+a).val(""),7==e.data.labels.length&&"Su"==e.data.labels[0]&&(e.data.labels=[],i=[],e.data.datasets[a].data=[]);for(var l=0,d=0;d<h[a].daily.length;d++){for(var c=0;c<e.data.labels.length;c++)if(h[a].daily[d].day==e.data.labels[c]){l=1;break}1!=l&&i.push(h[a].daily[d].day)}e.data.labels=i,e.update()},error:function(t){console.log(t)}}):"monthly"==d&&$.ajax({url:"http://localhost:8000/api/infographic/getApiMonthly",method:"GET",data:{info_id:v},success:function(n){h[a]=n.data;var s=Object(r.h)(h[a].monthly[0]);for(var i in s)i.includes("$")&&$("#datalist_keydata_list_"+t+"_"+a).append('<option value="'+i+'"></option>');7==e.data.labels.length&&"Su"==e.data.labels[0]&&(e.data.labels=[],l=[],e.data.datasets[a].data=[]);for(var o=0,d=0;d<h[a].monthly.length;d++){for(var c=0;c<e.data.labels.length;c++)if(h[a].monthly[d].day==e.data.labels[c]){o=1;break}1!=o&&l.push(h[a].monthly[d].day)}e.data.labels=l,e.update()},error:function(t){console.log(t)}})}else $("#datalist_keydata_list_"+t+"_"+a).html('<option value="Null"></option>'),$("#id_keydata_list_"+t+"_"+a).val("Null");c[a]=u,$("#canvas_"+t).attr("select-datasource-list",c)}}}function S(e,a){return function(){if("series"==s){var n=$("#id_keydata_list_"+t+"_"+a+"_series").val();if("Null"!=n){e.data.datasets[a].data=[];var i=Object(r.h)(g);for(var l in i)if(l.includes(n)){var c=l.replace(new RegExp("\\/","g"),"."),u=o.a.get(g,c.replace(n,"Date")).split("/"),v=u[0],_=u[1],f=u[2],m={x:new Date(f,_,v),y:o.a.get(g,c)};e.data.datasets[a].data.push(m)}e.update()}b[a]=$("#id_keydata_list_"+t+"_"+a+"_series").val(),$("#canvas_"+t).attr("select-keydata-list-series",b)}else{var y=$("#id_keydata_list_"+t+"_"+a).val();if("Null"!=y){if("daily"==d)for(var w=0;w<h[a].daily.length;w++)for(var x=0;x<e.data.labels.length;x++){var C=o.a.get(h[a],"daily."+w+".day");if(e.data.labels[x]==C){e.data.datasets[a].data[x]=o.a.get(h[a],"daily."+w+"."+y);break}}else if("monthly"==d)for(var k=0;k<h[a].monthly.length;k++)for(var A=0;A<e.data.labels.length;A++){var M=o.a.get(h[a],"monthly."+k+".day");if(e.data.labels[A]==M){console.log(o.a.get(h[a],"monthly."+k+"."+y)),e.data.datasets[a].data[A]=o.a.get(h[a],"monthly."+k+"."+y);break}}e.update()}p[a]=$("#id_keydata_list_"+t+"_"+a).val(),$("#canvas_"+t).attr("select-keydata-list",p)}}}function P(e){return function(){$("#select_agg_list_"+t+"_"+e).val();u[e]=$("#select_agg_list_"+t+"_"+e).val(),$("#canvas_"+t).attr("select-agg-list",u)}}function T(e,a){return function(){"bar"==n||"pie"==n?e.data.datasets[a].backgroundColor="series"==s?$("#color_preview_chart_"+t+"_"+a+"_series").val():$("#color_preview_chart_"+t+"_"+a).val():e.data.datasets[a].borderColor="series"==s?$("#color_preview_chart_"+t+"_"+a+"_series").val():$("#color_preview_chart_"+t+"_"+a).val(),e.update()}}function D(e,a){return function(){"series"==s?(e.data.datasets[a].label=$("#label_preview_chart_"+t+"_"+a+"_series").val(),e.update()):(e.data.datasets[a].label=$("#label_preview_chart_"+t+"_"+a).val(),e.update())}}function I(e,a){return function(){"series"==s?(e.data.datasets.splice(a,1),e.update(),$("#chart_data_"+t+"_series").contents().remove(),E(e),_.splice(a,1),b.splice(a,1)):(e.data.datasets.splice(a,1),e.update(),$("#chart_data_"+t).contents().remove(),k(e),c.splice(a,1),p.splice(a,1),u.splice(a,1))}}function E(e){for(var a=void 0,s=0;s<e.data.datasets.length;s++)a="bar"==n||"pie"==n?e.data.datasets[s].backgroundColor:e.data.datasets[s].borderColor,$("#chart_data_"+t+"_series").append('\n              <div id="div_preview_chart_'+t+"_"+s+'_series" class="col-12">\n                <div class="row" style="padding-top:5px; padding-bottom:5px;">\n                  <div class="col-2">\n                    <span>Datasource</span>\n                  </div>\n                  <div class="col-6">\n                    <span>Data</span>\n                  </div>\n                  <div class="col-2">\n                    <span>Label</span>\n                  </div>\n                  <div class="col-1">\n                    <span>Color</span>\n                  </div>\n                </div>\n                <div class="row" style="padding-top:5px; padding-bottom:5px;">\n                  <div class="col-2">\n                    <select type="text" id="select_datasource_list_'+t+"_"+s+'_series" name="list_datasource_series" class="form-control">\n                      <option value="0">-Select-</option>\n                    </select>\n                  </div>\n                  <div class="col-6">\n                    <input type="text" list="datalist_keydata_list_'+t+"_"+s+'_series" id="id_keydata_list_'+t+"_"+s+'_series" class="form-control" />\n                    <datalist id="datalist_keydata_list_'+t+"_"+s+'_series">\n                      <option value="Null"></option>\n                    </datalist> \n                  </div>\n                  <div class="col-2">\n                    <input type="text" id="label_preview_chart_'+t+"_"+s+'_series" class="form-control" value="'+e.data.datasets[s].label+'"/>\n                  </div>\n                  <div class="col-1">\n                    <input type="color" id="color_preview_chart_'+t+"_"+s+'_series" class="form-control" value="'+a+'"/>\n                  </div>\n                  <div class="col-1">\n                    <button type="button" id="delete_preview_chart_'+t+"_"+s+'_series" class="btn btn-default" ><i class="fas fa-trash-alt"></i></button>\n                  </div>\n                </div>\n              </div>'),0,$("#label_preview_chart_"+t+"_"+s+"_series").keyup(D(e,s)),$("#color_preview_chart_"+t+"_"+s+"_series").change(T(e,s)),$("#delete_preview_chart_"+t+"_"+s+"_series").click(I(e,s)),$("#select_datasource_list_"+t+"_"+s+"_series").change(A(e,s)),$("#id_keydata_list_"+t+"_"+s+"_series").change(S(e,s)),$("#delete_preview_chart_"+t+"_0_series").remove();$.ajax({url:"http://localhost:8000/api/infographic/getDatasource",method:"GET",data:{info_id:v},success:function(e){f=e.data,console.log(f),f.map(function(t,e){$("select[name='list_datasource_series']").append('<option value="'+(e+1)+'">'+t.name+"</option>")});for(var a=0;a<_.length;a++)document.getElementById("select_datasource_list_"+t+"_"+a+"_series").selectedIndex=_[a],$("#select_datasource_list_"+t+"_"+a+"_series").change(),$("#id_keydata_list_"+t+"_"+a+"_series").val(b[a]),console.log(b[a])},error:function(t){console.log(t)}})}$(".propertyMenu-2-paper").append('                \n          <div class="propertyMenu-2-block">\n            <button type="button" id="edit_chart_data_'+t+'" class="btn btn-default form-control button-width">Edit data</button>     \n          </div>'),$("#edit_chart_data_"+t).click(function(){$("#model_edit_chart_data_"+t).remove(),c=[],p=[],u=[],_=[],b=[],s="classic",h=[],d="daily";var a='\n        <div class="modal" id="model_edit_chart_data_'+t+'">\n            <div class="modal-dialog">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h4 class="modal-title">Edit data chart</h4>\n                        <button type="button" class="close" data-dismiss="modal">&times;</button>\n                    </div>\n\n                    <div class="modal-body">\n                      <div class="row" style="box-shadow: 0 3px 2px -2px grey; margin-bottom:15px;"> \n                        <div class="col-12">\n                          <ul class="nav nav-tabs" style="border-bottom:none; padding-top:5px; padding-bottom:10px;">\n                            <li class="multi-border"><span class="btn-default" id="btn_classic_'+t+'" style="margin:25px;">Classic</span></li>\n                            <li><span id="btn_series_'+t+'" style="margin:25px;">Time series</span></li>\n                          </ul>   \n                        </div>           \n                      </div>\n                      <div id="classic_'+t+'" style="display:none;">  \n                        <div class="row">\n                          <div class="col-5">\n                            <div class="row" style="padding-top:5px; padding-bottom:5px;">\n                              <div class="col-4 mt-2">\n                                <span>Select period</span>\n                              </div>\n                              <div class="col-8">\n                                <ul class="nav nav-tabs" id="period_tab_'+t+'" style="border-bottom:none; padding-top:5px; padding-bottom:5px;">\n                                  <li><button class="btn btn-primary period-tab" data-toggle="tab" href="#daily_'+t+'" id="btn_daily_'+t+'" value="daily" style="margin-right:5px;">Daily</button></li>\n                                  <li><button class="btn btn-primary period-tab" data-toggle="tab" href="#monthly_'+t+'" id="btn_monthly_'+t+'" value="monthly" style="margin-right:5px;">Monthly</button></li>\n                                  <li><button class="btn btn-primary period-tab" data-toggle="tab" href="#yearly_'+t+'" id="btn_yearly_'+t+'" value="yearly" style="margin-right:5px;">Yearly</button></li>\n                                </ul>\n                              </div>\n                            </div>\n                            <div class="tab-content" style="padding-top:5px; padding-bottom:5px;">\n                              <div id="daily_'+t+'" class="tab-pane fade">  \n                                <div class="row" style="padding-top:5px; padding-bottom:5px;">\n                                  <div class="col-6">\n                                    <span>Start date</span>\n                                  </div>\n                                  <div class="col-6">\n                                    <span>End date</span>\n                                  </div>\n                                </div>            \n                                <div class="row" style="padding-top:5px; padding-bottom:5px;">\n                                  <div class="col-6">\n                                    <input type="text" id="start_daily_'+t+'" class="form-control"/>\n                                  </div>\n                                  <div class="col-6">\n                                    <input type="text" id="end_daily_'+t+'" class="form-control"/>\n                                  </div>\n                                </div>\n                              </div>\n                              <div id="monthly_'+t+'" class="tab-pane fade">\n                                <div class="row" style="padding-top:5px; padding-bottom:5px;">\n                                  <div class="col-6">\n                                    <span>Start month</span>\n                                  </div>\n                                  <div class="col-6">\n                                    <span>End month</span>\n                                  </div>\n                                </div>            \n                                <div class="row" style="padding-top:5px; padding-bottom:5px;">\n                                  <div class="col-6">\n                                    <input type="text" id="start_monthly_'+t+'" class="form-control"/>\n                                  </div>\n                                  <div class="col-6">\n                                    <input type="text" id="end_monthly_'+t+'" class="form-control"/>\n                                  </div>\n                                </div>\n                              </div>\n                              <div id="yearly_'+t+'" class="tab-pane fade">\n                                <div class="row" style="padding-top:5px; padding-bottom:5px;">\n                                  <div class="col-6">\n                                    <span>Start year</span>\n                                  </div>\n                                  <div class="col-6">\n                                    <span>End year</span>\n                                  </div>\n                                </div>            \n                                <div class="row" style="padding-top:5px; padding-bottom:5px;">\n                                  <div class="col-6">\n                                    <input type="text" id="start_yearly_'+t+'" class="form-control"/>\n                                  </div>\n                                  <div class="col-6">\n                                    <input type="text" id="end_yearly_'+t+'" class="form-control"/>\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                          <div class="col-7" id="div_preview_canvas_'+t+'_classic">\n                            <canvas id="preview_canvas_'+t+'_classic"></canvas>\n                          </div>\n                        </div>\n                        <hr>\n                        <div class="row" style="padding-top:5px; padding-bottom:10px; box-shadow: 0 3px 2px -2px grey;">\n                          <div class="col-6">\n                            <span>Set data</span>\n                            <button id="add_new_data_'+t+'" class="btn btn-default btn-sm btn-radius"><i class="fas fa-plus"></i>Add new data</button>\n                          </div>\n                          <div class="col-1 mt-2">\n                            <span>X Label </span>\n                          </div>\n                          <div class="col-2">\n                            <input type="text" id="x_label_classic_'+t+'" class="form-control" value="'+e.options.scales.xAxes[0].scaleLabel.labelString+'"/>\n                          </div>\n                          <div class="col-1 mt-2">\n                            <span>Y Label </span>\n                          </div>\n                          <div class="col-2">\n                            <input type="text" id="y_label_classic_'+t+'"  class="form-control" value="'+e.options.scales.yAxes[0].scaleLabel.labelString+'"/>\n                          </div>\n                        </div>\n                        <div id="chart_data_'+t+'" class="row taboverflow" style="padding-top:5px; padding-bottom:5px;">\n                        </div>\n                      </div>\n\n                      <div id="series_'+t+'" style="display:none;">\n                        <div class="row" style="height:150px;">\n                          <div class="col-5">\n                            <div class="row">\n                              <div class="col-12" style="padding-top:5px; padding-bottom:5px;">\n                                <span>Time series period</span>\n                              </div>\n                            </div>\n                            <div class="row">\n                              <div class="col-12" style="padding-top:5px; padding-bottom:5px;">\n                                <select type="text" id="select_period_series_'+t+'" class="form-control">\n                                  <option value="0">-Select-</option>\n                                  <option value="15day">15 Day later</option>\n                                  <option value="6month">6 Month later</option>\n                                  <option value="1year">1 Year later</option>\n                                  <option value="custom">Custom</option>\n                                </select>     \n                              </div>\n                            </div>\n                            <div class="row" id="div_custom_'+t+'" style="display:none;">\n                              <div class="col-3" style="padding-top:5px; padding-bottom:5px;">\n                                <input type="text" class="form-control"/>\n                              </div>\n                              <div class="col-9" style="padding-top:5px; padding-bottom:5px;">\n                                <select type="text" class="form-control">\n                                  <option value="0">-Select-</option>\n                                  <option value="day">Day later</option>\n                                  <option value="week">Week later</option>\n                                  <option value="month">Month later</option>\n                                  <option value="year">Year later</option>\n                                </select>  \n                              </div>\n                            </div>\n                          </div>\n                          <div class="col-7" id="div_preview_canvas_'+t+'_series">\n                            <canvas id="preview_canvas_'+t+'_series"></canvas>\n                          </div>\n                        </div>\n                        <hr>\n                        <div class="row" style="padding-top:5px; padding-bottom:10px; box-shadow: 0 3px 2px -2px grey;">\n                          <div class="col-6">\n                            <span>Set data</span>\n                            <button id="add_new_data_'+t+'_series" class="btn btn-default btn-sm btn-radius"><i class="fas fa-plus"></i>Add new data</button>\n                          </div>\n                          <div class="col-1 mt-2">\n                            <span>X Label </span>\n                          </div>\n                          <div class="col-2">\n                            <input type="text" id="x_label_series_'+t+'" class="form-control" value="'+e.options.scales.xAxes[0].scaleLabel.labelString+'"/>\n                          </div>\n                          <div class="col-1 mt-2">\n                            <span>Y Label </span>\n                          </div>\n                          <div class="col-2">\n                            <input type="text" id="y_label_series_'+t+'" class="form-control" value="'+e.options.scales.yAxes[0].scaleLabel.labelString+'"/>\n                          </div>\n                        </div>\n                        <div id="chart_data_'+t+'_series" class="row taboverflow" style="padding-top:5px; padding-bottom:5px;">\n                        </div>\n                      </div>\n    \n                    </div>\n                    <div class="modal-footer" style="box-shadow: 0 -3px 2px -2px grey;">\n                        <button type="button" id="save_chart_data_'+t+'" class="btn btn-success">Apply</button>\n                    </div>\n                </div>\n            </div>\n        </div>';$("body").append(a),$("#model_edit_chart_data_"+t).modal("show"),"pie"!=n&&"radar"!=n||$("#btn_series_"+t).prop("disabled",!0);var o=$("#canvas_"+t);if($("#btn_classic_"+t).click(function(){s="classic",$("#classic_"+t).fadeIn(),$("#series_"+t).hide(),m(t,o.attr("period-type"),o.attr("start-value"),o.attr("end-value"))}),$("#btn_series_"+t).click(function(){s="series",$("#series_"+t).fadeIn(),$("#classic_"+t).hide()}),"classic"==o.attr("state-mode"))$("#btn_classic_"+t).click(),m(t,o.attr("period-type"),o.attr("start-value"),o.attr("end-value")),k(v=y(e,t,n,"classic")),function(e){for(var a=0;a<e.data.datasets.length;a++){var n=$("#canvas_"+t);null!=n.attr("select-datasource-list")?c.push(n.attr("select-datasource-list").split(",")[a]):c.push(0),null!=n.attr("select-keydata-list")?p.push(n.attr("select-keydata-list").split(",")[a]):p.push("Null"),null!=n.attr("select-agg-list")?u.push(n.attr("select-agg-list").split(",")[a]):u.push(0)}}(v),E(r=function(t,e,a){var n=document.getElementById("preview_canvas_"+t+"_"+a),s=void 0;s="bar"==e||"pie"==e?{datasets:[{label:"Demo Data",data:[{x:new Date(2017,5,11),y:100},{x:new Date(2019,2,21),y:50}],backgroundColor:"#05acd3"}]}:{datasets:[{label:"Demo Data",data:[{x:new Date(2017,5,11),y:100},{x:new Date(2019,2,21),y:50}],backgroundColor:"rgba(255, 255, 255, 0)",borderColor:"#05acd3"}]};return new Chart(n,{type:e,data:s,options:{responsive:!0,maintainAspectRatio:!1,legend:{display:!0,position:"top",labels:{boxWidth:80,fontColor:"black"}},scales:{xAxes:[{type:"time",distribution:"linear",ticks:{source:"auto"},scaleLabel:{display:!0,labelString:"X Label"}}],yAxes:[{scaleLabel:{display:!0,labelString:"Y Label"}}]}}})}(t,n,"series"));else if("series"==o.attr("state-mode")){var r,v;$("#btn_series_"+t).click(),E(r=y(e,t,n,"series")),function(e){for(var a=0;a<e.data.datasets.length;a++){var n=$("#canvas_"+t);null!=n.attr("select-datasource-list-series")?_.push(n.attr("select-datasource-list-series").split(",")[a]):_.push(0),null!=n.attr("select-keydata-list-series")?b.push(n.attr("select-keydata-list-series").split(",")[a]):b.push("Null")}}(r),k(v=function(t,e,a){var n=document.getElementById("preview_canvas_"+t+"_"+a),s=void 0;s="bar"==e||"pie"==e?{labels:["Su","Mo","Tu","We","Th","Fr","Sa"],datasets:[{label:"Demo Data 1",data:[0,59,75,20,20,55,40],backgroundColor:"#05acd3"},{label:"Demo Data 2",data:[0,29,25,20,20,25,20],backgroundColor:"#00ce68"}]}:{labels:["Su","Mo","Tu","We","Th","Fr","Sa"],datasets:[{label:"Demo Data 1",data:[0,59,75,20,20,55,40],backgroundColor:"rgba(255, 255, 255, 0)",borderColor:"#05acd3"},{label:"Demo Data 2",data:[0,29,25,20,20,25,20],backgroundColor:"rgba(255, 255, 255, 0)",borderColor:"#00ce68"}]};return new Chart(n,{type:e,data:s,options:{responsive:!0,maintainAspectRatio:!1,legend:{display:!0,position:"top",labels:{boxWidth:80,fontColor:"black"}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Y Label"}}],xAxes:[{scaleLabel:{display:!0,labelString:"X Label"}}]}}})}(t,n,"classic"))}$("#select_period_series_"+t).change(function(){"custom"==$("#select_period_series_"+t).val()?$("#div_custom_"+t).show():$("#div_custom_"+t).hide()}),$("#btn_daily_"+t).click(function(){v.data.labels=[],i=[];for(var e=0;e<v.data.datasets.length;e++)v.data.datasets.data=[];$("#chart_data_"+t).contents().remove(),k(v)}),$("#btn_monthly_"+t).click(function(){v.data.labels=[],l=[];for(var e=0;e<v.data.datasets.length;e++)v.data.datasets.data=[];$("#chart_data_"+t).contents().remove(),k(v)}),$("#add_new_data_"+t).click(function(){var e=void 0;e="bar"==n||"pie"==n?{label:"New data",data:[100,80,60],backgroundColor:"#343a40"}:{label:"New data",data:[100,80,60],backgroundColor:"rgba(255, 255, 255, 0)",borderColor:"#343a40"},v.data.datasets.push(e),v.update(),$("#chart_data_"+t).contents().remove(),c.push(0),p.push("Null"),u.push(0),k(v)}),$("#add_new_data_"+t+"_series").click(function(){var e=void 0;e="bar"==n||"pie"==n?{label:"New data",data:[{x:new Date("2019","02","15"),y:50}],backgroundColor:"#343a40"}:{label:"New data",data:[{x:new Date("2019","02","15"),y:50}],backgroundColor:"rgba(255, 255, 255, 0)",borderColor:"#343a40"},r.data.datasets.push(e),r.update(),$("#chart_data_"+t+"_series").contents().remove(),_.push(0),b.push("Null"),E(r)}),$("#x_label_classic_"+t).change(function(){v.options.scales.xAxes[0].scaleLabel.labelString=$("#x_label_classic_"+t).val(),v.update()}),$("#y_label_classic_"+t).change(function(){v.options.scales.yAxes[0].scaleLabel.labelString=$("#y_label_classic_"+t).val(),v.update()}),$("#x_label_series_"+t).change(function(){r.options.scales.xAxes[0].scaleLabel.labelString=$("#x_label_series_"+t).val(),r.update()}),$("#y_label_series_"+t).change(function(){r.options.scales.yAxes[0].scaleLabel.labelString=$("#y_label_series_"+t).val(),r.update()}),$("#save_chart_data_"+t).click(function(){"classic"==s?(C(e,v.options),w(e,v.data.labels),x(e,v.data.datasets)):"series"==s&&(C(e,r.options),w(e,r.data.labels),x(e,r.data.datasets));var a=$("#canvas_"+t);a.attr("state-mode",s),a.attr("period-type",d),a.attr("start-value",$("start_"+d+"_"+t).val()),a.attr("end-value",$("end_"+d+"_"+t).val()),$("#canvas_"+t).data("graph",e),$(".propertyMenu-2").html(""),(new M).createGraphProp(t,e,"#div_canvas_"+t,n),$("#model_edit_chart_data_"+t).modal("hide")})})},this.createCropImage=function(t,e,a){var n=void 0;$(".propertyMenu-2-paper").append('                \n          <div class="propertyMenu-2-block">\n            <button type="button" id="crop_image_widget_'+t+'" class="btn btn-default form-control button-width">Crop image</button>     \n          </div>'),$("#crop_image_widget_"+t).click(function(){$("#modelCrop_"+t).remove();var e='\n        <div class="modal" id="modelCrop_'+t+'" class="modelcropper">\n            <div class="modal-dialog">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h4 class="modal-title">Crop image</h4>\n                        <button type="button" class="close" data-dismiss="modal">&times;</button>\n                    </div>\n\n                    <div class="modal-body">\n                        <div class="row">\n                            <div class="col-11 text-center">\n                                <img id="image_crop_'+t+'" style="max-width: 100%; max-height:50%;" />\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="modal-footer">\n                        <button type="button" id="save_image_crop_'+t+'" class="btn btn-success">Save</button>\n                    </div>\n                </div>\n            </div>\n        </div>';$("body").append(e),$("#modelCrop_"+t).modal("show"),$("#image_crop_"+t).attr("src",$(a).attr("src"));var s=document.getElementById("image_crop_"+t);n=new Cropper(s,{}),$("#save_image_crop_"+t).click(function(){$(a).attr("src",n.getCroppedCanvas({width:500,height:500}).toDataURL()),n.destroy(),$("#modelCrop_"+t).modal("hide"),$("#modelCrop_"+t).modal("dispose"),$("#modelCrop_"+t).remove()})})},this.createTextchange=function(t,e){$(".propertyMenu-2-paper").append('                      \n          <div class="propertyMenu-2-block">\n            <div class="container">\n                <div class="row row-block">\n                    <span>Text change</span>\n                </div>\n                <div class="row row-block">\n                    <input type="text" id="inputtext_'+t+'" class="form-control"/>\n                </div>\n            </div>    \n          </div>'),$("#inputtext_"+t).val($("#span_"+t).html()),$("#inputtext_"+t).keyup(function(){$("#span_"+t).html($("#inputtext_"+t).val())})},this.createImportData=function(t,e){$(".propertyMenu-2-paper").append('                \n          <div class="propertyMenu-2-block">\n            <button type="button" class="btn btn-default form-control button-width">Import data</button>    \n          </div>')},this.createScale=function(t,e,a){$(".propertyMenu-2-paper").append('  \n          <div class="propertyMenu-2-block">\n            <div class="container">\n                <div class="row row-block">\n                    <div class="col-6">\n                        <span>Width (px)</span>\n                    </div>\n                    <div class="col-6">\n                        <span>Height (px)</span>\n                    </div>\n                </div>\n                <div class="row row-block">\n                    <div class="col-6">\n                        <input type="text" id="width_'+t+'" class="form-control" />\n                    </div>\n                    <div class="col-6">\n                        <input type="text" id="height_'+t+'" class="form-control" />\n                    </div>\n                </div>\n            </div>    \n          </div>'),$("#width_"+t).val(Math.round($(e).width())),$("#height_"+t).val(Math.round($(e).height())),$("#width_"+t).unbind().change(function(){$(e).css("width",$("#width_"+t).val()),$(e).css("height",$("#height_"+t).val()),"map"==a&&($("#map_"+t).css("width",$("#width_"+t).val()-100),$("#map_"+t).css("height",$("#height_"+t).val()-100))}),$("#height_"+t).unbind().change(function(){$(e).css("width",$("#width_"+t).val()),$(e).css("height",$("#height_"+t).val()),"map"==a&&($("#map_"+t).css("width",$("#width_"+t).val()-100),$("#map_"+t).css("height",$("#height_"+t).val()-100))})},this.createAddColumnAndRow=function(t,e){function a(){var e=new SimpleTableCellEditor("table_"+t);e.SetEditable("td",{keys:{validation:[13],cancellation:[27]}}),e.SetEditable("th",{keys:{validation:[13],cancellation:[27]}})}$(".propertyMenu-2-paper").append('    \n          <div class="propertyMenu-2-block">\n            <div class="container">\n                <div class="row row-block">\n                    <span>New column name</span>\n                </div>\n                <div class="row row-block">\n                    <div class="col-7">\n                        <input type="text" id="column_name_'+t+'" class="form-control"/>\n                    </div>\n                    <div class="col-2">\n                        <button type="button" id="add_column_'+t+'" class="btn btn-default" ><i class="fas fa-angle-right"></i></button>\n                    </div>\n                    <div class="col-1">\n                        <button type="button" id="add_row_'+t+'" class="btn btn-default" ><i class="fas fa-angle-down"></i></button>\n                    </div>\n                </div>\n                <div class="row-block">\n                    <button type="button" id="delete_column_'+t+'" class="btn btn-default form-control button-width">Delete column</button>\n                </div>\n                <div class="row-block">\n                    <button type="button" id="delete_row_'+t+'" class="btn btn-default form-control button-width">Delete row</button>\n                </div>\n            </div>    \n          </div>'),$("#add_column_"+t).unbind().click(function(){for(var n=$(e),s=n[0].rows[0].cells.length,i=0;i<n[0].rows.length;i++){var o=n[0].rows[i];0==i?o.cells[o.cells.length-1].insertAdjacentHTML("afterend","<th>"+$("#column_name_"+t).val()+"</th>"):o.insertCell(s).innerHTML="Data"}a()}),$("#add_row_"+t).unbind().click(function(){for(var n=$(e),s=document.getElementById("table_"+t).insertRow(n[0].rows.length),i=0;i<n[0].rows[0].cells.length;i++){s.insertCell(i).innerHTML="Data"}a()}),$("#delete_column_"+t).unbind().click(function(){for(var t=$(e),a=t[0].rows[0].cells.length,n=0;n<t[0].rows.length;n++){t[0].rows[n].deleteCell(a-1)}}),$("#delete_row_"+t).unbind().click(function(){var a=$(e);document.getElementById("table_"+t).deleteRow(a[0].rows.length-1)})},this.createThemesTable=function(t,e){$(".propertyMenu-2-paper").append('  \n          <div class="propertyMenu-2-block">\n            <div class="container">\n                <div class="row row-block">\n                    <span>Themes</span>\n                </div>\n                <div class="row row-block">\n                    <select type="text" id="themes_table_'+t+'" class="form-control">\n                      <option value="1">Default</option>\n                      <option value="2">Striped</option>\n                      <option value="3">Bordered</option>\n                    </select>\n                </div>\n            </div>    \n          </div>');var a=["table-striped","table-bordered"];document.getElementById("themes_table_"+t).selectedIndex=($(e).attr("table-class")||1)-1,$("#themes_table_"+t).unbind().change(function(){for(var n=document.getElementById("table_"+t).className.split(/\s+/),s=0;s<n.length;s++)a.includes(n[s])&&$(e).removeClass(n[s]);switch($("#themes_table_"+t).val()){case"1":$(e).attr("table-class","1");break;case"2":$(e).addClass("table-striped"),$(e).attr("table-class","2");break;case"3":$(e).addClass("table-bordered"),$(e).attr("table-class","3")}})},this.createColorAndFont=function(t,e){$(".propertyMenu-2-paper").append('    \n          <div class="propertyMenu-2-block">\n            <div class="container">\n                <div class="row row-block">\n                    <div class="col-6 text-align-left">\n                        <span>Color</span>\n                    </div>\n                    <div class="col-6 text-align-left">\n                        <span>Font</span>\n                    </div>\n                </div>\n                <div class="row row-block">\n                    <div class="col-6">\n                        <input type="color" id="color_font_'+t+'" class="form-control">\n                    </div>\n                    <div class="col-6">\n                        <select type="text" id="family_font_'+t+'" class="form-control">\n                          <option value="1">Poppins</option>\n                          <option value="2">Times New Roman</option>\n                          <option value="3">Arial</option>\n                          <option value="4">Arial Black</option>\n                          <option value="5">Georgia</option>\n                          <option value="6">Tahoma</option>\n                          <option value="7">Lucida Console</option>\n                          <option value="8">Courier New</option>\n                        </select>\n                    </div>\n                </div>\n            </div>    \n          </div>'),$("#color_font_"+t).val(function(t){if(!(t=""+t)||t.indexOf("rgb")<0)return;if("#"==t.charAt(0))return t;var e=/(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/i.exec(t),a=parseInt(e[2],10).toString(16),n=parseInt(e[3],10).toString(16),s=parseInt(e[4],10).toString(16);return"#"+((1==a.length?"0"+a:a)+(1==n.length?"0"+n:n)+(1==s.length?"0"+s:s))}($("#span_"+t).css("color"))),document.getElementById("family_font_"+t).selectedIndex=($(e).attr("font-value")||1)-1,$("#color_font_"+t).unbind().change(function(){$("#span_"+t).css("color",$(this).val())}),$("#family_font_"+t).unbind().change(function(){switch($("#family_font_"+t).val()){case"1":$(e).css("font-family","Poppins, Kanit, sans-serif"),$(e).attr("font-value","1");break;case"2":$(e).css("font-family","Times New Roman, Times, serif"),$(e).attr("font-value","2");break;case"3":$(e).css("font-family","Arial, Helvetica, sans-serif"),$(e).attr("font-value","3");break;case"4":$(e).css("font-family","Arial Black, Gadget, sans-serif"),$(e).attr("font-value","4");break;case"5":$(e).css("font-family","Georgia, serif"),$(e).attr("font-value","5");break;case"6":$(e).css("font-family","Tahoma, Geneva, sans-serif"),$(e).attr("font-value","6");break;case"7":$(e).css("font-family","Lucida Console, Monaco, monospace"),$(e).attr("font-value","7");break;case"8":$(e).css("font-family","Courier New, Courier, monospace"),$(e).attr("font-value","8")}})},this.createColorAndDeleteForShape=function(t,e,a,n){function s(t){if((t=""+t)&&!(t.indexOf("rgb")<0)){if("#"==t.charAt(0))return t;var e=/(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/i.exec(t),a=parseInt(e[2],10).toString(16),n=parseInt(e[3],10).toString(16),s=parseInt(e[4],10).toString(16);return"#"+((1==a.length?"0"+a:a)+(1==n.length?"0"+n:n)+(1==s.length?"0"+s:s))}}$(".propertyMenu-2-paper").append(' \n      <div class="propertyMenu-2-block">\n        <div class="container">\n            <div class="row row-block">\n                <span>Color</span>\n            </div>\n            <div class="row row-block">\n                <input type="color" class="form-control" id="color_shape_'+t+'">\n            </div>\n        </div>    \n      </div>'),"square"==n||"circle"==n?(console.log($(a).css("background-color")),$("#color_shape_"+t).val(s($(a).css("background-color"))),$("#color_shape_"+t).unbind().change(function(){$(a).css("background-color",$(this).val())})):"string"==n&&($("#color_shape_"+t).val(s($(a).css("border-right-color"))),$("#color_shape_"+t).unbind().change(function(){$(a).css("border-right-color",$(this).val())}))},this.createStringStyle=function(t,e,a){$(".propertyMenu-2-paper").append('          \n          <div class="propertyMenu-2-block">\n            <div class="container">\n                <div class="row row-block">\n                    <div class="col-4">\n                        <button type="button" id="solid_style_'+t+'" class="btn btn-default" ><i class="fas fa-minus"></i></button>\n                    </div>\n                    <div class="col-4">\n                        <button type="button" id="dotted_style_'+t+'" class="btn btn-default" ><i class="fas fa-ellipsis-h"></i></button>\n                    </div>\n                    <div class="col-4">\n                        <button type="button" id="double_style_'+t+'" class="btn btn-default" ><i class="fas fa-equals"></i></button>\n                    </div>\n                </div>\n            </div>    \n          </div>'),$("#solid_style_"+t).unbind().click(function(){$(a).css("border-right-style","solid")}),$("#dotted_style_"+t).unbind().click(function(){$(a).css("border-right-style","dotted")}),$("#double_style_"+t).unbind().click(function(){$(a).css("border-right-style","double")})},this.createFontSize=function(t,e){$(".propertyMenu-2-paper").append(' \n          <div class="propertyMenu-2-block">\n            <div class="container">\n                <div class="row row-block">\n                    <span>Font size (pt)</span>\n                </div>\n                <div class="row row-block">\n                    <div class="col-8" style="padding-left:0px;">\n                        <input type="range" min="9" max="120" value="9" id="slider_font_widget_'+t+'" class="slider" />\n                    </div>\n                    <div class="col-4">\n                        <input type="text" id="slider_font_input_widget_'+t+'" class="form-control" />\n                    </div>\n                </div>\n            </div>    \n          </div>'),$("#slider_font_widget_"+t).val($(e).css("font-size").replace("px","")),$("#slider_font_input_widget_"+t).val($(e).css("font-size").replace("px","")),$("#slider_font_widget_"+t).unbind().change(function(){$("#slider_font_input_widget_"+t).val($(this).val()),$(e).css("font-size",$(this).val()+"px")}),$("#slider_font_input_widget_"+t).unbind().change(function(){$(this).val()<9||$(this).val()>120?alert("test : 9 - 120"):($("#slider_font_widget_"+t).val($(this).val()),$(e).css("font-size",$(this).val()+"px"))})},this.createRotation=function(t,e){$(".propertyMenu-2-paper").append(' \n          <div class="propertyMenu-2-block">\n            <div class="container">\n                <div class="row row-block">\n                    <span>Rotation</span>\n                </div>\n                <div class="row row-block">\n                    <div class="col-8" style="padding-left:0px;">\n                        <input type="range" min="0" max="360" value="0" id="slider_rotation_widget_'+t+'" class="slider" />\n                    </div>\n                    <div class="col-4">\n                        <input type="text" id="slider_rotation_input_widget_'+t+'" class="form-control" />\n                    </div>\n                </div>\n            </div>    \n          </div>');var a=$(e).attr("data-x"),n=$(e).attr("data-y"),s=$(e).attr("data-z")||0;$("#slider_rotation_widget_"+t).val(s),$("#slider_rotation_input_widget_"+t).val(s),$("#slider_rotation_widget_"+t).unbind().change(function(){var s=$(this).val();$("#slider_rotation_input_widget_"+t).val(s),$(e).attr("data-z",s),$(e).css("transform","translate("+a+"px, "+n+"px) rotate("+s+"deg)")}),$("#slider_rotation_input_widget_"+t).unbind().change(function(){if($(this).val()<0||$(this).val()>360)alert("test : 0 - 360");else{var s=$(this).val();$("#slider_rotation_widget_"+t).val(s),$(e).attr("data-z",s),$(e).css("transform","translate("+a+"px, "+n+"px) rotate("+s+"deg)")}})},this.createTransparency=function(t,e){$(".propertyMenu-2-paper").append('    \n          <div class="propertyMenu-2-block">\n            <div class="container">\n                <div class="row row-block">\n                    <span>Transparency (%)</span>\n                </div>\n                <div class="row row-block">\n                    <div class="col-8" style="padding-left:0px;">\n                        <input type="range" min="0" max="100" value="1" id="slider_tran_widget_'+t+'" class="slider" />\n                    </div>\n                    <div class="col-4">\n                        <input type="text" id="slider_tran_input_widget_'+t+'" class="form-control" />\n                    </div>\n                </div>\n            </div>    \n          </div>'),$("#slider_tran_widget_"+t).val(100-100*$(e).css("opacity")),$("#slider_tran_input_widget_"+t).val(100-100*$(e).css("opacity")),$("#slider_tran_widget_"+t).unbind().change(function(){var a=(100-$(this).val())/100;$("#slider_tran_input_widget_"+t).val($(this).val()),$(e).css("opacity",a)}),$("#slider_tran_input_widget_"+t).unbind().change(function(){if($(this).val()<0||$(this).val()>100)alert("test : 0 - 100");else{var a=(100-$(this).val())/100;$("#slider_tran_widget_"+t).val($(this).val()),$(e).css("opacity",a)}})},this.createBorderRadius=function(t,e,a){$(".propertyMenu-2-paper").append(' \n          <div class="propertyMenu-2-block">\n            <div class="container">\n                <div class="row row-block">\n                    <span>Border radius (%)</span>\n                </div>\n                <div class="row row-block">\n                    <div class="col-8" style="padding-left:0px;">\n                        <input type="range" min="0" max="50" value="0" id="slider_radius_widget_'+t+'" class="slider" />\n                    </div>\n                    <div class="col-4">\n                        <input type="text" id="slider_radius_input_widget_'+t+'" class="form-control" />\n                    </div>\n                </div>\n            </div>    \n          </div>'),$("#slider_radius_widget_"+t).val($(a).css("border-radius").replace("%","")),$("#slider_radius_input_widget_"+t).val($(a).css("border-radius").replace("%","")),$("#slider_radius_widget_"+t).unbind().change(function(){var e=$(this).val();$("#slider_radius_input_widget_"+t).val($(this).val()),$(a).css("border-radius",e+"%")}),$("#slider_radius_input_widget_"+t).unbind().change(function(){if($(this).val()<0||$(this).val()>50)alert("test : 0 - 50");else{var e=$(this).val();$("#slider_radius_widget_"+t).val($(this).val()),$(a).css("border-radius",e+"%")}})},this.createBorderWidth=function(t,e,a){$(".propertyMenu-2-paper").append(' \n          <div class="propertyMenu-2-block">\n            <div class="container">\n                <div class="row row-block">\n                    <span>Border width (px)</span>\n                </div>\n                <div class="row row-block">\n                    <div class="col-8" style="padding-left:0px;">\n                        <input type="range" min="5" max="20" value="0" id="slider_width_widget_'+t+'" class="slider" />\n                    </div>\n                    <div class="col-4">\n                        <input type="text" id="slider_width_input_widget_'+t+'" class="form-control" />\n                    </div>\n                </div>\n            </div>    \n          </div>'),$("#slider_width_widget_"+t).val($(a).css("border-right-width").replace("px","")),$("#slider_width_input_widget_"+t).val($(a).css("border-right-width").replace("px","")),$("#slider_width_widget_"+t).unbind().change(function(){var e=$(this).val();$("#slider_width_input_widget_"+t).val($(this).val()),$(a).css("border-right-width",e+"px")}),$("#slider_width_input_widget_"+t).unbind().change(function(){if($(this).val()<5||$(this).val()>20)alert("test : 0 - 50");else{var e=$(this).val();$("#slider_width_widget_"+t).val($(this).val()),$(a).css("border-right-width",e+"px")}})},this.createChartDetail=function(t,e,a){$(".propertyMenu-2-paper").append('  \n          <div class="propertyMenu-2-block">\n            <div class="container">\n                <div class="row row-block">\n                    <span>Chart properties</span>\n                </div>\n                <div id="color_and_text_'+t+'">\n                </div>\n            </div>    \n          </div>');for(var n=0;n<a.data.datasets.length;n++)$("#color_and_text_"+t).append('   \n              <div class="row row-block">\n                <div class="col-4">\n                    <input type="color" id="color_chart_'+t+"_"+n+'" class="form-control" value="'+a.data.datasets[n].borderColor+'">\n                </div>\n                <div class="col-8">\n                    <input type="text" id="label_chart_'+t+"_"+n+'" class="form-control" value="'+a.data.datasets[n].label+'" />\n                </div>\n              </div>'),$("#color_chart_"+t+"_"+n).change(s(a,n)),$("#label_chart_"+t+"_"+n).keyup(i(a,n));function s(e,a){return function(){e.data.datasets[a].borderColor=$("#color_chart_"+t+"_"+a).val(),e.update(),$("#canvas_"+t).data("graph",e)}}function i(e,a){return function(){e.data.datasets[a].label=$("#label_chart_"+t+"_"+a).val(),e.update(),$("#canvas_"+t).data("graph",e)}}},this.createMapEvent=function(t,e){t.on("mousemove",function(){return void interact(e).draggable(!1)}),t.on("mouseout",function(){return void interact(e).draggable(!0)})}},M=function(t){function e(){p(this,e);var t=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.createGraphProp=function(e,a,n,s){t.createContext(e,n,s,a),t.createEditdata(e,a,n,s),t.createScale(e,n,s),t.createRotation(e,n),t.createTransparency(e,n),t.createChartDetail(e,n,a)},t.createMapProp=function(e,a,n,s){t.createContext(e,a,n,null),t.createScale(e,a,n),t.createRotation(e,a),t.createTransparency(e,a),t.createMapEvent(s,a)},t.createTextProp=function(e,a,n){t.createContext(e,a,n,null),t.createTextchange(e,a),t.createScale(e,a,n),t.createRotation(e,a),t.createTransparency(e,a),t.createColorAndFont(e,a),t.createFontSize(e,a)},t.createTableProp=function(e,a,n){t.createContext(e,a,n,null),t.createImportData(e,a),t.createScale(e,a,n),t.createAddColumnAndRow(e,a),t.createThemesTable(e,a),t.createRotation(e,a),t.createTransparency(e,a)},t.createImageProp=function(e,a,n,s){t.createContext(e,a,s,null),t.createCropImage(e,a,n),t.createScale(e,a,s),t.createRotation(e,a),t.createTransparency(e,a),t.createBorderRadius(e,a,n)},t.createShapeProp=function(e,a,n,s){t.createContext(e,a,s,null),t.createColorAndDeleteForShape(e,a,n,s),"string"==s&&t.createStringStyle(e,a,n),t.createScale(e,a,s),t.createRotation(e,a),t.createTransparency(e,a),"string"==s?t.createBorderWidth(e,a,n):t.createBorderRadius(e,a,n)},t}return c(e,A),e}();$(document).ready(function(){var t=new function t(){p(this,t),this.initialAndRun=function(){$("#btn-add-datasource").unbind().click(function(){(new s.default).DataSourceModel(v)}),$("#btnGraph").unbind().click(function(){e(),console.log("test")}),$("#btnMap").unbind().click(function(){a()}),$("#btnFont").unbind().click(function(){n()}),$("#btnImage").unbind().click(function(){i()}),$("#btnShapes").unbind().click(function(){o()}),$("#btn_save").unbind().click(function(){for(var t=0;t<h.length;t++)if("line"==h[t].type||"bar"==h[t].type||"pie"==h[t].type||"radar"==h[t].type){var e=$("#canvas_"+h[t].id).data("graph");h[t].canvasTag=document.getElementById("div_canvas_"+h[t].id).outerHTML,console.log(e.data),console.log(e.options),h[t].chartData=e.data,h[t].chartOption=e.options,console.log(h[t].chartData),console.log(h[t].chartOption)}else"map"==h[t].type?h[t].mapTag=document.getElementById("div_map_"+h[t].id).outerHTML:"head"==h[t].type?h[t].spanTag=document.getElementById("span_"+h[t].id).outerHTML:"table"==h[t].type?h[t].tableTag=document.getElementById("table_"+h[t].id).outerHTML:"image"==h[t].type?h[t].divImgTag=document.getElementById("div_"+h[t].id).outerHTML:"square"!=h[t].type&&"circle"!=h[t].type&&"string"!=h[t].type||(h[t].divTag=document.getElementById("div_"+h[t].id).outerHTML);$.ajax({url:"http://localhost:8000/api/infographic/updateInfoData",method:"PUT",data:{info_id:v,info_data:b.stringify(h)},success:function(t){alert("success")},error:function(t){alert("error")}})}),$("#btn_fullscreen").unbind().click(function(){var t=window.open();t.document.write("<h1 id='loading'>Loading...</h1>"),$(".sPosition").removeClass("fCorner"),$(".propertyMenu-2").html(""),html2canvas(document.querySelector("#workspace")).then(function(e){var a='<img src="'+e.toDataURL("image/png")+'">';t.document.write(a),t.document.title="Preview",t.document.getElementById("loading").remove()})}),$("#btn_download_list a").unbind().click(function(){var t=$(this).attr("valuetype"),e=window.open();e.document.write("<h1>Please wait for download...</h1>"),$(".sPosition").removeClass("fCorner"),$(".propertyMenu-2").html(""),html2canvas(document.querySelector("#workspace")).then(function(a){e.close();var n=a.toDataURL("image/png");if("pdf"==t){var s=new jsPDF,i=s.internal.pageSize.getWidth(),o=s.internal.pageSize.getHeight();s.addImage(n,"PNG",0,0,i,o),s.save(_+".pdf")}else if("image"==t){var r=document.createElement("a");r.href=n,r.setAttribute("download",_+".png");var l=document.createEvent("MouseEvents");l.initEvent("click",!1,!0),r.dispatchEvent(l)}})})},this.loadWidgetData=function(t){for(var e=0;e<t.length;e++)"line"==t[e].type||"bar"==t[e].type||"pie"==t[e].type||"radar"==t[e].type?(new y).loadGraphData(t[e].id,t[e].canvasTag,t[e].chartData,t[e].chartOption,t[e].type):"map"==t[e].type?(new w).loadMapWidget(t[e].id,t[e].mapTag):"head"==t[e].type?(new x).loadHeadGraph(t[e].id,t[e].spanTag):"table"==t[e].type?(new x).loadTableWidget(t[e].id,t[e].tableTag):"image"==t[e].type?(new C).loadImageWidget(t[e].id,t[e].divImgTag):"square"!=t[e].type&&"circle"!=t[e].type&&"string"!=t[e].type||(new k).loadShapeWidget(t[e].id,t[e].divTag,t[e].type)};var e=function(){$("#btnGraph").hasClass("actives")?r("btnGraph"):(l("btnGraph"),$("#selectMenu").html('\n            <div class="row select-menu-2-context">\n              <span>Add graph</span>\n            </div>\n            <div class="row select-menu-2-paper">\n              <div id="g1" class="row select-menu-2-block">\n                <img src="'+u+'/graph/line.png" class="image-back" style="width:60%; height:60%;"/>\n                <div class="row select-menu-2-title"><span>Line</span></div>\n                <div class="middle-center"><div class="text-popup">Insert</div></div>\n              </div>\n              <div id="g2" class="row select-menu-2-block">\n                <img src="'+u+'/graph/bar.png" class="image-back" style="width:60%; height:60%;"/>\n                <div class="row select-menu-2-title"><span>Bar</span></div>\n                <div class="middle-center"><div class="text-popup">Insert</div></div>\n              </div>\n              <div id="g3" class="row select-menu-2-block">\n                <img  src="'+u+'/graph/pie.png" class="image-back" style="width:60%; height:60%;"/>\n                <div class="row select-menu-2-title"><span>Pie</span></div>\n                <div class="middle-center"><div class="text-popup">Insert</div></div>\n              </div>\n              <div id="g4" class="row select-menu-2-block">\n                <img  src="'+u+'/graph/radar.png" class="image-back" style="width:60%; height:60%;"/>\n                <div class="row select-menu-2-title"><span>Radar</span></div>\n                <div class="middle-center"><div class="text-popup">Insert</div></div>\n              </div>\n            </div>'),$("#g1").unbind().click(function(){(new y).createLineGraph()}),$("#g2").unbind().click(function(){(new y).createBarGraph()}),$("#g3").unbind().click(function(){(new y).createPieGraph()}),$("#g4").unbind().click(function(){(new y).createRadarGraph()}))},a=function(){$("#btnMap").hasClass("actives")?r("btnMap"):(l("btnMap"),$("#selectMenu").html('\n            <div class="row select-menu-2-context">\n              <span>Add map</span>\n            </div>\n            <div class="row select-menu-2-paper">\n              <div id="m1" class="row select-menu-2-block">\n                <img src="'+u+'/map/map.png" class="image-back" style="width:60%; height:60%;"/>\n                <div class="row select-menu-2-title"><span>Thailand</span></div>\n                <div class="middle-center"><div class="text-popup">Insert</div></div>\n              </div>\n            </div>'),$("#m1").unbind().click(function(){(new w).createMapWidget()}))},n=function(){$("#btnFont").hasClass("actives")?r("btnFont"):(l("btnFont"),$("#selectMenu").html('\n            <div class="row select-menu-2-context">\n              <span>Add text</span>\n            </div>\n            <div class="row select-menu-2-paper">\n              <div id="f1" class="row select-menu-2-block">\n                <img src="'+u+'/font/head.png" class="image-back" style="width:60%; height:60%;"/>\n                <div class="row select-menu-2-title"><span>Title</span></div>\n                <div class="middle-center"><div class="text-popup">Insert</div></div>\n              </div>\n              <div id="f2" class="row select-menu-2-block">\n                <img src="'+u+'/font/subtitle.png" class="image-back" style="width:60%; height:60%;"/>\n                <div class="row select-menu-2-title"><span>Subtitle</span></div>\n                <div class="middle-center"><div class="text-popup">Insert</div></div>\n              </div>\n              <div id="f3" class="row select-menu-2-block">\n                <img src="'+u+'/font/table.png" class="image-back" style="width:60%; height:60%;"/>\n                <div class="row select-menu-2-title"><span>Table</span></div>\n                <div class="middle-center"><div class="text-popup">Insert</div></div>\n              </div>\n            </div>'),$("#f1").unbind().click(function(){(new x).createHeadGraph("title")}),$("#f2").unbind().click(function(){(new x).createHeadGraph("subtitle")}),$("#f3").unbind().click(function(){(new x).createTableGraph()}))},i=function(){$("#btnImage").hasClass("actives")?r("btnImage"):(l("btnImage"),$("#selectMenu").html('\n            <div class="row select-menu-2-context">\n              <span>Add image</span>\n            </div>\n            <div class="row select-menu-2-paper">\n              <div id="i1" class="row select-menu-2-block">\n                <img src="'+u+'/image/browse.png" class="image-back" style="width:60%; height:60%;"/>\n                <div class="row select-menu-2-title"><span>Browse</span></div>\n                <div class="middle-center"><div class="text-popup">Insert</div></div>\n              </div>\n              <input type="file" id="inputfile_image" style="display:none;" />\n            </div>'),$("#i1").unbind().click(function(){var t=new C;$("#inputfile_image").click(),$("#inputfile_image").change(function(){var e=new FileReader;e.readAsDataURL($(this)[0].files[0]),e.onload=function(e){t.createImageWidget(e.target.result),$("#btnImage").click(),$("#btnImage").click()}})}))},o=function(){$("#btnShapes").hasClass("actives")?r("btnShapes"):(l("btnShapes"),$("#selectMenu").html('\n            <div class="row select-menu-2-context">\n              <span>Add text</span>\n            </div>\n            <div class="row select-menu-2-paper">\n              <div id="s1" class="row select-menu-2-block">\n                <img src="'+u+'/shape/square.png" class="image-back" style="width:60%; height:60%;"/>\n                <div class="row select-menu-2-title"><span>Square</span></div>\n                <div class="middle-center"><div class="text-popup">Insert</div></div>\n              </div>\n              <div id="s2" class="row select-menu-2-block">\n                <img src="'+u+'/shape/circle.png" class="image-back" style="width:60%; height:60%;"/>\n                <div class="row select-menu-2-title"><span>Circle</span></div>\n                <div class="middle-center"><div class="text-popup">Insert</div></div>\n              </div>\n              <div id="s3" class="row select-menu-2-block">\n                <img src="'+u+'/shape/string.png" class="image-back" style="width:60%; height:60%;"/>\n                <div class="row select-menu-2-title"><span>String</span></div>\n                <div class="middle-center"><div class="text-popup">Insert</div></div>\n              </div>\n            </div>'),$("#s1").unbind().click(function(){(new k).createShapeWidget("square")}),$("#s2").unbind().click(function(){(new k).createShapeWidget("circle")}),$("#s3").unbind().click(function(){(new k).createShapeWidget("string")}))},r=function(t){$("#"+t).removeClass("actives"),$("#selectMenu").html(""),$("#selectMenu").hide()},l=function(t){$("#selectMenu").show(),$(".vertical-menu").find("a").removeClass("actives"),$("#"+t).addClass("actives")}},e=null;t.initialAndRun({}),$.ajax({url:"http://localhost:8000/api/infographic/getInfoByInfoID",method:"GET",data:{info_id:v},success:function(a){null!=a.data.info_data&&(e=b.parse(a.data.info_data),t.loadWidgetData(e))},error:function(t){console.log("error")}})});var S=function(t){return t.map(function(t){return Object.assign({},t)})}}});