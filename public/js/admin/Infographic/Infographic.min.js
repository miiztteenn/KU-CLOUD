!function(t){var e={};function a(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="http://localhost:8080/",a(a.s=19)}({"0v0P":function(t,e,a){"use strict";a.d(e,"f",function(){return i}),a.d(e,"e",function(){return s}),a.d(e,"j",function(){return r}),a.d(e,"a",function(){return l}),e.b=function(t){var e=$(t.parent).find("input, textarea, select");e.each(function(){$(this).change(function(){var a=$(this),n={},i="";e.each(function(){i=$(this).attr("name");var t=$(this).val();n[i]=""==t?null:t});var s=validate(n,t.validate)||{};console.log(a,s),d(a,s[a.attr("name")])})})},e.d=function(t){var e=$(t.parent).find("input, textarea, select"),a=!0,n={};e.each(function(){var t=$(this).attr("name"),e=$(this).val();n[t]=""==e?null:e});var i=validate(n,t.validate)||{};validate.isEmpty(i)?a=!1:(!function(t,e){var a=$(t.parent).find("input, textarea, select");console.log(e);var n=Object.keys(e);a.each(function(){var t=$(this),a=t.attr("name");n.map(function(n){n===a&&d(t,e[a])})})}(t,i),a=!0);return console.log("isError = "+a),a},e.k=function(){$("input, textarea, select").removeClass("has-success"),$("input, textarea, select").removeClass("has-error"),$(".messages-error").html("")},e.h=function(t){var e={};return function t(a,i){Array.isArray(a)?a.forEach(function(e,a){t(e,i.concat(a))}):null===a||"object"!==(void 0===a?"undefined":n(a))?e[i.join("/")]=a:Object.keys(a).forEach(function(e){t(a[e],i.concat(e))})}(t,[]),e},e.i=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},e.g=function(t,e){var a=(t.getTime()-e.getTime())/1e3;return a/=3600,Math.abs(Math.round(a))},e.c=function(t){if(t.getResponseHeader("authorization")){var e=t.getResponseHeader("authorization").split(" ")[1];setCookie("token",e)}};var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(t){return t.map(function(t){return Object.assign({},t)})},s=function(t,e){return t=t.replace("#",""),"rgba("+parseInt(t.substring(0,2),16)+","+parseInt(t.substring(2,4),16)+","+parseInt(t.substring(4,6),16)+","+e/100+")"},r=function(){return"#"+(16777215*Math.random()<<0).toString(16)},o=null,l={set:function(t){o=t.html();var e=t.attr("data-loading-text");t.html(e),t.prop("disabled",!0)},reset:function(t){t.html(o),t.prop("disabled",!1)}};function d(t,e){validate.isEmpty(e)?(t.removeClass("has-error"),t.addClass("has-success"),t.parent().find(".messages-error").html("")):(t.removeClass("has-success"),t.addClass("has-error"),t.parent().find(".messages-error").html(e[0]))}},19:function(t,e,a){t.exports=a("k1SS")},"5P9E":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}();var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,[{key:"WidgetGraphObject",value:function(t,e,a,n,i){this.id=t,this.canvasTag=e,this.chartData=a,this.chartOption=n,this.type=i}},{key:"MapWidgetObject",value:function(t,e,a){this.id=t,this.mapTag=e,this.type=a}},{key:"HeadFontObject",value:function(t,e,a){this.id=t,this.spanTag=e,this.type=a}},{key:"WidgetTableObject",value:function(t,e,a){this.id=t,this.tableTag=e,this.type=a}},{key:"WidgetImageObject",value:function(t,e,a){this.id=t,this.divImgTag=e,this.type=a}},{key:"WidgetShapeObject",value:function(t,e,a){this.id=t,this.divTag=e,this.type=a}}]),t}();e.default=i},RASp:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}();var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,[{key:"DataSourceModel",value:function(t){$("#addDatasource").remove();$("body").append('\n        <div class="modal fade" id="addDatasource">\n            <div class="modal-dialog modal-lg">\n                <div class="modal-content">\n\n                    <div class="modal-header">\n                        <h4 class="modal-title">Add Datasource</h4>\n                        <button type="button" class="close" data-dismiss="modal">&times;</button>\n                    </div>\n\n                    <div class="modal-body">\n                        <div class="row">\n                            <div class="col-12">\n                                <label for="">Name</label>\n                                <input type="text" id="name_datasource" class="form-control">\n                            </div>\n                        </div>\n                        <div class="row">\n                            <div class="col-6">\n                                <label for="">Channel</label>\n                                <select name="" id="webservice_id" class="form-control">\n                                    <option value="">--Select Channel--</option>\n                                </select>\n                            </div>\n                            <div class="col-6">\n                                <label for="">Set time interval (s)</label>\n                                <input type="number" id="add-data-time-interval" class="form-control">\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="modal-footer">\n                        <a class="btn btn-success btn-block" id="btn-add-new-datasource" href="#">Save</a>\n                    </div>\n                </div>\n            </div>\n        </div>'),$("#addDatasource").modal("show"),$.ajax({url:"http://localhost:8000/api/company/webservices",success:function(t){t.data.map(function(t){$("#webservice_id").append('<option value="'+t.webservice_id+'">'+t.service_name+"</option>")})},error:function(t){console.log(t)}}),$("#btn-add-new-datasource").unbind().click(function(){$.ajax({url:"http://localhost:8000/api/admin/infographic/createDatasource",method:"POST",data:{info_id:t,name:$("#name_datasource").val(),webservice_id:$("#webservice_id").val(),timeInterval:$("#add-data-time-interval").val()},success:function(t){$("#addDatasource").modal("hide")},error:function(t){console.log(t)}})})}}]),t}();e.default=i},SeUI:function(t,e,a){var n,i,s;!function(a,r){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=r():(i=[],void 0===(s="function"==typeof(n=r)?n.apply(e,i):n)||(t.exports=s))}(0,function(){"use strict";var t=Object.prototype.toString;function e(t,e){return null!=t&&Object.prototype.hasOwnProperty.call(t,e)}function a(t){if(!t)return!0;if(i(t)&&0===t.length)return!0;if("string"!=typeof t){for(var a in t)if(e(t,a))return!1;return!0}return!1}function n(e){return t.call(e)}var i=Array.isArray||function(e){return"[object Array]"===t.call(e)};function s(t){var e=parseInt(t);return e.toString()===t?e:t}function r(t){t=t||{};var r=function(t){return Object.keys(r).reduce(function(e,a){return"create"===a?e:("function"==typeof r[a]&&(e[a]=r[a].bind(r,t)),e)},{})};function o(a,n){return t.includeInheritedProps||"number"==typeof n&&Array.isArray(a)||e(a,n)}function l(t,e){if(o(t,e))return t[e]}function d(t,e,a,n){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if("string"==typeof e)return d(t,e.split(".").map(s),a,n);var i=e[0],r=l(t,i);return 1===e.length?(void 0!==r&&n||(t[i]=a),r):(void 0===r&&("number"==typeof e[1]?t[i]=[]:t[i]={}),d(t[i],e.slice(1),a,n))}return r.has=function(a,n){if("number"==typeof n?n=[n]:"string"==typeof n&&(n=n.split(".")),!n||0===n.length)return!!a;for(var r=0;r<n.length;r++){var o=s(n[r]);if(!("number"==typeof o&&i(a)&&o<a.length||(t.includeInheritedProps?o in Object(a):e(a,o))))return!1;a=a[o]}return!0},r.ensureExists=function(t,e,a){return d(t,e,a,!0)},r.set=function(t,e,a,n){return d(t,e,a,n)},r.insert=function(t,e,a,n){var s=r.get(t,e);n=~~n,i(s)||(s=[],r.set(t,e,s)),s.splice(n,0,a)},r.empty=function(t,e){var s,l;if(!a(e)&&(null!=t&&(s=r.get(t,e)))){if("string"==typeof s)return r.set(t,e,"");if(function(t){return"boolean"==typeof t||"[object Boolean]"===n(t)}(s))return r.set(t,e,!1);if("number"==typeof s)return r.set(t,e,0);if(i(s))s.length=0;else{if(!function(t){return"object"==typeof t&&"[object Object]"===n(t)}(s))return r.set(t,e,null);for(l in s)o(s,l)&&delete s[l]}}},r.push=function(t,e){var a=r.get(t,e);i(a)||(a=[],r.set(t,e,a)),a.push.apply(a,Array.prototype.slice.call(arguments,2))},r.coalesce=function(t,e,a){for(var n,i=0,s=e.length;i<s;i++)if(void 0!==(n=r.get(t,e[i])))return n;return a},r.get=function(t,e,a){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if(null==t)return a;if("string"==typeof e)return r.get(t,e.split("."),a);var n=s(e[0]),i=l(t,n);return void 0===i?a:1===e.length?i:r.get(t[n],e.slice(1),a)},r.del=function(t,e){if("number"==typeof e&&(e=[e]),null==t)return t;if(a(e))return t;if("string"==typeof e)return r.del(t,e.split("."));var n=s(e[0]);return o(t,n)?1!==e.length?r.del(t[n],e.slice(1)):(i(t)?t.splice(n,1):delete t[n],t):t},r}var o=r();return o.create=r,o.withInheritedProps=r({includeInheritedProps:!0}),o})},k1SS:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("5P9E"),i=a("RASp"),s=a("SeUI"),r=a.n(s),o=a("0v0P");function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var p=$("#pathImg").val(),u=$("#infoID").val(),v=window.CircularJSON,f=[],_={2016:{RelativeHumidity:"50",VaporPressure:"40",LandVisibility:"30",WindDirection:"20",WindSpeed:"10",Rainfall:"5"},2017:{RelativeHumidity:"100",VaporPressure:"80",LandVisibility:"70",WindDirection:"10",WindSpeed:"10",Rainfall:"50"},2018:{RelativeHumidity:"90",VaporPressure:"85",LandVisibility:"45",WindDirection:"24",WindSpeed:"55",Rainfall:"8"}},b={dataTimeSeries:[{RelativeHumidity:"90",VaporPressure:"85",LandVisibility:"45",WindDirection:"24",WindSpeed:"55",Rainfall:"8"},{RelativeHumidity:"100",VaporPressure:"80",LandVisibility:"70",WindDirection:"10",WindSpeed:"10",Rainfall:"50"},{RelativeHumidity:"50",VaporPressure:"40",LandVisibility:"30",WindDirection:"20",WindSpeed:"10",Rainfall:"5"}]},h=function t(){c(this,t),this.createWidget=function(t,a){return interact("#"+a+t).draggable({autoScroll:!0,inertia:!0,restrict:{restriction:"parent",endOnly:!0,elementRect:{top:0,left:0,bottom:1,right:1}}}).resizable({edges:{left:!0,right:!0,bottom:!0,top:!0},restrictEdges:{outer:"parent",endOnly:!0},restrictSize:{min:{width:100,height:50}},inertia:!0}).on("doubletap",function(){$(".sPosition").removeClass("fCorner"),$(".propertyMenu-2").html("")}).on("resizemove",function(n){e(t,a);var i=n.target,s=parseFloat(i.getAttribute("data-x"))||0,r=parseFloat(i.getAttribute("data-y"))||0,o=parseFloat(i.getAttribute("data-z"))||0;i.style.width=n.rect.width+"px",i.style.height=n.rect.height+"px",s+=n.deltaRect.left,r+=n.deltaRect.top,i.style.webkitTransform=i.style.transform="translate("+s+"px,"+r+"px) rotate("+o+"deg)",i.setAttribute("data-x",s),i.setAttribute("data-y",r),i.setAttribute("data-z",o),$("#width_"+t).val(Math.round(n.rect.width)),$("#height_"+t).val(Math.round(n.rect.height)),$("#width_"+t).change(),$("#height_"+t).change()})};var e=function(t,e){$(".sPosition").removeClass("fCorner"),$("#"+e+t).addClass("fCorner")};this.clearfocus=function(){$(".sPosition").removeClass("fCorner")}},g=function(t){function e(){c(this,e);var t=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));t.createLineGraph=function(){var e=Math.floor(1e5+9e5*Math.random());t.clearfocus(),$("#workspace").append('<div id="div_canvas_'+e+'" class="sPosition fCorner"><canvas id="canvas_'+e+'"/></div>'),console.log(new Date(2017,5,11));var a={datasets:[{label:"Density",data:[{x:new Date(2017,5,11),y:100},{x:new Date(2019,2,21),y:101}],backgroundColor:"rgba(255, 255, 255, 0)",borderColor:"#05acd3"}]},i=$("#canvas_"+e),s=new Chart(i,{type:"line",data:a,options:{responsive:!0,maintainAspectRatio:!1,legend:{display:!0,position:"top",labels:{boxWidth:80,fontColor:"black"}},scales:{xAxes:[{type:"time",distribution:"linear",ticks:{source:"auto"}}]}}});i.data("graph",s),$(".propertyMenu-2").html(""),(new k).createGraphProp(e,s,"#div_canvas_"+e,"line"),t.createWidget(e,"div_canvas_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#div_canvas_"+e).addClass("fCorner"),$(".propertyMenu-2").html(""),(new k).createGraphProp(e,s,"#div_canvas_"+e,"line")}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#div_canvas_"+e).addClass("fCorner");var a=t.target,n=(parseFloat(a.getAttribute("data-x"))||0)+t.dx,i=(parseFloat(a.getAttribute("data-y"))||0)+t.dy,r=parseFloat(a.getAttribute("data-z"))||0;a.style.webkitTransform=a.style.transform="translate("+n+"px, "+i+"px) rotate("+r+"deg)",a.setAttribute("data-x",n),a.setAttribute("data-y",i),a.setAttribute("data-z",r),$(".propertyMenu-2").html(""),(new k).createGraphProp(e,s,"#div_canvas_"+e,"line")});var r=new n.default;console.log(s.options),r.WidgetGraphObject(e,null,null,null,"line"),console.log(r.chartOption),f.push(r),f=M(f),console.log(f[0].chartOption)},t.createBarGraph=function(){var e=Math.floor(1e5+9e5*Math.random());t.clearfocus(),$("#workspace").append('<div id="div_canvas_'+e+'" class="sPosition fCorner"><canvas id="canvas_'+e+'"/></div>');var a=$("#canvas_"+e),i=new Chart(a,{type:"bar",data:{labels:["Su","Mo","Tu","We","Th","Fr","Sa"],datasets:[{label:"Density",data:[0,59,75,20,20,55,40],backgroundColor:"#05acd3"},{label:"Pressure",data:[0,29,25,20,20,25,20],backgroundColor:"#00ce68"}]},options:{responsive:!0,maintainAspectRatio:!1,legend:{display:!0,position:"top",labels:{boxWidth:80,fontColor:"black"}}}});a.data("graph",i),$(".propertyMenu-2").html(""),(new k).createGraphProp(e,i,"#div_canvas_"+e,"bar"),t.createWidget(e,"div_canvas_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#div_canvas_"+e).addClass("fCorner"),$(".propertyMenu-2").html(""),(new k).createGraphProp(e,i,"#div_canvas_"+e,"bar")}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#div_canvas_"+e).addClass("fCorner");var a=t.target,n=(parseFloat(a.getAttribute("data-x"))||0)+t.dx,s=(parseFloat(a.getAttribute("data-y"))||0)+t.dy,r=parseFloat(a.getAttribute("data-z"))||0;a.style.webkitTransform=a.style.transform="translate("+n+"px, "+s+"px) rotate("+r+"deg)",a.setAttribute("data-x",n),a.setAttribute("data-y",s),a.setAttribute("data-z",r),$(".propertyMenu-2").html(""),(new k).createGraphProp(e,i,"#div_canvas_"+e,"bar")});var s=new n.default;console.log(i.options),s.WidgetGraphObject(e,null,i.data,i.options,"bar"),console.log(s.chartOption),f.push(s),f=M(f),console.log(f[0].chartOption)},t.createPieGraph=function(){var e=Math.floor(1e5+9e5*Math.random());t.clearfocus(),$("#workspace").append('<div id="div_canvas_'+e+'" class="sPosition fCorner"><canvas id="canvas_'+e+'"/></div>');var a=$("#canvas_"+e),i=new Chart(a,{type:"pie",data:{labels:["Su","Mo","Tu","We","Th","Fr","Sa"],datasets:[{label:"Density",data:[0,59,75,20,20,55,40],backgroundColor:"#05acd3"},{label:"Pressure",data:[0,29,25,20,20,25,20],backgroundColor:"#00ce68"}]},options:{responsive:!0,maintainAspectRatio:!1,legend:{display:!0,position:"top",labels:{boxWidth:80,fontColor:"black"}}}});a.data("graph",i),$(".propertyMenu-2").html(""),(new k).createGraphProp(e,i,"#div_canvas_"+e,"pie"),t.createWidget(e,"div_canvas_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#div_canvas_"+e).addClass("fCorner"),$(".propertyMenu-2").html(""),(new k).createGraphProp(e,i,"#div_canvas_"+e,"pie")}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#div_canvas_"+e).addClass("fCorner");var a=t.target,n=(parseFloat(a.getAttribute("data-x"))||0)+t.dx,s=(parseFloat(a.getAttribute("data-y"))||0)+t.dy,r=parseFloat(a.getAttribute("data-z"))||0;a.style.webkitTransform=a.style.transform="translate("+n+"px, "+s+"px) rotate("+r+"deg)",a.setAttribute("data-x",n),a.setAttribute("data-y",s),a.setAttribute("data-z",r),$(".propertyMenu-2").html(""),(new k).createGraphProp(e,i,"#div_canvas_"+e,"pie")});var s=new n.default;console.log(i.options),s.WidgetGraphObject(e,null,i.data,i.options,"pie"),console.log(s.chartOption),f.push(s),f=M(f),console.log(f[0].chartOption)},t.createRadarGraph=function(){var e=Math.floor(1e5+9e5*Math.random());t.clearfocus(),$("#workspace").append('<div id="div_canvas_'+e+'" class="sPosition fCorner"><canvas id="canvas_'+e+'"/></div>');var a=$("#canvas_"+e),i=new Chart(a,{type:"radar",data:{labels:["Su","Mo","Tu","We","Th","Fr","Sa"],datasets:[{label:"Density",data:[0,59,75,20,20,55,40],backgroundColor:"rgba(255, 255, 255, 0)",borderColor:"#05acd3"},{label:"Pressure",data:[0,29,25,20,20,25,20],backgroundColor:"rgba(255, 255, 255, 0)",borderColor:"#00ce68"}]},options:{responsive:!0,maintainAspectRatio:!1,legend:{display:!0,position:"top",labels:{boxWidth:80,fontColor:"black"}}}});a.data("graph",i),$(".propertyMenu-2").html(""),(new k).createGraphProp(e,i,"#div_canvas_"+e,"radar"),t.createWidget(e,"div_canvas_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#div_canvas_"+e).addClass("fCorner"),$(".propertyMenu-2").html(""),(new k).createGraphProp(e,i,"#div_canvas_"+e,"radar")}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#div_canvas_"+e).addClass("fCorner");var a=t.target,n=(parseFloat(a.getAttribute("data-x"))||0)+t.dx,s=(parseFloat(a.getAttribute("data-y"))||0)+t.dy,r=parseFloat(a.getAttribute("data-z"))||0;a.style.webkitTransform=a.style.transform="translate("+n+"px, "+s+"px) rotate("+r+"deg)",a.setAttribute("data-x",n),a.setAttribute("data-y",s),a.setAttribute("data-z",r),$(".propertyMenu-2").html(""),(new k).createGraphProp(e,i,"#div_canvas_"+e,"radar")});var s=new n.default;console.log(i.options),s.WidgetGraphObject(e,null,i.data,i.options,"radar"),console.log(s.chartOption),f.push(s),f=M(f),console.log(f[0].chartOption)},t.loadGraphData=function(e,s,r,o,l){t.clearfocus(),$("#workspace").append(s);var d=$("#canvas_"+e),c=new Chart(d,{type:l,options:o});a(c,r.labels),i(c,r.datasets),d.data("graph",c),$(".propertyMenu-2").html(""),t.clearfocus(),t.createWidget(e,"div_canvas_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#div_canvas_"+e).addClass("fCorner"),$(".propertyMenu-2").html(""),(new k).createGraphProp(e,c,"#div_canvas_"+e,l)}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#div_canvas_"+e).addClass("fCorner");var a=t.target,n=(parseFloat(a.getAttribute("data-x"))||0)+t.dx,i=(parseFloat(a.getAttribute("data-y"))||0)+t.dy,s=parseFloat(a.getAttribute("data-z"))||0;a.style.webkitTransform=a.style.transform="translate("+n+"px, "+i+"px) rotate("+s+"deg)",a.setAttribute("data-x",n),a.setAttribute("data-y",i),a.setAttribute("data-z",s),$(".propertyMenu-2").html(""),(new k).createGraphProp(e,c,"#div_canvas_"+e,l)});var p=new n.default;p.WidgetGraphObject(e,null,c.data,c.options,l),f.push(p),f=M(f)};var a=function(t,e){for(var a=0;a<e.length;a++)t.data.labels.push(e[a]);t.update()},i=function(t,e){for(var a=0;a<e.length;a++){var n={label:e[a].label,data:e[a].data,backgroundColor:e[a].backgroundColor,borderColor:e[a].borderColor};t.data.datasets.push(n)}t.update()};return t}return d(e,h),e}(),m=function(t){function e(){c(this,e);var t=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.createMapWidget=function(){var e=Math.floor(1e5+9e5*Math.random());t.clearfocus(),$("#workspace").append('<div id="div_map_'+e+'" class="sPosition fCorner crispyOutter"><div id="map_'+e+'" class="crispyInner"></div></div>'),$("#map_"+e).css("height",300),$("#map_"+e).css("width",300);var a=void 0,i="map_"+e;a=L.map(i,{dragging:!0,zoomControl:!0,scrollWheelZoom:!1,zoomAnimation:!1}),$.getJSON("https://raw.githubusercontent.com/apisit/thailand.json/master/thailand.json").then(function(t){var e=new L.TileLayer.BoundaryCanvas("https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{boundary:t,minZoom:5,maxZoom:9,attribution:"&copy; Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ"});a.addLayer(e);var n=L.geoJSON(t);a.fitBounds(n.getBounds())}),$(".propertyMenu-2").html(""),(new k).createMapProp(e,"#div_map_"+e,"map",a),t.createWidget(e,"div_map_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#div_map_"+e).addClass("fCorner"),$(".propertyMenu-2").html(""),(new k).createMapProp(e,"#div_map_"+e,"map",a)}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#div_map_"+e).addClass("fCorner");var n=t.target,i=(parseFloat(n.getAttribute("data-x"))||0)+t.dx,s=(parseFloat(n.getAttribute("data-y"))||0)+t.dy,r=parseFloat(n.getAttribute("data-z"))||0;n.style.webkitTransform=n.style.transform="translate("+i+"px, "+s+"px) rotate("+r+"deg)",n.setAttribute("data-x",i),n.setAttribute("data-y",s),n.setAttribute("data-z",r),$(".propertyMenu-2").html(""),(new k).createMapProp(e,"#div_map_"+e,"map",a)});var s=new n.default;s.MapWidgetObject(e,null,"map"),f.push(s)},t.loadMapWidget=function(e,a){t.clearfocus(),$("#workspace").append(a),$("#map_"+e).css("height",300),$("#map_"+e).css("width",300);var i=void 0,s="map_"+e;i=L.map(s,{dragging:!0,zoomControl:!0,scrollWheelZoom:!1,zoomAnimation:!1}),$.getJSON("https://raw.githubusercontent.com/apisit/thailand.json/master/thailand.json").then(function(t){var e=new L.TileLayer.BoundaryCanvas("https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{boundary:t,minZoom:5,maxZoom:9,attribution:"&copy; Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ"});i.addLayer(e);var a=L.geoJSON(t);i.fitBounds(a.getBounds())}),$(".propertyMenu-2").html(""),t.clearfocus(),t.createWidget(e,"div_map_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#div_map_"+e).addClass("fCorner"),$(".propertyMenu-2").html(""),(new k).createMapProp(e,"#div_map_"+e,"map",i)}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#div_map_"+e).addClass("fCorner");var a=t.target,n=(parseFloat(a.getAttribute("data-x"))||0)+t.dx,s=(parseFloat(a.getAttribute("data-y"))||0)+t.dy,r=parseFloat(a.getAttribute("data-z"))||0;a.style.webkitTransform=a.style.transform="translate("+n+"px, "+s+"px) rotate("+r+"deg)",a.setAttribute("data-x",n),a.setAttribute("data-y",s),a.setAttribute("data-z",r),$(".propertyMenu-2").html(""),(new k).createMapProp(e,"#div_map_"+e,"map",i)});var r=new n.default;r.MapWidgetObject(e,null,"map"),f.push(r)},t}return d(e,h),e}(),y=function(t){function e(){c(this,e);var t=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.createHeadGraph=function(e){var a=Math.floor(1e5+9e5*Math.random());t.clearfocus(),"title"==e?$("#workspace").append('<span id="span_'+a+'" class="sPosition fCorner" style="font-size: 100px;">Title</span>'):"subtitle"==e&&$("#workspace").append('<span id="span_'+a+'" class="sPosition fCorner" style="font-size: 40px; color: rgb(73, 73, 73);">subtitle</span>'),$(".propertyMenu-2").html(""),(new k).createTextProp(a,"#span_"+a,"text"),t.createWidget(a,"span_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#span_"+a).addClass("fCorner"),$(".propertyMenu-2").html(""),(new k).createTextProp(a,"#span_"+a,"text")}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#span_"+a).addClass("fCorner");var e=t.target,n=(parseFloat(e.getAttribute("data-x"))||0)+t.dx,i=(parseFloat(e.getAttribute("data-y"))||0)+t.dy,s=parseFloat(e.getAttribute("data-z"))||0;e.style.webkitTransform=e.style.transform="translate("+n+"px, "+i+"px) rotate("+s+"deg)",e.setAttribute("data-x",n),e.setAttribute("data-y",i),e.setAttribute("data-z",s),$(".propertyMenu-2").html(""),(new k).createTextProp(a,"#span_"+a,"text")});var i=new n.default;i.HeadFontObject(a,null,"head"),f.push(i)},t.loadHeadGraph=function(e,a){t.clearfocus(),$("#workspace").append(a),$(".propertyMenu-2").html(""),t.clearfocus(),t.createWidget(e,"span_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#span_"+e).addClass("fCorner"),$(".propertyMenu-2").html(""),(new k).createTextProp(e,"#span_"+e,"text")}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#span_"+e).addClass("fCorner");var a=t.target,n=(parseFloat(a.getAttribute("data-x"))||0)+t.dx,i=(parseFloat(a.getAttribute("data-y"))||0)+t.dy,s=parseFloat(a.getAttribute("data-z"))||0;a.style.webkitTransform=a.style.transform="translate("+n+"px, "+i+"px) rotate("+s+"deg)",a.setAttribute("data-x",n),a.setAttribute("data-y",i),a.setAttribute("data-z",s),$(".propertyMenu-2").html(""),(new k).createTextProp(e,"#span_"+e,"text")});var i=new n.default;i.HeadFontObject(e,null,"head"),f.push(i)},t.createTableGraph=function(){var e=Math.floor(1e5+9e5*Math.random());t.clearfocus(),$("#workspace").append('\n                                <table id="table_'+e+'" class="sPosition fCorner table" table-class="1">\n                                  <tr>\n                                    <th>Column</th>\n                                    <th>Column</th>\n                                    <th>Column</th>\n                                  </tr>\n                                  <tr>\n                                    <td>Data</td>\n                                    <td>Data</td>\n                                    <td>Data</td>\n                                  </tr>\n                                  <tr>\n                                    <td>Data</td>\n                                    <td>Data</td>\n                                    <td>Data</td>\n                                  </tr>\n                                </table>\n                              ');var a=new SimpleTableCellEditor("table_"+e);a.SetEditable("td",{keys:{validation:[13],cancellation:[27]}}),a.SetEditable("th",{keys:{validation:[13],cancellation:[27]}}),$(".propertyMenu-2").html(""),(new k).createTableProp(e,"#table_"+e,"table"),t.createWidget(e,"table_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#table_"+e).addClass("fCorner"),$(".propertyMenu-2").html(""),(new k).createTableProp(e,"#table_"+e,"table")}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#table_"+e).addClass("fCorner");var a=t.target,n=(parseFloat(a.getAttribute("data-x"))||0)+t.dx,i=(parseFloat(a.getAttribute("data-y"))||0)+t.dy,s=parseFloat(a.getAttribute("data-z"))||0;a.style.webkitTransform=a.style.transform="translate("+n+"px, "+i+"px) rotate("+s+"deg)",a.setAttribute("data-x",n),a.setAttribute("data-y",i),a.setAttribute("data-z",s),$(".propertyMenu-2").html(""),(new k).createTableProp(e,"#table_"+e,"table")});var i=new n.default;i.WidgetTableObject(e,null,"table"),f.push(i)},t.loadTableWidget=function(e,a){t.clearfocus(),$("#workspace").append(a);var i=new SimpleTableCellEditor("table_"+e);i.SetEditable("td",{keys:{validation:[13],cancellation:[27]}}),i.SetEditable("th",{keys:{validation:[13],cancellation:[27]}}),$(".propertyMenu-2").html(""),t.clearfocus(),t.createWidget(e,"table_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#table_"+e).addClass("fCorner"),$(".propertyMenu-2").html(""),(new k).createTableProp(e,"#table_"+e,"table")}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#table_"+e).addClass("fCorner");var a=t.target,n=(parseFloat(a.getAttribute("data-x"))||0)+t.dx,i=(parseFloat(a.getAttribute("data-y"))||0)+t.dy,s=parseFloat(a.getAttribute("data-z"))||0;a.style.webkitTransform=a.style.transform="translate("+n+"px, "+i+"px) rotate("+s+"deg)",a.setAttribute("data-x",n),a.setAttribute("data-y",i),a.setAttribute("data-z",s),$(".propertyMenu-2").html(""),(new k).createTableProp(e,"#table_"+e,"table")});var s=new n.default;s.WidgetTableObject(e,null,"table"),f.push(s)},t}return d(e,h),e}(),w=function(t){function e(){c(this,e);var t=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.createImageWidget=function(e){var a=Math.floor(1e5+9e5*Math.random());t.clearfocus(),$("#workspace").append('<div id="div_'+a+'" class="sPosition fCorner"><img id="image_'+a+'" src="'+e+'" class="scaleImage" /></div>'),$("#div_"+a).css("height",150),$("#div_"+a).css("width",150),$(".propertyMenu-2").html(""),(new k).createImageProp(a,"#div_"+a,"#image_"+a,"image"),t.createWidget(a,"div_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#div_"+a).addClass("fCorner"),$(".propertyMenu-2").html(""),(new k).createImageProp(a,"#div_"+a,"#image_"+a,"image")}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#div_"+a).addClass("fCorner");var e=t.target,n=(parseFloat(e.getAttribute("data-x"))||0)+t.dx,i=(parseFloat(e.getAttribute("data-y"))||0)+t.dy,s=parseFloat(e.getAttribute("data-z"))||0;e.style.webkitTransform=e.style.transform="translate("+n+"px, "+i+"px) rotate("+s+"deg)",e.setAttribute("data-x",n),e.setAttribute("data-y",i),e.setAttribute("data-z",s),$(".propertyMenu-2").html(""),(new k).createImageProp(a,"#div_"+a,"#image_"+a,"image")});var i=new n.default;i.WidgetImageObject(a,null,"image"),f.push(i)},t.loadImageWidget=function(e,a){t.clearfocus(),$("#workspace").append(a),$("#div_"+e).css("height",150),$("#div_"+e).css("width",150),$(".propertyMenu-2").html(""),(new k).createImageProp(e,"#div_"+e,"#image_"+e,"image"),t.createWidget(e,"div_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#div_"+e).addClass("fCorner"),$(".propertyMenu-2").html(""),(new k).createImageProp(e,"#div_"+e,"#image_"+e,"image")}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#div_"+e).addClass("fCorner");var a=t.target,n=(parseFloat(a.getAttribute("data-x"))||0)+t.dx,i=(parseFloat(a.getAttribute("data-y"))||0)+t.dy,s=parseFloat(a.getAttribute("data-z"))||0;a.style.webkitTransform=a.style.transform="translate("+n+"px, "+i+"px) rotate("+s+"deg)",a.setAttribute("data-x",n),a.setAttribute("data-y",i),a.setAttribute("data-z",s),$(".propertyMenu-2").html(""),(new k).createImageProp(e,"#div_"+e,"#image_"+e,"image")});var i=new n.default;i.WidgetImageObject(e,null,"image"),f.push(i)},t}return d(e,h),e}(),x=function(t){function e(){c(this,e);var t=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.createShapeWidget=function(e){var a=Math.floor(1e5+9e5*Math.random());t.clearfocus(),"square"==e?$("#workspace").append('<div id="div_'+a+'" class="sPosition fCorner"><div id="shape_'+a+'" class="square"></div></div>'):"circle"==e?$("#workspace").append('<div id="div_'+a+'" class="sPosition fCorner"><div id="shape_'+a+'" class="circle"></div></div>'):"string"==e&&$("#workspace").append('<div id="div_'+a+'" class="sPosition fCorner"><div id="shape_'+a+'" class="string"></div></div>'),$("#div_"+a).css("height",150),$("#div_"+a).css("width",150),$(".propertyMenu-2").html(""),(new k).createShapeProp(a,"#div_"+a,"#shape_"+a,e),t.createWidget(a,"div_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#div_"+a).addClass("fCorner"),$(".propertyMenu-2").html(""),(new k).createShapeProp(a,"#div_"+a,"#shape_"+a,e)}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#div_"+a).addClass("fCorner");var n=t.target,i=(parseFloat(n.getAttribute("data-x"))||0)+t.dx,s=(parseFloat(n.getAttribute("data-y"))||0)+t.dy,r=parseFloat(n.getAttribute("data-z"))||0;n.style.webkitTransform=n.style.transform="translate("+i+"px, "+s+"px) rotate("+r+"deg)",n.setAttribute("data-x",i),n.setAttribute("data-y",s),n.setAttribute("data-z",r),$(".propertyMenu-2").html(""),(new k).createShapeProp(a,"#div_"+a,"#shape_"+a,e)});var i=new n.default;i.WidgetShapeObject(a,null,e),f.push(i)},t.loadShapeWidget=function(e,a,i){t.clearfocus(),console.log(a),$("#workspace").append(a),$(".propertyMenu-2").html(""),t.clearfocus(),t.createWidget(e,"div_").on("tap",function(t){$(".sPosition").removeClass("fCorner"),$("#div_"+e).addClass("fCorner"),$(".propertyMenu-2").html(""),(new k).createShapeProp(e,"#div_"+e,"#shape_"+e,i)}).on("dragmove",function(t){$(".sPosition").removeClass("fCorner"),$("#div_"+e).addClass("fCorner");var a=t.target,n=(parseFloat(a.getAttribute("data-x"))||0)+t.dx,s=(parseFloat(a.getAttribute("data-y"))||0)+t.dy,r=parseFloat(a.getAttribute("data-z"))||0;a.style.webkitTransform=a.style.transform="translate("+n+"px, "+s+"px) rotate("+r+"deg)",a.setAttribute("data-x",n),a.setAttribute("data-y",s),a.setAttribute("data-z",r),$(".propertyMenu-2").html(""),(new k).createShapeProp(e,"#div_"+e,"#shape_"+e,i)});var s=new n.default;s.WidgetShapeObject(e,null,i),f.push(s)},t}return d(e,h),e}(),C=function t(){c(this,t),$("#propertySpace").html('<div class="propertyMenu-2">\n                                <div class="propertyMenu-2-context"></div>\n                                <div class="propertyMenu-2-paper"></div>\n                              </div>'),this.createContext=function(t,e,a,n){$(".propertyMenu-2-context").append('  \n            <div class="container">\n                <div class="row row-block border-bottom-only">\n                    <div class="col-2">\n                        <button type="button" id="backest_widget_'+t+'" class="btn btn-default"><i class="far fa-caret-square-down"></i></button>\n                    </div>\n                    <div class="col-3">\n                        <button type="button" id="topest_widget_'+t+'"  class="btn btn-default"><i class="far fa-caret-square-up"></i></button>\n                    </div>\n                    <div class="col-2">\n                        <button type="button" id="align_left_widget_'+t+'" class="btn btn-default"><i class="fas fa-align-left"></i></button>\n                    </div>\n                    <div class="col-2">\n                        <button type="button" id="align_center_widget_'+t+'" class="btn btn-default"><i class="fas fa-align-center"></i></button>\n                    </div>\n                    <div class="col-2">         \n                        <button type="button" id="align_right_widget_'+t+'" class="btn btn-default"><i class="fas fa-align-right"></i></button>\n                    </div>\n                </div>\n                <div class="row row-block">\n                    <div class="col-7">\n                        <button type="button" id="download_widget_'+t+'" class="btn btn-default form-control">Download</button>\n                    </div>\n                    <div class="col-2">\n                        <button type="button" id="preview_widget_'+t+'" class="btn btn-default" ><i class="fas fa-desktop"></i></button>\n                    </div>\n                    <div class="col-1">\n                        <button type="button" id="delete_widget_'+t+'" class="btn btn-default" ><i class="fas fa-trash-alt"></i></button>\n                    </div>\n                </div>\n            </div>'),$("#backest_widget_"+t).click(function(){$(".sPosition").each(function(t){$(this).hasClass("fCorner")?$(this).css("z-index",0):$(this).css("z-index",t+1)})}),$("#topest_widget_"+t).click(function(){$(".sPosition").each(function(t){$(this).hasClass("fCorner")?$(this).css("z-index",$(".sPosition").length):$(this).css("z-index",t)})}),$("#align_left_widget_"+t).click(function(){var t=$(e).css("transform").split(",")[5].split(")")[0];$(e).css("transform","translate(0px, "+t+"px)"),$(e).attr("data-x",0),$(e).attr("data-y",t)}),$("#align_center_widget_"+t).click(function(){var t=$(e).css("transform").split(",")[5].split(")")[0],a=297.5-$(e).width()/2;$(e).css("transform","translate("+a+"px, "+t+"px)"),$(e).attr("data-x",a),$(e).attr("data-y",t)}),$("#align_right_widget_"+t).click(function(){var t=$(e).css("transform").split(",")[5].split(")")[0],a=595-$(e).width();$(e).css("transform","translate("+a+"px, "+t+"px)"),$(e).attr("data-x",a),$(e).attr("data-y",t)}),$("#download_widget_"+t).click(function(){var t=window.open();t.document.write("<h1>Please wait for download...</h1>");var a=$(e).css("transform"),n=$(e).css("data-x"),i=$(e).css("data-y");$(e).css("transform","translate(0px, 0px)"),$(e).css("data-x",0),$(e).css("data-y",0),$(e).removeClass("fCorner"),html2canvas(document.querySelector(e)).then(function(s){$(e).css("transform",a),$(e).css("data-x",n),$(e).css("data-y",i),$(e).addClass("fCorner");var r=s.toDataURL("image/png"),o=new jsPDF;o.addImage(r,"JPEG",0,0),o.save("ImageDownload.pdf"),t.close()})}),$("#preview_widget_"+t).click(function(){var t=window.open();t.document.write("<h1 id='loading'>Loading...</h1>");var a=$(e).css("transform"),n=$(e).css("data-x"),i=$(e).css("data-y");$(e).css("transform","translate(0px, 0px)"),$(e).css("data-x",0),$(e).css("data-y",0),$(e).removeClass("fCorner"),html2canvas(document.querySelector(e)).then(function(s){var r=s.toDataURL("image/png");$(e).css("transform",a),$(e).css("data-x",n),$(e).css("data-y",i),$(e).addClass("fCorner");var o='<img src="'+r+'">';t.document.write(o),t.document.title="Preview",t.document.getElementById("loading").remove()})}),$("#delete_widget_"+t).click(function(){var e;if(e=t,f=f.filter(function(t){return t.id!=e}),"line"==a||"bar"==a||"pie"==a||"radar"==a){var i=document.getElementById("div_canvas_"+t);n.destroy(),i.remove()}else if("map"==a){document.getElementById("div_map_"+t).remove()}else if("text"==a){document.getElementById("span_"+t).remove()}else if("table"==a){document.getElementById("table_"+t).remove()}else if("image"==a){document.getElementById("div_"+t).remove()}else if("square"==a||"circle"==a||"string"==a){document.getElementById("div_"+t).remove()}$(".propertyMenu-2").html("")})},this.createEditdata=function(t,e,a,n){var i,s=[],l=[],d=[];function c(t,e,a,n){var i=document.getElementById("preview_canvas_"+e+"_"+n),s=new Chart(i,{type:a,options:t.options});return p(s,t.data.labels),v(s,t.data.datasets),s}function p(t,e){t.data.labels=[];for(var a=0;a<e.length;a++)t.data.labels.push(e[a]);t.update()}function v(t,e){t.data.datasets=[];for(var a=0;a<e.length;a++){var n={label:e[a].label,data:e[a].data,backgroundColor:e[a].backgroundColor,borderColor:e[a].borderColor};t.data.datasets.push(n)}t.update()}function f(e){for(var a=void 0,i=0;i<e.data.datasets.length;i++)a="bar"==n||"pie"==n?e.data.datasets[i].backgroundColor:e.data.datasets[i].borderColor,$("#chart_data_"+t).append('\n              <div id="div_preview_chart_'+t+"_"+i+'" class="col-12">\n                <div class="row" style="padding-top:5px; padding-bottom:5px;">\n                  <div class="col-2">\n                    <span>Datasource</span>\n                  </div>\n                  <div class="col-4">\n                    <span>Data</span>\n                  </div>\n                  <div class="col-2">\n                    <span>Aggregate</span>\n                  </div>\n                  <div class="col-2">\n                    <span>Label</span>\n                  </div>\n                  <div class="col-1">\n                    <span>Color</span>\n                  </div>\n                </div>\n                <div class="row" style="padding-top:5px; padding-bottom:5px;">\n                  <div class="col-2">\n                    <select type="text" id="select_datasource_list_'+t+"_"+i+'" name="list_datasource" class="form-control">\n                      <option value="0">-Select-</option>\n                    </select>\n                  </div>\n                  <div class="col-4">\n                    <input type="text" list="datalist_keydata_list_'+t+"_"+i+'" id="id_keydata_list_'+t+"_"+i+'" class="form-control" />\n                    <datalist id="datalist_keydata_list_'+t+"_"+i+'">\n                      <option value="Null"></option>\n                    </datalist> \n                  </div>\n                  <div class="col-2">         \n                    <select type="text" id="select_agg_list_'+t+"_"+i+'" class="form-control">\n                      <option value="0">-Select-</option>\n                      <option value="1">Avg</option>\n                      <option value="2">Max</option>\n                      <option value="3">Min</option>\n                    </select>\n                  </div>\n                  <div class="col-2">\n                    <input type="text" id="label_preview_chart_'+t+"_"+i+'" class="form-control" value="'+e.data.datasets[i].label+'"/>\n                  </div>\n                  <div class="col-1">\n                    <input type="color" id="color_preview_chart_'+t+"_"+i+'" class="form-control" value="'+a+'"/>\n                  </div>\n                  <div class="col-1">\n                    <button type="button" id="delete_preview_chart_'+t+"_"+i+'" class="btn btn-default" ><i class="fas fa-trash-alt"></i></button>\n                  </div>\n                </div>\n              </div>'),0,$("#label_preview_chart_"+t+"_"+i).keyup(w(e,i)),$("#color_preview_chart_"+t+"_"+i).change(y(e,i)),$("#delete_preview_chart_"+t+"_"+i).click(x(e,i)),$("#select_datasource_list_"+t+"_"+i).change(h(e,i)),$("#id_keydata_list_"+t+"_"+i).change(g(e,i)),$("#select_agg_list_"+t+"_"+i).change(m(i)),$("#delete_preview_chart_"+t+"_0").remove();$.ajax({url:"http://localhost:8000/api/admin/infographic/getDatasource",method:"GET",data:{info_id:u},success:function(e){e.data.map(function(t,e){$("select[name='list_datasource']").append('<option value="'+(e+1)+'">'+t.name+"</option>")});for(var a=0;a<s.length;a++)document.getElementById("select_datasource_list_"+t+"_"+a).selectedIndex=s[a],$("#select_datasource_list_"+t+"_"+a).change(),$("#id_keydata_list_"+t+"_"+a).val(l[a]),document.getElementById("select_agg_list_"+t+"_"+a).selectedIndex=d[a]},error:function(t){console.log(t)}})}function h(e,a){return function(){var n=$("#select_datasource_list_"+t+"_"+a).val();if(0!=n){$("#datalist_keydata_list_"+t+"_"+a).html('<option value="Null"></option>'),$("#id_keydata_list_"+t+"_"+a).val("Null");var i=Object(o.h)(_[2016]);for(var r in i)$("#datalist_keydata_list_"+t+"_"+a).append('<option value="'+r+'"></option>');$("#id_keydata_list_"+t+"_"+a).val(""),e.data.labels=Object.keys(_),e.update()}else $("#datalist_keydata_list_"+t+"_"+a).html('<option value="Null"></option>'),$("#id_keydata_list_"+t+"_"+a).val("Null");s[a]=n,$("#canvas_"+t).attr("select-datasource-list",s)}}function g(e,a){return function(){var n=$("#id_keydata_list_"+t+"_"+a).val();if("Null"!=n){var i=Object(o.h)(_);for(var s in e.data.datasets[a].data=[],i)if(s.includes(n)){var d=r.a.get(_,s.replace("/","."));e.data.datasets[a].data.push(d)}e.update()}l[a]=$("#id_keydata_list_"+t+"_"+a).val(),$("#canvas_"+t).attr("select-keydata-list",l)}}function m(e){return function(){$("#select_agg_list_"+t+"_"+e).val();d[e]=$("#select_agg_list_"+t+"_"+e).val(),$("#canvas_"+t).attr("select-agg-list",d)}}function y(e,a){return function(){"bar"==n||"pie"==n?e.data.datasets[a].backgroundColor=$("#color_preview_chart_"+t+"_"+a).val():e.data.datasets[a].borderColor=$("#color_preview_chart_"+t+"_"+a).val(),e.update()}}function w(e,a){return function(){e.data.datasets[a].label=$("#label_preview_chart_"+t+"_"+a).val(),e.update()}}function x(e,a){return function(){e.data.datasets.splice(a,1),e.update(),$("#chart_data_"+t).contents().remove(),f(e),s.splice(a,1),l.splice(a,1),d.splice(a,1)}}$(".propertyMenu-2-paper").append('                \n          <div class="propertyMenu-2-block">\n            <button type="button" id="edit_chart_data_'+t+'" class="btn btn-default form-control button-width">Edit data</button>     \n          </div>'),$("#edit_chart_data_"+t).click(function(){$("#model_edit_chart_data_"+t).remove(),s=[],l=[],d=[],i="classic";var a='\n        <div class="modal" id="model_edit_chart_data_'+t+'">\n            <div class="modal-dialog">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h4 class="modal-title">Edit data chart</h4>\n                        <button type="button" class="close" data-dismiss="modal">&times;</button>\n                    </div>\n\n                    <div class="modal-body">\n                      <div class="row"> \n                        <div class="col-12">\n                          <ul class="nav nav-tabs" style="border-bottom:none; padding-top:5px; padding-bottom:5px;">\n                            <li><button class="btn btn-primary" id="btn_classic_'+t+'" style="margin-right:5px;">Classic</button></li>\n                            <li><button class="btn btn-primary" id="btn_series_'+t+'" style="margin-right:5px;">Time series</button></li>\n                          </ul>   \n                        </div>              \n                      </div>\n                      <hr>\n                      <div id="classic_'+t+'" style="display:none;">  \n                        <div class="row">\n                          <div class="col-5">\n                            <div class="row" style="padding-top:5px; padding-bottom:5px;">\n                              <div class="col-4">\n                                <span style="position: relative; top: 50%; transform: translateY(-50%);">Select period</span>\n                              </div>\n                              <div class="col-8">\n                                <ul class="nav nav-tabs" style="border-bottom:none; padding-top:5px; padding-bottom:5px;">\n                                  <li><button class="btn btn-primary" data-toggle="tab" href="#daily_'+t+'" id="btn_daily_'+t+'" style="margin-right:5px;">Daily</button></li>\n                                  <li><button class="btn btn-primary" data-toggle="tab" href="#monthly_'+t+'" id="btn_monthly_'+t+'" style="margin-right:5px;">Monthly</button></li>\n                                  <li><button class="btn btn-primary" data-toggle="tab" href="#yearly_'+t+'" id="btn_yearly_'+t+'" style="margin-right:5px;">Yearly</button></li>\n                                </ul>\n                              </div>\n                            </div>\n                            <div class="tab-content" style="padding-top:5px; padding-bottom:5px;">\n                              <div id="daily_'+t+'" class="tab-pane fade">  \n                                <div class="row" style="padding-top:5px; padding-bottom:5px;">\n                                  <div class="col-6">\n                                    <span>Start date</span>\n                                  </div>\n                                  <div class="col-6">\n                                    <span>End date</span>\n                                  </div>\n                                </div>            \n                                <div class="row" style="padding-top:5px; padding-bottom:5px;">\n                                  <div class="col-6">\n                                    <input type="text" class="form-control"/>\n                                  </div>\n                                  <div class="col-6">\n                                    <input type="text" class="form-control"/>\n                                  </div>\n                                </div>\n                              </div>\n                              <div id="monthly_'+t+'" class="tab-pane fade">\n                                <div class="row" style="padding-top:5px; padding-bottom:5px;">\n                                  <div class="col-6">\n                                    <span>Start month</span>\n                                  </div>\n                                  <div class="col-6">\n                                    <span>End month</span>\n                                  </div>\n                                </div>            \n                                <div class="row" style="padding-top:5px; padding-bottom:5px;">\n                                  <div class="col-6">\n                                    <input type="text" class="form-control"/>\n                                  </div>\n                                  <div class="col-6">\n                                    <input type="text" class="form-control"/>\n                                  </div>\n                                </div>\n                              </div>\n                              <div id="yearly_'+t+'" class="tab-pane fade">\n                                <div class="row" style="padding-top:5px; padding-bottom:5px;">\n                                  <div class="col-6">\n                                    <span>Start year</span>\n                                  </div>\n                                  <div class="col-6">\n                                    <span>End year</span>\n                                  </div>\n                                </div>            \n                                <div class="row" style="padding-top:5px; padding-bottom:5px;">\n                                  <div class="col-6">\n                                    <input type="text"  id="div_start_year_'+t+'" class="form-control"/>\n                                  </div>\n                                  <div class="col-6">\n                                    <input type="text"  id="div_end_year_'+t+'" class="form-control"/>\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                          <div class="col-7" id="div_preview_canvas_'+t+'_classic">\n                            <canvas id="preview_canvas_'+t+'_classic"></canvas>\n                          </div>\n                        </div>\n                        <hr>\n                        <div class="row" style="padding-top:5px; padding-bottom:5px;">\n                          <div class="col-6">\n                            <span>Set data</span>\n                            <button id="add_new_data_'+t+'" class="btn btn-default btn-sm btn-radius"><i class="fas fa-plus"></i>Add new data</button>\n                          </div>\n                        </div>\n                        <div id="chart_data_'+t+'" class="row taboverflow" style="padding-top:5px; padding-bottom:5px;">\n                        </div>\n                      </div>\n\n                      <div id="series_'+t+'" style="display:none;">\n                        <div class="row" style="height:150px;">\n                          <div class="col-5">\n                            <div class="row">\n                              <div class="col-12" style="padding-top:5px; padding-bottom:5px;">\n                                <span>Time series period</span>\n                              </div>\n                            </div>\n                            <div class="row">\n                              <div class="col-12" style="padding-top:5px; padding-bottom:5px;">\n                                <select type="text" id="select_period_series_'+t+'" class="form-control">\n                                  <option value="0">-Select-</option>\n                                  <option value="15day">15 Day later</option>\n                                  <option value="6month">6 Month later</option>\n                                  <option value="1year">1 Year later</option>\n                                  <option value="custom">Custom</option>\n                                </select>     \n                              </div>\n                            </div>\n                            <div class="row" id="div_custom_'+t+'" style="display:none;">\n                              <div class="col-3" style="padding-top:5px; padding-bottom:5px;">\n                                <input type="text" class="form-control"/>\n                              </div>\n                              <div class="col-9" style="padding-top:5px; padding-bottom:5px;">\n                                <select type="text" class="form-control">\n                                  <option value="0">-Select-</option>\n                                  <option value="day">Day later</option>\n                                  <option value="week">Week later</option>\n                                  <option value="month">Month later</option>\n                                  <option value="year">Year later</option>\n                                </select>  \n                              </div>\n                            </div>\n                          </div>\n                          <div class="col-7" id="div_preview_canvas_'+t+'_series">\n                            <canvas id="preview_canvas_'+t+'_series"></canvas>\n                          </div>\n                        </div>\n                        <hr>\n                        <div class="row">\n                          \n                        </div>\n\n\n                      </div>\n    \n                    </div>\n                    <div class="modal-footer">\n                        <button type="button" id="save_chart_data_'+t+'" class="btn btn-success">Apply</button>\n                    </div>\n                </div>\n            </div>\n        </div>';$("body").append(a),$("#model_edit_chart_data_"+t).modal("show"),$("#btn_classic_"+t).click(function(){i="classic",$("#classic_"+t).fadeIn(),$("#series_"+t).hide()}),$("#btn_series_"+t).click(function(){i="series",$("#series_"+t).fadeIn(),$("#classic_"+t).hide()}),$("#btn_classic_"+t).click(),$("#btn_daily_"+t).click();var o=c(e,t,n,"classic");f(o);for(var u=0;u<o.data.datasets.length;u++){var _=$("#canvas_"+t);null!=_.attr("select-datasource-list")?s.push(_.attr("select-datasource-list").split(",")[u]):s.push(0),null!=_.attr("select-keydata-list")?l.push(_.attr("select-keydata-list").split(",")[u]):l.push("Null"),null!=_.attr("select-agg-list")?d.push(_.attr("select-agg-list").split(",")[u]):d.push(0)}var h=c(e,t,n,"series");$("#select_period_series_"+t).change(function(){"custom"==$("#select_period_series_"+t).val()?$("#div_custom_"+t).show():$("#div_custom_"+t).hide()}),console.log(r.a.get(b,"dataTimeSeries.0.RelativeHumidity")),$("#add_new_data_"+t).click(function(){var e;e="bar"==n||"pie"==n?{label:"New data",data:[100,80,60],backgroundColor:"#343a40"}:{label:"New data",data:[100,80,60],backgroundColor:"rgba(255, 255, 255, 0)",borderColor:"#343a40"},o.data.datasets.push(e),o.update(),$("#chart_data_"+t).contents().remove(),s.push(0),l.push("Null"),d.push(0),f(o)}),$("#save_chart_data_"+t).click(function(){"classic"==i?(p(e,o.data.labels),v(e,o.data.datasets)):"series"==i&&(p(e,h.data.labels),v(e,h.data.datasets)),$("#canvas_"+t).data("graph",e),$(".propertyMenu-2").html(""),(new k).createGraphProp(t,e,"#div_canvas_"+t,n),$("#model_edit_chart_data_"+t).modal("hide")})})},this.createCropImage=function(t,e,a){var n=void 0;$(".propertyMenu-2-paper").append('                \n          <div class="propertyMenu-2-block">\n            <button type="button" id="crop_image_widget_'+t+'" class="btn btn-default form-control button-width">Crop image</button>     \n          </div>'),$("#crop_image_widget_"+t).click(function(){$("#modelCrop_"+t).remove();var e='\n        <div class="modal" id="modelCrop_'+t+'" class="modelcropper">\n            <div class="modal-dialog">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h4 class="modal-title">Crop image</h4>\n                        <button type="button" class="close" data-dismiss="modal">&times;</button>\n                    </div>\n\n                    <div class="modal-body">\n                        <div class="row">\n                            <div class="col-11 text-center">\n                                <img id="image_crop_'+t+'" style="max-width: 100%; max-height:50%;" />\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="modal-footer">\n                        <button type="button" id="save_image_crop_'+t+'" class="btn btn-success">Save</button>\n                    </div>\n                </div>\n            </div>\n        </div>';$("body").append(e),$("#modelCrop_"+t).modal("show"),$("#image_crop_"+t).attr("src",$(a).attr("src"));var i=document.getElementById("image_crop_"+t);n=new Cropper(i,{}),$("#save_image_crop_"+t).click(function(){$(a).attr("src",n.getCroppedCanvas({width:500,height:500}).toDataURL()),n.destroy(),$("#modelCrop_"+t).modal("hide"),$("#modelCrop_"+t).modal("dispose"),$("#modelCrop_"+t).remove()})})},this.createTextchange=function(t,e){$(".propertyMenu-2-paper").append('                      \n          <div class="propertyMenu-2-block">\n            <div class="container">\n                <div class="row row-block">\n                    <span>Text change</span>\n                </div>\n                <div class="row row-block">\n                    <input type="text" id="inputtext_'+t+'" class="form-control"/>\n                </div>\n            </div>    \n          </div>'),$("#inputtext_"+t).val($("#span_"+t).html()),$("#inputtext_"+t).keyup(function(){$("#span_"+t).html($("#inputtext_"+t).val())})},this.createImportData=function(t,e){$(".propertyMenu-2-paper").append('                \n          <div class="propertyMenu-2-block">\n            <button type="button" class="btn btn-default form-control button-width">Import data</button>    \n          </div>')},this.createScale=function(t,e,a){$(".propertyMenu-2-paper").append('  \n          <div class="propertyMenu-2-block">\n            <div class="container">\n                <div class="row row-block">\n                    <div class="col-6">\n                        <span>Width (px)</span>\n                    </div>\n                    <div class="col-6">\n                        <span>Height (px)</span>\n                    </div>\n                </div>\n                <div class="row row-block">\n                    <div class="col-6">\n                        <input type="text" id="width_'+t+'" class="form-control" />\n                    </div>\n                    <div class="col-6">\n                        <input type="text" id="height_'+t+'" class="form-control" />\n                    </div>\n                </div>\n            </div>    \n          </div>'),$("#width_"+t).val(Math.round($(e).width())),$("#height_"+t).val(Math.round($(e).height())),$("#width_"+t).unbind().change(function(){$(e).css("width",$("#width_"+t).val()),$(e).css("height",$("#height_"+t).val()),"map"==a&&($("#map_"+t).css("width",$("#width_"+t).val()-100),$("#map_"+t).css("height",$("#height_"+t).val()-100))}),$("#height_"+t).unbind().change(function(){$(e).css("width",$("#width_"+t).val()),$(e).css("height",$("#height_"+t).val()),"map"==a&&($("#map_"+t).css("width",$("#width_"+t).val()-100),$("#map_"+t).css("height",$("#height_"+t).val()-100))})},this.createAddColumnAndRow=function(t,e){function a(){var e=new SimpleTableCellEditor("table_"+t);e.SetEditable("td",{keys:{validation:[13],cancellation:[27]}}),e.SetEditable("th",{keys:{validation:[13],cancellation:[27]}})}$(".propertyMenu-2-paper").append('    \n          <div class="propertyMenu-2-block">\n            <div class="container">\n                <div class="row row-block">\n                    <span>New column name</span>\n                </div>\n                <div class="row row-block">\n                    <div class="col-7">\n                        <input type="text" id="column_name_'+t+'" class="form-control"/>\n                    </div>\n                    <div class="col-2">\n                        <button type="button" id="add_column_'+t+'" class="btn btn-default" ><i class="fas fa-angle-right"></i></button>\n                    </div>\n                    <div class="col-1">\n                        <button type="button" id="add_row_'+t+'" class="btn btn-default" ><i class="fas fa-angle-down"></i></button>\n                    </div>\n                </div>\n                <div class="row-block">\n                    <button type="button" id="delete_column_'+t+'" class="btn btn-default form-control button-width">Delete column</button>\n                </div>\n                <div class="row-block">\n                    <button type="button" id="delete_row_'+t+'" class="btn btn-default form-control button-width">Delete row</button>\n                </div>\n            </div>    \n          </div>'),$("#add_column_"+t).unbind().click(function(){for(var n=$(e),i=n[0].rows[0].cells.length,s=0;s<n[0].rows.length;s++){var r=n[0].rows[s];0==s?r.cells[r.cells.length-1].insertAdjacentHTML("afterend","<th>"+$("#column_name_"+t).val()+"</th>"):r.insertCell(i).innerHTML="Data"}a()}),$("#add_row_"+t).unbind().click(function(){for(var n=$(e),i=document.getElementById("table_"+t).insertRow(n[0].rows.length),s=0;s<n[0].rows[0].cells.length;s++){i.insertCell(s).innerHTML="Data"}a()}),$("#delete_column_"+t).unbind().click(function(){for(var t=$(e),a=t[0].rows[0].cells.length,n=0;n<t[0].rows.length;n++){t[0].rows[n].deleteCell(a-1)}}),$("#delete_row_"+t).unbind().click(function(){var a=$(e);document.getElementById("table_"+t).deleteRow(a[0].rows.length-1)})},this.createThemesTable=function(t,e){$(".propertyMenu-2-paper").append('  \n          <div class="propertyMenu-2-block">\n            <div class="container">\n                <div class="row row-block">\n                    <span>Themes</span>\n                </div>\n                <div class="row row-block">\n                    <select type="text" id="themes_table_'+t+'" class="form-control">\n                      <option value="1">Default</option>\n                      <option value="2">Striped</option>\n                      <option value="3">Bordered</option>\n                    </select>\n                </div>\n            </div>    \n          </div>');var a=["table-striped","table-bordered"];document.getElementById("themes_table_"+t).selectedIndex=($(e).attr("table-class")||1)-1,$("#themes_table_"+t).unbind().change(function(){for(var n=document.getElementById("table_"+t).className.split(/\s+/),i=0;i<n.length;i++)a.includes(n[i])&&$(e).removeClass(n[i]);switch($("#themes_table_"+t).val()){case"1":$(e).attr("table-class","1");break;case"2":$(e).addClass("table-striped"),$(e).attr("table-class","2");break;case"3":$(e).addClass("table-bordered"),$(e).attr("table-class","3")}})},this.createColorAndFont=function(t,e){$(".propertyMenu-2-paper").append('    \n          <div class="propertyMenu-2-block">\n            <div class="container">\n                <div class="row row-block">\n                    <div class="col-6 text-align-left">\n                        <span>Color</span>\n                    </div>\n                    <div class="col-6 text-align-left">\n                        <span>Font</span>\n                    </div>\n                </div>\n                <div class="row row-block">\n                    <div class="col-6">\n                        <input type="color" id="color_font_'+t+'" class="form-control">\n                    </div>\n                    <div class="col-6">\n                        <select type="text" id="family_font_'+t+'" class="form-control">\n                          <option value="1">Poppins</option>\n                          <option value="2">Times New Roman</option>\n                          <option value="3">Arial</option>\n                          <option value="4">Arial Black</option>\n                          <option value="5">Georgia</option>\n                          <option value="6">Tahoma</option>\n                          <option value="7">Lucida Console</option>\n                          <option value="8">Courier New</option>\n                        </select>\n                    </div>\n                </div>\n            </div>    \n          </div>'),$("#color_font_"+t).val(function(t){if(!(t=""+t)||t.indexOf("rgb")<0)return;if("#"==t.charAt(0))return t;var e=/(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/i.exec(t),a=parseInt(e[2],10).toString(16),n=parseInt(e[3],10).toString(16),i=parseInt(e[4],10).toString(16);return"#"+((1==a.length?"0"+a:a)+(1==n.length?"0"+n:n)+(1==i.length?"0"+i:i))}($("#span_"+t).css("color"))),document.getElementById("family_font_"+t).selectedIndex=($(e).attr("font-value")||1)-1,$("#color_font_"+t).unbind().change(function(){$("#span_"+t).css("color",$(this).val())}),$("#family_font_"+t).unbind().change(function(){switch($("#family_font_"+t).val()){case"1":$(e).css("font-family","Poppins, Kanit, sans-serif"),$(e).attr("font-value","1");break;case"2":$(e).css("font-family","Times New Roman, Times, serif"),$(e).attr("font-value","2");break;case"3":$(e).css("font-family","Arial, Helvetica, sans-serif"),$(e).attr("font-value","3");break;case"4":$(e).css("font-family","Arial Black, Gadget, sans-serif"),$(e).attr("font-value","4");break;case"5":$(e).css("font-family","Georgia, serif"),$(e).attr("font-value","5");break;case"6":$(e).css("font-family","Tahoma, Geneva, sans-serif"),$(e).attr("font-value","6");break;case"7":$(e).css("font-family","Lucida Console, Monaco, monospace"),$(e).attr("font-value","7");break;case"8":$(e).css("font-family","Courier New, Courier, monospace"),$(e).attr("font-value","8")}})},this.createColorAndDeleteForShape=function(t,e,a,n){function i(t){if((t=""+t)&&!(t.indexOf("rgb")<0)){if("#"==t.charAt(0))return t;var e=/(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/i.exec(t),a=parseInt(e[2],10).toString(16),n=parseInt(e[3],10).toString(16),i=parseInt(e[4],10).toString(16);return"#"+((1==a.length?"0"+a:a)+(1==n.length?"0"+n:n)+(1==i.length?"0"+i:i))}}$(".propertyMenu-2-paper").append(' \n      <div class="propertyMenu-2-block">\n        <div class="container">\n            <div class="row row-block">\n                <span>Color</span>\n            </div>\n            <div class="row row-block">\n                <input type="color" class="form-control" id="color_shape_'+t+'">\n            </div>\n        </div>    \n      </div>'),"square"==n||"circle"==n?(console.log($(a).css("background-color")),$("#color_shape_"+t).val(i($(a).css("background-color"))),$("#color_shape_"+t).unbind().change(function(){$(a).css("background-color",$(this).val())})):"string"==n&&($("#color_shape_"+t).val(i($(a).css("border-right-color"))),$("#color_shape_"+t).unbind().change(function(){$(a).css("border-right-color",$(this).val())}))},this.createStringStyle=function(t,e,a){$(".propertyMenu-2-paper").append('          \n          <div class="propertyMenu-2-block">\n            <div class="container">\n                <div class="row row-block">\n                    <div class="col-4">\n                        <button type="button" id="solid_style_'+t+'" class="btn btn-default" ><i class="fas fa-minus"></i></button>\n                    </div>\n                    <div class="col-4">\n                        <button type="button" id="dotted_style_'+t+'" class="btn btn-default" ><i class="fas fa-ellipsis-h"></i></button>\n                    </div>\n                    <div class="col-4">\n                        <button type="button" id="double_style_'+t+'" class="btn btn-default" ><i class="fas fa-equals"></i></button>\n                    </div>\n                </div>\n            </div>    \n          </div>'),$("#solid_style_"+t).unbind().click(function(){$(a).css("border-right-style","solid")}),$("#dotted_style_"+t).unbind().click(function(){$(a).css("border-right-style","dotted")}),$("#double_style_"+t).unbind().click(function(){$(a).css("border-right-style","double")})},this.createFontSize=function(t,e){$(".propertyMenu-2-paper").append(' \n          <div class="propertyMenu-2-block">\n            <div class="container">\n                <div class="row row-block">\n                    <span>Font size (pt)</span>\n                </div>\n                <div class="row row-block">\n                    <div class="col-8" style="padding-left:0px;">\n                        <input type="range" min="9" max="120" value="9" id="slider_font_widget_'+t+'" class="slider" />\n                    </div>\n                    <div class="col-4">\n                        <input type="text" id="slider_font_input_widget_'+t+'" class="form-control" />\n                    </div>\n                </div>\n            </div>    \n          </div>'),$("#slider_font_widget_"+t).val($(e).css("font-size").replace("px","")),$("#slider_font_input_widget_"+t).val($(e).css("font-size").replace("px","")),$("#slider_font_widget_"+t).unbind().change(function(){$("#slider_font_input_widget_"+t).val($(this).val()),$(e).css("font-size",$(this).val()+"px")}),$("#slider_font_input_widget_"+t).unbind().change(function(){$(this).val()<9||$(this).val()>120?alert("test : 9 - 120"):($("#slider_font_widget_"+t).val($(this).val()),$(e).css("font-size",$(this).val()+"px"))})},this.createRotation=function(t,e){$(".propertyMenu-2-paper").append(' \n          <div class="propertyMenu-2-block">\n            <div class="container">\n                <div class="row row-block">\n                    <span>Rotation</span>\n                </div>\n                <div class="row row-block">\n                    <div class="col-8" style="padding-left:0px;">\n                        <input type="range" min="0" max="360" value="0" id="slider_rotation_widget_'+t+'" class="slider" />\n                    </div>\n                    <div class="col-4">\n                        <input type="text" id="slider_rotation_input_widget_'+t+'" class="form-control" />\n                    </div>\n                </div>\n            </div>    \n          </div>');var a=$(e).attr("data-x"),n=$(e).attr("data-y"),i=$(e).attr("data-z")||0;$("#slider_rotation_widget_"+t).val(i),$("#slider_rotation_input_widget_"+t).val(i),$("#slider_rotation_widget_"+t).unbind().change(function(){var i=$(this).val();$("#slider_rotation_input_widget_"+t).val(i),$(e).attr("data-z",i),$(e).css("transform","translate("+a+"px, "+n+"px) rotate("+i+"deg)")}),$("#slider_rotation_input_widget_"+t).unbind().change(function(){if($(this).val()<0||$(this).val()>360)alert("test : 0 - 360");else{var i=$(this).val();$("#slider_rotation_widget_"+t).val(i),$(e).attr("data-z",i),$(e).css("transform","translate("+a+"px, "+n+"px) rotate("+i+"deg)")}})},this.createTransparency=function(t,e){$(".propertyMenu-2-paper").append('    \n          <div class="propertyMenu-2-block">\n            <div class="container">\n                <div class="row row-block">\n                    <span>Transparency (%)</span>\n                </div>\n                <div class="row row-block">\n                    <div class="col-8" style="padding-left:0px;">\n                        <input type="range" min="0" max="100" value="1" id="slider_tran_widget_'+t+'" class="slider" />\n                    </div>\n                    <div class="col-4">\n                        <input type="text" id="slider_tran_input_widget_'+t+'" class="form-control" />\n                    </div>\n                </div>\n            </div>    \n          </div>'),$("#slider_tran_widget_"+t).val(100-100*$(e).css("opacity")),$("#slider_tran_input_widget_"+t).val(100-100*$(e).css("opacity")),$("#slider_tran_widget_"+t).unbind().change(function(){var a=(100-$(this).val())/100;$("#slider_tran_input_widget_"+t).val($(this).val()),$(e).css("opacity",a)}),$("#slider_tran_input_widget_"+t).unbind().change(function(){if($(this).val()<0||$(this).val()>100)alert("test : 0 - 100");else{var a=(100-$(this).val())/100;$("#slider_tran_widget_"+t).val($(this).val()),$(e).css("opacity",a)}})},this.createBorderRadius=function(t,e,a){$(".propertyMenu-2-paper").append(' \n          <div class="propertyMenu-2-block">\n            <div class="container">\n                <div class="row row-block">\n                    <span>Border radius (%)</span>\n                </div>\n                <div class="row row-block">\n                    <div class="col-8" style="padding-left:0px;">\n                        <input type="range" min="0" max="50" value="0" id="slider_radius_widget_'+t+'" class="slider" />\n                    </div>\n                    <div class="col-4">\n                        <input type="text" id="slider_radius_input_widget_'+t+'" class="form-control" />\n                    </div>\n                </div>\n            </div>    \n          </div>'),$("#slider_radius_widget_"+t).val($(a).css("border-radius").replace("%","")),$("#slider_radius_input_widget_"+t).val($(a).css("border-radius").replace("%","")),$("#slider_radius_widget_"+t).unbind().change(function(){var e=$(this).val();$("#slider_radius_input_widget_"+t).val($(this).val()),$(a).css("border-radius",e+"%")}),$("#slider_radius_input_widget_"+t).unbind().change(function(){if($(this).val()<0||$(this).val()>50)alert("test : 0 - 50");else{var e=$(this).val();$("#slider_radius_widget_"+t).val($(this).val()),$(a).css("border-radius",e+"%")}})},this.createBorderWidth=function(t,e,a){$(".propertyMenu-2-paper").append(' \n          <div class="propertyMenu-2-block">\n            <div class="container">\n                <div class="row row-block">\n                    <span>Border width (px)</span>\n                </div>\n                <div class="row row-block">\n                    <div class="col-8" style="padding-left:0px;">\n                        <input type="range" min="5" max="20" value="0" id="slider_width_widget_'+t+'" class="slider" />\n                    </div>\n                    <div class="col-4">\n                        <input type="text" id="slider_width_input_widget_'+t+'" class="form-control" />\n                    </div>\n                </div>\n            </div>    \n          </div>'),$("#slider_width_widget_"+t).val($(a).css("border-right-width").replace("px","")),$("#slider_width_input_widget_"+t).val($(a).css("border-right-width").replace("px","")),$("#slider_width_widget_"+t).unbind().change(function(){var e=$(this).val();$("#slider_width_input_widget_"+t).val($(this).val()),$(a).css("border-right-width",e+"px")}),$("#slider_width_input_widget_"+t).unbind().change(function(){if($(this).val()<5||$(this).val()>20)alert("test : 0 - 50");else{var e=$(this).val();$("#slider_width_widget_"+t).val($(this).val()),$(a).css("border-right-width",e+"px")}})},this.createChartDetail=function(t,e,a){$(".propertyMenu-2-paper").append('  \n          <div class="propertyMenu-2-block">\n            <div class="container">\n                <div class="row row-block">\n                    <span>Chart properties</span>\n                </div>\n                <div id="color_and_text_'+t+'">\n                </div>\n            </div>    \n          </div>');for(var n=0;n<a.data.datasets.length;n++)$("#color_and_text_"+t).append('   \n              <div class="row row-block">\n                <div class="col-4">\n                    <input type="color" id="color_chart_'+t+"_"+n+'" class="form-control" value="'+a.data.datasets[n].borderColor+'">\n                </div>\n                <div class="col-8">\n                    <input type="text" id="label_chart_'+t+"_"+n+'" class="form-control" value="'+a.data.datasets[n].label+'" />\n                </div>\n              </div>'),$("#color_chart_"+t+"_"+n).change(i(a,n)),$("#label_chart_"+t+"_"+n).keyup(s(a,n));function i(e,a){return function(){e.data.datasets[a].borderColor=$("#color_chart_"+t+"_"+a).val(),e.update(),$("#canvas_"+t).data("graph",e)}}function s(e,a){return function(){e.data.datasets[a].label=$("#label_chart_"+t+"_"+a).val(),e.update(),$("#canvas_"+t).data("graph",e)}}},this.createMapEvent=function(t,e){t.on("mousemove",function(){return void interact(e).draggable(!1)}),t.on("mouseout",function(){return void interact(e).draggable(!0)})}},k=function(t){function e(){c(this,e);var t=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.createGraphProp=function(e,a,n,i){t.createContext(e,n,i,a),t.createEditdata(e,a,n,i),t.createScale(e,n,i),t.createRotation(e,n),t.createTransparency(e,n),t.createChartDetail(e,n,a)},t.createMapProp=function(e,a,n,i){t.createContext(e,a,n,null),t.createScale(e,a,n),t.createRotation(e,a),t.createTransparency(e,a),t.createMapEvent(i,a)},t.createTextProp=function(e,a,n){t.createContext(e,a,n,null),t.createTextchange(e,a),t.createScale(e,a,n),t.createRotation(e,a),t.createTransparency(e,a),t.createColorAndFont(e,a),t.createFontSize(e,a)},t.createTableProp=function(e,a,n){t.createContext(e,a,n,null),t.createImportData(e,a),t.createScale(e,a,n),t.createAddColumnAndRow(e,a),t.createThemesTable(e,a),t.createRotation(e,a),t.createTransparency(e,a)},t.createImageProp=function(e,a,n,i){t.createContext(e,a,i,null),t.createCropImage(e,a,n),t.createScale(e,a,i),t.createRotation(e,a),t.createTransparency(e,a),t.createBorderRadius(e,a,n)},t.createShapeProp=function(e,a,n,i){t.createContext(e,a,i,null),t.createColorAndDeleteForShape(e,a,n,i),"string"==i&&t.createStringStyle(e,a,n),t.createScale(e,a,i),t.createRotation(e,a),t.createTransparency(e,a),"string"==i?t.createBorderWidth(e,a,n):t.createBorderRadius(e,a,n)},t}return d(e,C),e}();$(document).ready(function(){var t=new function t(){c(this,t),this.initialAndRun=function(){$("#btn-add-datasource").unbind().click(function(){(new i.default).DataSourceModel(u)}),$("#btnGraph").unbind().click(function(){e(),console.log("test")}),$("#btnMap").unbind().click(function(){a()}),$("#btnFont").unbind().click(function(){n()}),$("#btnImage").unbind().click(function(){s()}),$("#btnShapes").unbind().click(function(){r()}),$("#btn_save").unbind().click(function(){for(var t=0;t<f.length;t++)if("line"==f[t].type||"bar"==f[t].type||"pie"==f[t].type||"radar"==f[t].type){var e=$("#canvas_"+f[t].id).data("graph");f[t].canvasTag=document.getElementById("div_canvas_"+f[t].id).outerHTML,console.log(e.data),console.log(e.options),f[t].chartData=e.data,f[t].chartOption=e.options,console.log(f[t].chartData),console.log(f[t].chartOption)}else"map"==f[t].type?f[t].mapTag=document.getElementById("div_map_"+f[t].id).outerHTML:"head"==f[t].type?f[t].spanTag=document.getElementById("span_"+f[t].id).outerHTML:"table"==f[t].type?f[t].tableTag=document.getElementById("table_"+f[t].id).outerHTML:"image"==f[t].type?f[t].divImgTag=document.getElementById("div_"+f[t].id).outerHTML:"square"!=f[t].type&&"circle"!=f[t].type&&"string"!=f[t].type||(f[t].divTag=document.getElementById("div_"+f[t].id).outerHTML);$.ajax({url:"http://localhost:8000/api/admin/infographic/updateInfoData",method:"PUT",data:{info_id:u,info_data:v.stringify(f)},success:function(t){alert("success")},error:function(t){alert("error")}})}),$("#btn_fullscreen").unbind().click(function(){var t=window.open();t.document.write("<h1 id='loading'>Loading...</h1>"),$(".sPosition").removeClass("fCorner"),$(".propertyMenu-2").html(""),html2canvas(document.querySelector("#workspace")).then(function(e){var a='<img src="'+e.toDataURL("image/png")+'">';t.document.write(a),t.document.title="Preview",t.document.getElementById("loading").remove()})}),$("#btn_download").unbind().click(function(){var t=window.open();t.document.write("<h1>Please wait for download...</h1>"),$(".sPosition").removeClass("fCorner"),$(".propertyMenu-2").html(""),html2canvas(document.querySelector("#workspace")).then(function(e){t.close();var a=e.toDataURL("image/png"),n=new jsPDF("p","mm","a4"),i=n.internal.pageSize.getWidth(),s=n.internal.pageSize.getHeight();n.addImage(a,"JPEG",0,0,i,s),n.save("ImageDownload.pdf")})})},this.loadWidgetData=function(t){for(var e=0;e<t.length;e++)"line"==t[e].type||"bar"==t[e].type||"pie"==t[e].type||"radar"==t[e].type?(new g).loadGraphData(t[e].id,t[e].canvasTag,t[e].chartData,t[e].chartOption,t[e].type):"map"==t[e].type?(new m).loadMapWidget(t[e].id,t[e].mapTag):"head"==t[e].type?(new y).loadHeadGraph(t[e].id,t[e].spanTag):"table"==t[e].type?(new y).loadTableWidget(t[e].id,t[e].tableTag):"image"==t[e].type?(new w).loadImageWidget(t[e].id,t[e].divImgTag):"square"!=t[e].type&&"circle"!=t[e].type&&"string"!=t[e].type||(new x).loadShapeWidget(t[e].id,t[e].divTag,t[e].type)};var e=function(){$("#btnGraph").hasClass("actives")?o("btnGraph"):(l("btnGraph"),$("#selectMenu").html('\n            <div class="row select-menu-2-context">\n              <span>Add graph</span>\n            </div>\n            <div class="row select-menu-2-paper">\n              <div id="g1" class="row select-menu-2-block">\n                <img src="'+p+'/graph/line.png" class="image-back" style="width:60%; height:60%;"/>\n                <div class="row select-menu-2-title"><span>Line</span></div>\n                <div class="middle-center"><div class="text-popup">Insert</div></div>\n              </div>\n              <div id="g2" class="row select-menu-2-block">\n                <img src="'+p+'/graph/bar.png" class="image-back" style="width:60%; height:60%;"/>\n                <div class="row select-menu-2-title"><span>Bar</span></div>\n                <div class="middle-center"><div class="text-popup">Insert</div></div>\n              </div>\n              <div id="g3" class="row select-menu-2-block">\n                <img  src="'+p+'/graph/pie.png" class="image-back" style="width:60%; height:60%;"/>\n                <div class="row select-menu-2-title"><span>Pie</span></div>\n                <div class="middle-center"><div class="text-popup">Insert</div></div>\n              </div>\n              <div id="g4" class="row select-menu-2-block">\n                <img  src="'+p+'/graph/radar.png" class="image-back" style="width:60%; height:60%;"/>\n                <div class="row select-menu-2-title"><span>Radar</span></div>\n                <div class="middle-center"><div class="text-popup">Insert</div></div>\n              </div>\n            </div>'),$("#g1").unbind().click(function(){(new g).createLineGraph()}),$("#g2").unbind().click(function(){(new g).createBarGraph()}),$("#g3").unbind().click(function(){(new g).createPieGraph()}),$("#g4").unbind().click(function(){(new g).createRadarGraph()}))},a=function(){$("#btnMap").hasClass("actives")?o("btnMap"):(l("btnMap"),$("#selectMenu").html('\n            <div class="row select-menu-2-context">\n              <span>Add map</span>\n            </div>\n            <div class="row select-menu-2-paper">\n              <div id="m1" class="row select-menu-2-block">\n                <img src="'+p+'/map/map.png" class="image-back" style="width:60%; height:60%;"/>\n                <div class="row select-menu-2-title"><span>Thailand</span></div>\n                <div class="middle-center"><div class="text-popup">Insert</div></div>\n              </div>\n            </div>'),$("#m1").unbind().click(function(){(new m).createMapWidget()}))},n=function(){$("#btnFont").hasClass("actives")?o("btnFont"):(l("btnFont"),$("#selectMenu").html('\n            <div class="row select-menu-2-context">\n              <span>Add text</span>\n            </div>\n            <div class="row select-menu-2-paper">\n              <div id="f1" class="row select-menu-2-block">\n                <img src="'+p+'/font/head.png" class="image-back" style="width:60%; height:60%;"/>\n                <div class="row select-menu-2-title"><span>Title</span></div>\n                <div class="middle-center"><div class="text-popup">Insert</div></div>\n              </div>\n              <div id="f2" class="row select-menu-2-block">\n                <img src="'+p+'/font/subtitle.png" class="image-back" style="width:60%; height:60%;"/>\n                <div class="row select-menu-2-title"><span>Subtitle</span></div>\n                <div class="middle-center"><div class="text-popup">Insert</div></div>\n              </div>\n              <div id="f3" class="row select-menu-2-block">\n                <img src="'+p+'/font/table.png" class="image-back" style="width:60%; height:60%;"/>\n                <div class="row select-menu-2-title"><span>Table</span></div>\n                <div class="middle-center"><div class="text-popup">Insert</div></div>\n              </div>\n            </div>'),$("#f1").unbind().click(function(){(new y).createHeadGraph("title")}),$("#f2").unbind().click(function(){(new y).createHeadGraph("subtitle")}),$("#f3").unbind().click(function(){(new y).createTableGraph()}))},s=function(){$("#btnImage").hasClass("actives")?o("btnImage"):(l("btnImage"),$("#selectMenu").html('\n            <div class="row select-menu-2-context">\n              <span>Add image</span>\n            </div>\n            <div class="row select-menu-2-paper">\n              <div id="i1" class="row select-menu-2-block">\n                <img src="'+p+'/image/browse.png" class="image-back" style="width:60%; height:60%;"/>\n                <div class="row select-menu-2-title"><span>Browse</span></div>\n                <div class="middle-center"><div class="text-popup">Insert</div></div>\n              </div>\n              <input type="file" id="inputfile_image" style="display:none;" />\n            </div>'),$("#i1").unbind().click(function(){var t=new w;$("#inputfile_image").click(),$("#inputfile_image").change(function(){var e=new FileReader;e.readAsDataURL($(this)[0].files[0]),e.onload=function(e){t.createImageWidget(e.target.result),$("#btnImage").click(),$("#btnImage").click()}})}))},r=function(){$("#btnShapes").hasClass("actives")?o("btnShapes"):(l("btnShapes"),$("#selectMenu").html('\n            <div class="row select-menu-2-context">\n              <span>Add text</span>\n            </div>\n            <div class="row select-menu-2-paper">\n              <div id="s1" class="row select-menu-2-block">\n                <img src="'+p+'/shape/square.png" class="image-back" style="width:60%; height:60%;"/>\n                <div class="row select-menu-2-title"><span>Square</span></div>\n                <div class="middle-center"><div class="text-popup">Insert</div></div>\n              </div>\n              <div id="s2" class="row select-menu-2-block">\n                <img src="'+p+'/shape/circle.png" class="image-back" style="width:60%; height:60%;"/>\n                <div class="row select-menu-2-title"><span>Circle</span></div>\n                <div class="middle-center"><div class="text-popup">Insert</div></div>\n              </div>\n              <div id="s3" class="row select-menu-2-block">\n                <img src="'+p+'/shape/string.png" class="image-back" style="width:60%; height:60%;"/>\n                <div class="row select-menu-2-title"><span>String</span></div>\n                <div class="middle-center"><div class="text-popup">Insert</div></div>\n              </div>\n            </div>'),$("#s1").unbind().click(function(){(new x).createShapeWidget("square")}),$("#s2").unbind().click(function(){(new x).createShapeWidget("circle")}),$("#s3").unbind().click(function(){(new x).createShapeWidget("string")}))},o=function(t){$("#"+t).removeClass("actives"),$("#selectMenu").html(""),$("#selectMenu").hide()},l=function(t){$("#selectMenu").show(),$(".vertical-menu").find("a").removeClass("actives"),$("#"+t).addClass("actives")}},e=null;t.initialAndRun({}),$.ajax({url:"http://localhost:8000/api/admin/infographic/getInfoByInfoID",method:"GET",data:{info_id:u},success:function(a){null!=a.data.info_data&&(e=v.parse(a.data.info_data),t.loadWidgetData(e))},error:function(t){console.log("error")}})});var M=function(t){return t.map(function(t){return Object.assign({},t)})}}});
