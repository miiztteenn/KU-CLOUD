!function(a){var e={};function t(n){if(e[n])return e[n].exports;var l=e[n]={i:n,l:!1,exports:{}};return a[n].call(l.exports,l,l.exports,t),l.l=!0,l.exports}t.m=a,t.c=e,t.d=function(a,e,n){t.o(a,e)||Object.defineProperty(a,e,{configurable:!1,enumerable:!0,get:n})},t.n=function(a){var e=a&&a.__esModule?function(){return a.default}:function(){return a};return t.d(e,"a",e),e},t.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},t.p="http://localhost:8080/",t(t.s=18)}({18:function(a,e,t){a.exports=t("nlrF")},nlrF:function(a,e){var t="http://localhost:8000/api/",n=null,l=null,s=null,i=new function(){var a=this,e=[],t=null,n=null,l=null,i=null,r=null;this.initialAndRun=function(){a.refreshDatatable()},this.refreshDatatable=function(){p(!0),$.ajax({url:"http://localhost:8000/api/admin/companydata",method:"GET",success:function(a){m(),e=a.company,p(!1),v(a)},error:function(a){console.log(a)}})};var m=function(){if(null!==t)return!1;$("#btn-create").unbind().click(function(){u()}),t=$("#datatable-company").dataTable()},p=function(a){a?($("#datatable-company").hide(),$("#total-company").hide()):($("#datatable-company").show(),$(".text-static").show(),$("#total-company").show(),$(".lds-roller").hide(),$(".text-loading").hide())},v=function(a){var e=new Array;t.fnClearTable();var n=0;$.each(a.company,function(a,t){var l=[];l[0]=t.company_name,l[1]=t.alias,l[2]=t.note,l[3]=' <center>\n                            <button type="button" class="btn btn-primary btn-sm btn-detail" index='+a+' data-toggle="tooltip"\n                                data-placement="top" title="Detail">\n                                <i class="fas fa-list"></i>\n                            </button>\n                            <button type="button" class="btn btn-success btn-sm btn-edit" index='+a+'  data-toggle="tooltip"\n                                data-placement="top" title="Edit">\n                                <i class="fas fa-edit"></i>\n                            </button>\n                            <button type="button" class="btn btn-danger btn-sm btn-delete"  index='+a+'  data-toggle="tooltip"\n                                data-placement="top" title="Delete">\n                                <i class="fas fa-trash-alt"></i>\n                            </button>\n                        </center>',e.push(l),n++}),console.log(a),t.fnAddData(e),$("#total-company").html("Total "+n+" Company"),$("#datatable-company").on("click",".btn-detail",function(){_($(this).attr("index"))}),$("#datatable-company").on("click",".btn-edit",function(){b($(this).attr("index"))}),$("#datatable-company").on("click",".btn-delete",function(){y($(this).attr("index"))}),$('[data-toggle="tooltip"]').tooltip()},u=function(){null===n&&(n='<div class="modal fade" id="addUser">\n                <div class="modal-dialog modal-lg">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h4 class="modal-title">Create Company</h4>\n                            <button type="button" class="close" data-dismiss="modal">&times;</button>\n                        </div>\n                        <div class="modal-body">\n                            <form id="form-add-user">     \n                                <h4>Company detail</h4>         \n                                <div class="row justify-content-center" style="margin-top:20px;">\n                                    <div class="col-xl-11">\n                                        <div class="row mt-2">\n                                            <div class="col-6" style="padding-left:0px;">\n                                                <label for="">Company Name <span class="text-danger">*</span></label>\n                                                <input type="text" class="form-control" id="add_company_name_val" />\n                                                <small class="messages-error"></small>\n                                            </div>\n                                            <div class="col-6" style="padding-right:0px;">\n                                                <label for="">Alias <span class="text-danger">*</span></label>\n                                                <input type="text" class="form-control" id="add_alias_val" />\n                                                <small class="messages-error"></small>\n                                            </div>\n                                        </div>\n                                        <div class="row mt-2">\n                                            <label for="address">Note <span class="text-danger">*</span></label>\n                                            <textarea name="note" id="add_note_val" cols="30" rows="5" class="form-control"></textarea>\n                                            <small class="messages-error"></small>\n                                        </div>\n                                        <div class="row mt-2">\n                                            <label for="address">Address <span class="text-danger">*</span></label>\n                                            <textarea name="address_detail" id="address_create" cols="30" rows="5" class="form-control"></textarea>\n                                            <small class="messages-error"></small>\n                                        </div>\n                                        <div class="row mt-2">\n                                            <label for="province">Province <span class="text-danger">*</span></label>\n                                            <select name="province" id="province_create" class="form-control">\n                                                <option value="">--Select provice--</option>\n                                            </select>\n                                            <small class="messages-error"></small>\n                                        </div>\n                                        <div class="row mt-2">\n                                            <label for="amphure">Amphure <span class="text-danger">*</span></label>\n                                            <select name="amphure" id="amphure_create" class="form-control">\n                                                <option value="">--Select amphure--</option>\n                                            </select>\n                                            <small class="messages-error"></small>\n                                        </div>\n                                        <div class="row mt-2">\n                                            <div class="col-6" style="padding-left:0px;">\n                                                <label for="district">District <span class="text-danger">*</span></label>\n                                                <select name="district" id="district_create" class="form-control">\n                                                    <option value="">--Select district--</option>\n                                                </select>\n                                                <small class="messages-error"></small>\n                                            </div>\n                                            <div class="col-6" style="padding-right:0px;">\n                                                <label for="zip_code">Zip code <span class="text-danger">*</span></label>\n                                                <input name="zip_code" id="zip_code_create" class="form-control">\n                                                <small class="messages-error"></small>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <hr>\n                                <h4>User detail</h4> \n                                <div class="row justify-content-center" style="margin-top:20px;">         \n                                    <div class="col-xl-11">\n                                        <div class="row input-data mt-2">\n                                            <label for="account">Account name<span class="text-danger">*</span></label>\n                                            <input type="text" name="accountname" class="form-control" id="accountname">\n                                            <small class="messages-error"></small>\n                                        </div>\n                                        <div class="row input-data mt-2">\n                                            <div class="col-6" style="padding-left:0px;">\n                                                <label for="firstname">Firstname <span class="text-danger">*</span></label>\n                                                <input type="text" name="firstname" class="form-control" id="firstname">\n                                                <small class="messages-error"></small>\n                                            </div>\n                                            <div class="col-6" style="padding-right:0px;">\n                                                <label for="lname">Lastname <span class="text-danger">*</span></label>\n                                                <input type="text" name="lastname" class="form-control" id="lastname">\n                                                <small class="messages-error"></small>\n                                            </div>\n                                        </div>\n                                        <div class="row input-data mt-2">\n                                            <label for="email">Email address <span class="text-danger">*</span></label>\n                                            <input type="email" name="email" class="form-control" id="email" autocomplete="nope">\n                                            <small class="messages-error"></small>\n                                        </div>\n                                        <div class="row input-data mt-2">\n                                            <label for="phone">Phone <span class="text-danger">*</span></label>\n                                            <input type="text" name="phone" class="form-control" id="phone">\n                                            <small class="messages-error"></small>\n                                        </div>\n                                    </div>\n                                </div>\n                            </form>\n                        </div>              \n                        <div class="modal-footer">\n                            <button type="button" id="btn-create-save" class="btn btn-success btn-block">Save</button>\n                        </div>          \n                    </div>\n                </div>\n            </div>',$("body").append(n)),$("#btn-create-save").unbind().click(function(){f($(this))}),$("#province_create").change(function(){$("#zip_code_create").val(""),""!=$(this).val()?($("#district_create").html('<option value="">--Select district--</option>'),d($(this).val(),"create")):($("#district_create").html('<option value="">--Select district--</option>'),$("#amphure_create").html('<option value="">--Select amphure--</option>'))}),$("#amphure_create").change(function(){$("#zip_code_create").val(""),""!=$(this).val()?c($("#province_create").val(),$(this).val(),"create"):$("#district_create").html('<option value="">--Select district--</option>')}),$("#district_create").change(function(){var a=this;if($("#zip_code_create").val(""),""!=$(this).val()){var e=s.filter(function(e){return e.district_id===$(a).val()});console.log(e),$("#zip_code_create").val(e[0].zip_code)}else $("#zip_code_create").val("")}),o("create"),$("#addUser").modal("show")},f=function(){var e=$("#add_company_name_val").val(),t=$("#add_alias_val").val(),n=$("#add_note_val").val(),l=$("#address_create").val(),s=$("#province_create").val(),i=$("#amphure_create").val(),o=$("#district_create").val(),d=$("#accountname").val(),c=$("#firstname").val(),r=$("#lastname").val(),m=$("#email").val(),p=$("#phone").val();$.ajax({url:"http://localhost:8000/api/admin/companydata/create",dataType:"json",method:"POST",data:{company_name_input:e,alias_input:t,note_input:n,address_detail:l,province:s,amphure:i,district:o,accountname:d,firstname:c,lastname:r,email:m,phone:p},success:function(e){a.refreshDatatable(),$("#addUser").modal("hide")},error:function(a){console.log(a)}})},_=function(a){null===l&&(l='<div class="modal fade" id="detailCompany">\n                <div class="modal-dialog modal-lg">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title" id="title-company">Company Details</h5>\n                            <button type="button" class="close" data-dismiss="modal">&times;</button>\n                        </div>\n                        <div class="modal-body">\n                            <div class="row justify-content-center">\n                                <div class="col-xl-11">\n                                    <div class="row mt-2">\n                                        <div class="col-6" style="padding-left:0px;">\n                                            <label for="">Company Name</label>\n                                            <input type="text" class="form-control" id="company_name_detail" readonly/>\n                                        </div>\n                                        <div class="col-6" style="padding-right:0px;">\n                                            <label for="">Alias</label>\n                                            <input type="text" class="form-control" id="alias_detail" readonly/>\n                                        </div>\n                                    </div>\n                                    <div class="row mt-2">\n                                        <label for="address">Note</label>\n                                        <textarea name="note" id="note_detail" cols="30" rows="5" class="form-control" readonly></textarea>\n                                    </div>\n                                    <div class="row mt-2">\n                                        <label for="address">Address</label>\n                                        <textarea name="address_detail" id="address_detail" cols="30" rows="5" class="form-control" readonly></textarea>\n                                    </div>\n                                    <div class="row mt-2">\n                                        <label for="province">Province</label>\n                                        <input type="text" class="form-control" id="province_detail" readonly/>\n                                    </div>\n                                    <div class="row mt-2">\n                                        <label for="amphure">Amphure</label>\n                                        <input type="text" class="form-control" id="amphure_detail" readonly/>\n                                    </div>\n                                    <div class="row mt-2">\n                                        <div class="col-6" style="padding-left:0px;">\n                                            <label for="district">District</label>\n                                            <input type="text" class="form-control" id="district_detail" readonly/>\n                                        </div>\n                                        <div class="col-6" style="padding-right:0px;">\n                                            <label for="zip_code">Zip code</label>\n                                            <input name="zip_code" id="zip_code_detail" class="form-control" readonly/>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>',$("body").append(l)),$("#company_name_detail").val(e[a].company_name),$("#alias_detail").val(e[a].alias),$("#note_detail").val(e[a].note),$("#address_detail").val(e[a].address_detail),$("#province_detail").val(e[a].pNameTh),$("#amphure_detail").val(e[a].aNameTh),$("#district_detail").val(e[a].dNameTh),$("#zip_code_detail").val(e[a].zip_code),$("#detailCompany").modal("show")},b=function(a){null===i&&(i='<div class="modal fade" id="editCompany">\n                <div class="modal-dialog modal-lg">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h4 class="modal-title">Edit Company</h4>\n                            <button type="button" class="close" data-dismiss="modal">&times;</button>\n                        </div>\n                        <div class="modal-body">\n                            <form id="form-edit-user"> \n                                <div class="row justify-content-center">\n                                    <div class="col-xl-11">\n                                        <div class="row mt-2">\n                                            <div class="col-6" style="padding-left:0px;">\n                                                <label for="">Company Name <span class="text-danger">*</span></label>\n                                                <input type="text" class="form-control" id="company_name_edit" />\n                                                <small class="messages-error"></small>\n                                            </div>\n                                            <div class="col-6" style="padding-right:0px;">\n                                                <label for="">Alias <span class="text-danger">*</span></label>\n                                                <input type="text" class="form-control" id="alias_edit" />\n                                                <small class="messages-error"></small>\n                                            </div>\n                                        </div>\n                                        <div class="row mt-2">\n                                            <label for="address">Note <span class="text-danger">*</span></label>\n                                            <textarea name="note" id="note_edit" cols="30" rows="5" class="form-control"></textarea>\n                                            <small class="messages-error"></small>\n                                        </div>\n                                        <div class="row mt-2">\n                                            <label for="address">Address <span class="text-danger">*</span></label>\n                                            <textarea name="address_detail" id="address_edit" cols="30" rows="5" class="form-control"></textarea>\n                                            <small class="messages-error"></small>\n                                        </div>\n                                        <div class="row mt-2">\n                                            <label for="province">Province <span class="text-danger">*</span></label>\n                                            <select name="province" id="province_edit" class="form-control">\n                                                <option value="">--Select provice--</option>\n                                            </select>\n                                            <small class="messages-error"></small>\n                                        </div>\n                                        <div class="row mt-2">\n                                            <label for="amphure">Amphure <span class="text-danger">*</span></label>\n                                            <select name="amphure" id="amphure_edit" class="form-control">\n                                                <option value="">--Select amphure--</option>\n                                            </select>\n                                            <small class="messages-error"></small>\n                                        </div>\n                                        <div class="row mt-2">\n                                            <div class="col-6" style="padding-left:0px;">\n                                                <label for="district">District <span class="text-danger">*</span></label>\n                                                <select name="district" id="district_edit" class="form-control">\n                                                    <option value="">--Select district--</option>\n                                                </select>\n                                                <small class="messages-error"></small>\n                                            </div>\n                                            <div class="col-6" style="padding-right:0px;">\n                                                <label for="zip_code">Zip code <span class="text-danger">*</span></label>\n                                                <input name="zip_code" id="zip_code_edit" class="form-control">\n                                                <small class="messages-error"></small>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </form>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" id="btn-edit-submit" class="btn btn-success btn-block">Save</button>\n                        </div>\n                    </div>\n                </div>\n            </div>',$("body").append(i)),$("#province_edit").change(function(){$("#zip_code_edit").val(""),""!=$(this).val()?($("#district_edit").html('<option value="">--Select district--</option>'),d($(this).val(),"edit",e[a].amphure_id)):($("#district_edit").html('<option value="">--Select district--</option>'),$("#amphure_edit").html('<option value="">--Select amphure--</option>'))}),$("#amphure_edit").change(function(){$("#zip_code_edit").val(""),""!=$(this).val()?c($("#province_edit").val(),$(this).val(),"edit",e[a].district_id):$("#district_edit").html('<option value="">--Select district--</option>')}),$("#district_edit").change(function(){var a=this;if($("#zip_code_edit").val(""),""!=$(this).val()){var e=s.filter(function(e){return e.district_id===$(a).val()});console.log(e),$("#zip_code_edit").val(e[0].zip_code)}else $("#zip_code_edit").val("")}),o("edit",e[a].province_id),d(e[a].province_id,"edit",e[a].amphure_id),c(e[a].province_id,e[a].amphure_id,"edit",e[a].district_id),$("#company_name_edit").val(e[a].company_name),$("#alias_edit").val(e[a].alias),$("#note_edit").val(e[a].note),$("#address_edit").val(e[a].address_detail),$("#zip_code_edit").val(e[a].zip_code),$("#btn-edit-submit").unbind().click(function(){h(a)}),$("#editCompany").modal("show")},h=function(t){var n=$("#company_name_edit").val(),l=$("#alias_edit").val(),s=$("#note_edit").val(),i=$("#address_edit").val(),o=$("#province_edit").val(),d=$("#amphure_edit").val(),c=$("#district_edit").val();$.ajax({url:"http://localhost:8000/api/admin/companydata/edit",dataType:"json",method:"PUT",data:{company_id_input:e[t].company_id,company_name_input:n,alias_input:l,note_input:s,address_detail:i,province:o,amphure:d,district:c},success:function(e){a.refreshDatatable(),$("#editCompany").modal("hide")},error:function(a){console.log(a)}})},y=function(a){null===r&&(r='<div class="modal fade" id="DeleteUser">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h4 class="modal-title">Delete User Company</h4>\n                            <button type="button" class="close" data-dismiss="modal">&times;</button>\n                        </div>\n                        <div class="modal-body">\n                            <form id="form-delete-user">\n                                <h6 id="span-text-confirm"></h6>\n                            </form>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" id="btn-delete-submit" class="btn btn-danger btn-block">Delete</button>\n                        </div>\n                    </div>\n                </div>\n            </div>',$("body").append(r)),$.ajax({url:"http://localhost:8000/api/admin/companydata/checkdelete",method:"GET",data:{company_id:e[a].id},success:function(t){t?($("#span-text-confirm").html("Are you sure to delete "+e[a].name+" ? "),$("#btn-delete-submit").show()):($("#span-text-confirm").html("Cannot delete."),$("#btn-delete-submit").hide())},error:function(a){console.log(a)}}),$("#btn-delete-submit").unbind().click(function(){g(a)}),$("#DeleteUser").modal("show")},g=function(t){$.ajax({url:"http://localhost:8000/api/admin/companydata/delete",method:"DELETE",data:{company_id:e[t].id},success:function(){a.refreshDatatable(),$("#DeleteUser").modal("hide")},error:function(a){console.log(a)}})}};$(document).ready(function(){i.initialAndRun({})});var o=function(a,e){$.ajax({url:t+"address/provinces",method:"GET",success:function(t){n=t.data,function(a,e){var t='<option value="">--Select province--</option>';n.map(function(a){t+='<option value="'+a.province_id+'">'+a.name_th+" "+a.name_en+"</option>"}),$("#province_"+a).html(t),"edit"==a&&$("#province_"+a).val(e)}(a,e)},error:function(a){console.log(a)}})},d=function(a,e,n){$.ajax({url:t+"address/amphures/province/"+a,method:"GET",success:function(a){l=a.data,function(a,e){var t='<option value="">--Select amphure--</option>';l.map(function(a){t+='<option value="'+a.amphure_id+'">'+a.name_th+" "+a.name_en+"</option>"}),$("#amphure_"+a).html(t),"edit"==a&&$("#amphure_"+a).val(e)}(e,n)},error:function(a){console.log(a)}})},c=function(a,e,n,l){$.ajax({url:t+"address/districts/province/"+a+"/amphure/"+e,method:"GET",success:function(a){s=a.data,function(a,e){var t='<option value="">--Select district--</option>';s.map(function(a){t+='<option value="'+a.district_id+'">'+a.name_th+" "+a.name_en+"</option>"}),$("#district_"+a).html(t),"edit"==a&&$("#district_"+a).val(e)}(n,l)},error:function(a){console.log(a)}})}}});