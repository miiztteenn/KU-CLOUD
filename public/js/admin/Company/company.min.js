!function(a){var n={};function t(e){if(n[e])return n[e].exports;var l=n[e]={i:e,l:!1,exports:{}};return a[e].call(l.exports,l,l.exports,t),l.l=!0,l.exports}t.m=a,t.c=n,t.d=function(a,n,e){t.o(a,n)||Object.defineProperty(a,n,{configurable:!1,enumerable:!0,get:e})},t.n=function(a){var n=a&&a.__esModule?function(){return a.default}:function(){return a};return t.d(n,"a",n),n},t.o=function(a,n){return Object.prototype.hasOwnProperty.call(a,n)},t.p="http://localhost:8080/",t(t.s=13)}({13:function(a,n,t){a.exports=t("nlrF")},nlrF:function(a,n){var t="http://localhost:8000/api/",e=new function(){var a=this,n=[],t=null,e=null,i=null,d=null,c=null;this.initialAndRun=function(){a.refreshDatatable()},this.refreshDatatable=function(){m(!0),$.ajax({url:"http://localhost:8000/api/admin/companydata",method:"GET",success:function(a){r(),n=a.company,m(!1),p(a)},error:function(a){console.log(a)}})};var r=function(){if(null!==t)return!1;$("#btn-create").unbind().click(function(){u()}),t=$("#datatable-company").dataTable()},m=function(a){a?($("#datatable-company").hide(),$("#total-company").hide()):($("#datatable-company").show(),$(".text-static").show(),$("#total-company").show(),$(".lds-roller").hide(),$(".text-loading").hide())},p=function(a){var n=new Array;t.fnClearTable();var e=0;$.each(a.company,function(a,t){var l=[];l[0]=t.name,l[1]=t.alias,l[2]=t.note,l[3]=' <center>\n                            <button type="button" class="btn btn-primary btn-sm btn-detail" index='+a+' data-toggle="tooltip"\n                                data-placement="top" title="Detail">\n                                <i class="fas fa-list"></i>\n                            </button>\n                            <button type="button" class="btn btn-success btn-sm btn-edit" index='+a+'  data-toggle="tooltip"\n                                data-placement="top" title="Edit">\n                                <i class="fas fa-edit"></i>\n                            </button>\n                            <button type="button" class="btn btn-danger btn-sm btn-delete"  index='+a+'  data-toggle="tooltip"\n                                data-placement="top" title="Delete">\n                                <i class="fas fa-trash-alt"></i>\n                            </button>\n                        </center>',n.push(l),e++}),t.fnAddData(n),$("#total-company").html("Total "+e+" Company"),$("#datatable-company").on("click",".btn-detail",function(){h($(this).attr("index"))}),$("#datatable-company").on("click",".btn-edit",function(){f($(this).attr("index"))}),$("#datatable-company").on("click",".btn-delete",function(){b($(this).attr("index"))}),$('[data-toggle="tooltip"]').tooltip()},u=function(){null===e&&(e='<div class="modal fade" id="addUser">\n                <div class="modal-dialog modal-lg">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h4 class="modal-title">Create Company</h4>\n                            <button type="button" class="close" data-dismiss="modal">&times;</button>\n                        </div>\n                        <div class="modal-body">\n                            <form id="form-add-user">     \n                                <h4>Company detail</h4>         \n                                <div class="row justify-content-center" style="margin-top:20px;">\n                                    <div class="col-xl-11">\n                                        <div class="row">\n                                            <div class="col-6" style="padding-left:0px;">\n                                                <label for="">Company Name <span class="text-danger">*</span></label>\n                                                <input type="text" class="form-control" id="add_company_name_val" />\n                                                <small class="messages-error"></small>\n                                            </div>\n                                            <div class="col-6" style="padding-right:0px;">\n                                                <label for="">Alias <span class="text-danger">*</span></label>\n                                                <input type="text" class="form-control" id="add_alias_val" />\n                                                <small class="messages-error"></small>\n                                            </div>\n                                        </div>\n                                        <div class="row">\n                                            <label for="address">Note <span class="text-danger">*</span></label>\n                                            <textarea name="note" id="add_note_val" cols="30" rows="5" class="form-control"></textarea>\n                                            <small class="messages-error"></small>\n                                        </div>\n                                        <div class="row">\n                                            <label for="address">Address <span class="text-danger">*</span></label>\n                                            <textarea name="address_detail" id="address_detail" cols="30" rows="5" class="form-control"></textarea>\n                                            <small class="messages-error"></small>\n                                        </div>\n                                        <div class="row">\n                                            <label for="province">Province <span class="text-danger">*</span></label>\n                                            <select name="province" id="province" class="form-control">\n                                                <option value="">--Select provice--</option>\n                                            </select>\n                                            <small class="messages-error"></small>\n                                        </div>\n                                        <div class="row">\n                                            <label for="amphure">Amphure <span class="text-danger">*</span></label>\n                                            <select name="amphure" id="amphure" class="form-control">\n                                                <option value="">--Select amphure--</option>\n                                            </select>\n                                            <small class="messages-error"></small>\n                                        </div>\n                                        <div class="row">\n                                            <div class="col-6" style="padding-left:0px;">\n                                                <label for="district">District <span class="text-danger">*</span></label>\n                                                <select name="district" id="district" class="form-control">\n                                                    <option value="">--Select district--</option>\n                                                </select>\n                                                <small class="messages-error"></small>\n                                            </div>\n                                            <div class="col-6" style="padding-right:0px;">\n                                                <label for="zip_code">Zip code <span class="text-danger">*</span></label>\n                                                <input name="zip_code" id="zip_code" class="form-control">\n                                                <small class="messages-error"></small>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <hr>\n                                <h4>User detail</h4> \n                                <div class="row justify-content-center" style="margin-top:20px;">         \n                                    <div class="col-xl-11">\n                                        <div class="row input-data">\n                                            <label for="account">Account name<span class="text-danger">*</span></label>\n                                            <input type="text" name="accountname" class="form-control" id="accountname">\n                                            <small class="messages-error"></small>\n                                        </div>\n                                        <div class="row input-data">\n                                            <div class="col-6" style="padding-left:0px;">\n                                                <label for="firstname">Firstname <span class="text-danger">*</span></label>\n                                                <input type="text" name="firstname" class="form-control" id="firstname">\n                                                <small class="messages-error"></small>\n                                            </div>\n                                            <div class="col-6" style="padding-right:0px;">\n                                                <label for="lname">Lastname <span class="text-danger">*</span></label>\n                                                <input type="text" name="lastname" class="form-control" id="lastname">\n                                                <small class="messages-error"></small>\n                                            </div>\n                                        </div>\n                                        <div class="row input-data">\n                                            <label for="email">Email address <span class="text-danger">*</span></label>\n                                            <input type="email" name="email" class="form-control" id="email" autocomplete="nope">\n                                            <small class="messages-error"></small>\n                                        </div>\n                                        <div class="row input-data">\n                                            <label for="phone">Phone <span class="text-danger">*</span></label>\n                                            <input type="text" name="phone" class="form-control" id="phone">\n                                            <small class="messages-error"></small>\n                                        </div>\n                                    </div>\n                                </div>\n                            </form>\n                        </div>              \n                        <div class="modal-footer">\n                            <button type="button" id="btn-create-save" class="btn btn-success btn-block">Save</button>\n                        </div>          \n                    </div>\n                </div>\n            </div>',$("body").append(e)),$("#btn-create-save").unbind().click(function(){v($(this))}),$("#province").change(function(){$("#zip_code").val(""),""!=$(this).val()?($("#district").html('<option value="">--Select district--</option>'),s($(this).val())):($("#district").html('<option value="">--Select district--</option>'),$("#amphure").html('<option value="">--Select amphure--</option>'))}),$("#amphure").change(function(){$("#zip_code").val(""),""!=$(this).val()?o($("#province").val(),$(this).val()):$("#district").html('<option value="">--Select district--</option>')}),$("#district").change(function(){var a=this;if($("#zip_code").val(""),""!=$(this).val()){var n=districts.filter(function(n){return n.district_id===$(a).val()});console.log(n),$("#zip_code").val(n[0].zip_code)}else $("#zip_code").val("")}),l(),$("#addUser").modal("show")},v=function(){var n=$("#add_company_name_val").val(),t=$("#add_alias_val").val(),e=$("#add_note_val").val(),l=$("#address_detail").val(),s=$("#province").val(),o=$("#amphure").val(),i=$("#district").val(),d=$("#accountname").val(),c=$("#firstname").val(),r=$("#lastname").val(),m=$("#email").val(),p=$("#phone").val();$.ajax({url:"http://localhost:8000/api/admin/companydata/create",dataType:"json",method:"POST",data:{company_name_input:n,alias_input:t,note_input:e,address_detail:l,province:s,amphure:o,district:i,accountname:d,firstname:c,lastname:r,email:m,phone:p},success:function(n){a.refreshDatatable(),$("#addUser").modal("hide")},error:function(a){console.log(a)}})},h=function(a){null===i&&(i='<div class="modal fade" id="detailCompany">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title" id="title-company">Company Details</h5>\n                            <button type="button" class="close" data-dismiss="modal">&times;</button>\n                        </div>\n                        <div class="modal-body">\n                            <h6>Company Name : <span id="name-company"><span></h6>\n                            <h6>Alias : <span id="alias-company"><span></h6>\n                            <h6>Address : <span id="address-company"><span></h6>\n                            <h6>Note : <span id="note-company"><span></h6>\n                            <h6>Create Date : <span id="create-company"><span></h6>\n                            <h6>Update Date : <span id="update-company"><span></h6>\n                        </div>\n                    </div>\n                </div>\n            </div>',$("body").append(i)),$("#name-company").html(n[a].name),$("#alias-company").html(n[a].alias),$("#address-company").html(n[a].address),$("#note-company").html(n[a].note),$("#create-company").html(n[a].created_at),$("#update-company").html(n[a].updated_at),$("#detailCompany").modal("show")},f=function(a){null===d&&(d='<div class="modal fade" id="editCompany">\n                <div class="modal-dialog modal-lg">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h4 class="modal-title">Edit Company</h4>\n                            <button type="button" class="close" data-dismiss="modal">&times;</button>\n                        </div>\n                        <div class="modal-body">\n                            <form id="form-edit-user">\n                                <div class="row">\n                                    <input type="hidden" class="form-control" id="company_id" />\n                                    <div class="col-6">\n                                        <label for="">Company Name</label>\n                                        <input type="text" class="form-control" id="company_name" />\n                                        <label for="">Address</label>\n                                        <input type="text" class="form-control" id="address_val" />\n                                    </div>\n                                    <div class="col-6">\n                                        <label for="">Alias</label>\n                                        <input type="text" class="form-control" id="alias_val" />\n                                        <label for="">Note</label>\n                                        <input type="text" class="form-control" id="note_val" />\n                                    </div>\n                                </div>\n                            </form>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" id="btn-edit-submit" class="btn btn-success btn-block">Save</button>\n                        </div>\n                    </div>\n                </div>\n            </div>',$("body").append(d)),$("#company_id").val(n[a].id),$("#company_name").val(n[a].name),$("#alias_val").val(n[a].alias),$("#address_val").val(n[a].address),$("#note_val").val(n[a].note),$("#btn-edit-submit").unbind().click(function(){editSaveChange($(this))}),$("#editCompany").modal("show")},b=function(a){null===c&&(c='<div class="modal fade" id="DeleteUser">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h4 class="modal-title">Delete User Company</h4>\n                            <button type="button" class="close" data-dismiss="modal">&times;</button>\n                        </div>\n                        <div class="modal-body">\n                            <form id="form-delete-user">\n                                <h6 id="span-text-confirm"></h6>\n                            </form>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" id="btn-delete-submit" class="btn btn-danger btn-block">Delete</button>\n                        </div>\n                    </div>\n                </div>\n            </div>',$("body").append(c)),$.ajax({url:"http://localhost:8000/api/admin/companydata/checkdelete",method:"GET",data:{company_id:n[a].id},success:function(t){t?($("#span-text-confirm").html("Are you sure to delete "+n[a].name+" ? "),$("#btn-delete-submit").show()):($("#span-text-confirm").html("Cannot delete."),$("#btn-delete-submit").hide())},error:function(a){console.log(a)}}),$("#btn-delete-submit").unbind().click(function(){y(a)}),$("#DeleteUser").modal("show")},y=function(t){$.ajax({url:"http://localhost:8000/api/admin/companydata/delete",method:"DELETE",data:{company_id:n[t].id},success:function(){a.refreshDatatable(),$("#DeleteUser").modal("hide")},error:function(a){console.log(a)}})}};$(document).ready(function(){e.initialAndRun({})});var l=function(){$.ajax({url:t+"address/provinces",method:"GET",success:function(a){var n;provinces=a.data,n='<option value="">--Select province--</option>',provinces.map(function(a){n+='<option value="'+a.province_id+'">'+a.name_th+" "+a.name_en+"</option>"}),$("#province").html(n)},error:function(a){console.log(a)}})},s=function(a){$.ajax({url:t+"address/amphures/province/"+a,method:"GET",success:function(a){var n;amphures=a.data,n='<option value="">--Select amphure--</option>',amphures.map(function(a){n+='<option value="'+a.amphure_id+'">'+a.name_th+" "+a.name_en+"</option>"}),$("#amphure").html(n)},error:function(a){console.log(a)}})},o=function(a,n){$.ajax({url:t+"address/districts/province/"+a+"/amphure/"+n,method:"GET",success:function(a){var n;districts=a.data,n='<option value="">--Select district--</option>',districts.map(function(a){n+='<option value="'+a.district_id+'">'+a.name_th+" "+a.name_en+"</option>"}),$("#district").html(n)},error:function(a){console.log(a)}})}}});