!function(t){var e={};function a(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="http://localhost:8080/",a(a.s=0)}({"+pUu":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=/([a-zA-Z0-9_]+)/g;e.default=function t(e,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=e,this.config=a,this.createTableEx=function(){e.find("thead").empty(),e.find("tbody").empty(),e.find("thead").append("<tr></tr>");for(var t=0;t<a.col.amount;t++)e.find("thead tr").append('<th><input type="text" value="col'+t+'" class="form-control col-label"></th>');for(var n=0;n<a.row.amount;n++){for(var i="",r=0;r<a.col.amount;r++)i+=0===r?'<td><input type="text" value="row'+n+'" class="form-control row-label"></td>':'<td><input type="text" class="form-control value-datasource" placeholder="datasource">\n                                    <ul class="list-group data-list" style="display: none"></ul>\n                                </td>';e.find("tbody").append("<tr>"+i+"</tr>")}},this.addCol=function(){e.find("thead tr").append('<th><input type="text" value="col'+a.col.amount+'" class="form-control col-label"></th>'),e.find("tbody tr").each(function(){$(this).append('<td><input type="text" class="form-control value-datasource" placeholder="datasource">\n                                    <ul class="list-group data-list" style="display: none"></ul>\n                                </td>')}),a.col.amount+=1},this.removeCol=function(){a.col.amount>=2&&(e.find("thead tr th:last").remove(),e.find("tbody tr").each(function(){$(this).find("td:last").remove()}),a.col.amount-=1)},this.addRow=function(){for(var t="",n=0;n<a.col.amount;n++)t+=0===n?'<td><input type="text" value="row'+a.row.amount+'" class="form-control row-label"></td>':'<td><input type="text" class="form-control value-datasource" placeholder="datasource">\n                                <ul class="list-group data-list" style="display: none"></ul>\n                             </td>';a.row.amount+=1,e.find("tbody").append("<tr>"+t+"</tr>")},this.removeRow=function(){a.row.amount>=2&&(e.find("tbody tr:last").remove(),a.row.amount-=1)},this.getValue=function(){var t=[];e.find(".col-label").each(function(){t.push($(this).val())});var a=[];return e.find(".row-label").each(function(){var t=$(this).val(),e=[];$(this).parent().parent().find(".value-datasource").each(function(){e.push($(this).val().match(n))}),a.push({label:t,data:e})}),{col_labels:t,rows:a}}}},0:function(t,e,a){t.exports=a("AG5F")},"0v0P":function(t,e,a){"use strict";a.d(e,"e",function(){return n}),a.d(e,"d",function(){return i}),a.d(e,"f",function(){return r}),a.d(e,"a",function(){return l}),e.b=function(t){$(t.parent).find("input, textarea, select").each(function(){$(this).change(function(){var e=$(this).attr("name"),a=$(this).val(),n={};n[e]=""==a?null:a;var i=validate(n,t.validate)||{};s($(this),i[e])})})},e.c=function(t){var e=!0,a={};$(t.parent).find("input, textarea, select").each(function(){var t=$(this).attr("name"),e=$(this).val();a[t]=""==e?null:e});var n=validate(a,t.validate)||{};validate.isEmpty(n)?e=!1:(!function(t){$(t.parent).find("input, textarea, select").each(function(){var e=$(this).attr("name"),a=$(this).val(),n={};n[e]=""==a?null:a;var i=validate(n,t.validate)||{};s($(this),i[e])})}(t),e=!0);return console.log("isError = "+e),e},e.g=function(){$("input, textarea, select").removeClass("has-success"),$("input, textarea, select").removeClass("has-error"),$(".messages-error").html("")};var n=function(t){return t.map(function(t){return Object.assign({},t)})},i=function(t,e){return t=t.replace("#",""),"rgba("+parseInt(t.substring(0,2),16)+","+parseInt(t.substring(2,4),16)+","+parseInt(t.substring(4,6),16)+","+e/100+")"},r=function(){return"#"+(16777215*Math.random()<<0).toString(16)},o=null,l={set:function(t){o=t.html();var e=t.attr("data-loading-text");t.html(e),t.prop("disabled",!0)},reset:function(t){t.html(o),t.prop("disabled",!1)}};function s(t,e){e?(t.removeClass("has-success"),t.addClass("has-error"),t.parent().find(".messages-error").html(e[0])):(t.removeClass("has-error"),t.addClass("has-success"),t.parent().find(".messages-error").html(""))}},AG5F:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Xxa5"),i=a.n(n),r=a("0v0P"),o=a("t4zo"),l=a.n(o),s=a("+pUu"),d=a("SeUI"),u=a.n(d),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}();function p(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function n(i,r){try{var o=e[i](r),l=o.value}catch(t){return void a(t)}if(!o.done)return Promise.resolve(l).then(function(t){n("next",t)},function(t){n("throw",t)});t(l)}("next")})}}Chart.defaults.global.defaultFontFamily="'Poppins', 'Kanit', 'sans-serif'";var m="http://localhost:8000/api/",b=null,y=/([a-zA-Z0-9_]+)/g,w={MUTILINE:"MutiLine",TEXTLINE:"TextLine",RADAR:"Radar",GAUGES:"Gauges",MAP:"Map",TEXTVALUE:"TextValue",TABLE:"Table",TEXTBOX:"TextBox"},x=null,E={loadingApi:!1},T=function t(e){var a=this;h(this,t),this.widget=e;var n=null;this.createModalEdit=function(t,e){null===n&&(n='<div class="modal fade" id="EditWidget">\n                                        <div class="modal-dialog modal-lg">\n                                            <div class="modal-content">\n                                                <div class="modal-header">\n                                                    <h5 class="modal-title">Edit Widget</h5>\n                                                    <button type="button" class="close" data-dismiss="modal">&times;</button>\n                                                </div>\n\n                                                <div class="modal-body" id="form-edit-widget">     \n                                                </div>\n\n                                                <div class="modal-footer">\n                                                    <button type="button" id="btn-submit-edit-widget" class="btn btn-success btn-block">Save</button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>',$("body").append(n)),$("#form-edit-widget").html(t),$("#EditWidget").modal("show")},this.submitEditClick=function(t){$("#btn-submit-edit-widget").unbind().click(function(){t()})},this.closeModalEdit=function(){$("#EditWidget").modal("hide")},this.findTitleWidget=function(){return $("#"+a.widget.itemId).find(".title-widget")}},I=function(t){function e(t){h(this,e);var a=p(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n=function(){a.submitEditClick(i)},i=function(){var t=$("#edit-title").val();$(a.findTitleWidget()).html(t),a.widget.title_name=t,a.closeModalEdit()};return a.initCreate=function(){a.createModalEdit('<div class="row" id="div-title">\n                            <div class="col-6">\n                                <lable>Title</label>\n                            <input type="text" class="form-control" id="edit-title"/>\n                            </div>\n                        </div>',n),n(),$("#edit-title").val(t.title_name)},a}return v(e,T),e}(),k=function(t){function e(t){h(this,e);var a=p(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n=function(){a.submitEditClick(i)},i=function(){var t=$("#edit-title").val(),e=$("#edit-unit").val();a.widget.itemId.replace("item-","unit_");$(a.findTitleWidget()).html(t),a.widget.gaugeWidget={},a.widget.gaugeWidget=new JustGage({id:a.widget.widgetId,value:0,min:a.widget.limitMin,max:a.widget.limitMax,symbol:" "+e,relativeGaugeSize:!0,titlePosition:"below"}),a.widget.title_name=t,a.widget.unit=e,a.closeModalEdit()};return a.initCreate=function(){a.createModalEdit('<div id="edit-Gauges" class="edit-widget-form"> \n                            <div class="row">\n                                <div class="col-6">\n                                    <lable>Title</label>\n                                    <input type="text" class="form-control" id="edit-title"/>\n                                </div>\n                                <div class="col-6">\n                                    <lable>Unit</label>\n                                    <input type="text" class="form-control" id="edit-unit"/>\n                                </div>\n                            </div>\n                        </div>',n),n(),$("#edit-title").val(t.title_name),$("#edit-unit").val(t.unit)},a}return v(e,T),e}(),M=function(t){function e(t){h(this,e);var a=p(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n=function(){a.submitEditClick(i)},i=function(){var t=$("#edit-title").val();$(a.findTitleWidget()).html(t),a.widget.title_name=t,a.closeModalEdit()};return a.initCreate=function(){a.createModalEdit('<div class="row" id="div-title">\n                            <div class="col-6">\n                                <lable>Title</label>\n                            <input type="text" class="form-control" id="edit-title"/>\n                            </div>\n                        </div>',n),n(),$("#edit-title").val(t.title_name)},a}return v(e,T),e}(),A=function(t){function e(t){h(this,e);var a=p(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n=function(){a.submitEditClick(i)},i=function(){var t=$("#edit-title").val(),e=$("#edit-unit").val();$(a.findTitleWidget()).html(t),$("#"+a.widget.widgetId).next("span").html(e),a.widget.title_name=t,a.widget.unit=e,a.closeModalEdit()};return a.initCreate=function(){a.createModalEdit('<div class="row" id="div-title">\n                            <div class="col-6">\n                                <lable>Title</label>\n                                <input type="text" class="form-control" id="edit-title"/>\n                            </div>\n                            <div class="col-6">\n                                <lable>Unit</label>\n                                <input type="text" class="form-control" id="edit-unit"/>\n                            </div>\n                        </div>',n),n(),$("#edit-title").val(t.title_name),$("#edit-unit").val(t.unit)},a}return v(e,T),e}(),S=function(t){function e(t){h(this,e);var a=p(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n=function(){a.submitEditClick(i)},i=function(){var t=$("#edit-title").val(),e=$("#edit-unit").val(),n=a.widget.itemId.replace("item-","unit_");$(a.findTitleWidget()).html(t),$("#"+n).html(e),a.widget.title_name=t,a.widget.unit=e,a.closeModalEdit()};return a.initCreate=function(){a.createModalEdit('<div class="row" id="div-title">\n                            <div class="col-6">\n                                <lable>Title</label>\n                                <input type="text" class="form-control" id="edit-title"/>\n                            </div>\n                            <div class="col-6">\n                                <lable>Unit</label>\n                                <input type="text" class="form-control" id="edit-unit"/>\n                            </div>\n                        </div>',n),n(),$("#edit-title").val(t.title_name),$("#edit-unit").val(t.unit)},a}return v(e,T),e}(),j=function(t){function e(t){h(this,e);var a=p(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n=function(){a.submitEditClick(i)},i=function(){$("#"+t.widgetId).html($("#edit-text-custom").val()),$("#"+t.widgetId).css({"font-size":$("#edit-font-size").val()+"px"}),t.textbox=$("#edit-text-custom").val(),t.fontsize=$("#edit-font-size").val(),a.closeModalEdit()};return a.initCreate=function(){a.createModalEdit('<div id = "edit-text-box" class="value_widget">\n                            <div class="row">\n                                <div class="col-6">\n                                    <label>Text</label>\n                                    <input type="text" id="edit-text-custom" class="form-control" />\n                                </div>\n                                <div class="col-6">\n                                    <label>Font Size (px)</label>\n                                    <input type="number" id="edit-font-size" class="form-control" />\n                                </div>\n                            </div>\n                        </div> ',n),n(),$("#edit-text-custom").val(t.textbox),$("#edit-font-size").val(t.fontsize)},a}return v(e,T),e}(),C=function(){function t(e){var a=this;h(this,t),this.itemId=e.itemId,this.widgetId=e.widgetId,this.datasource=e.datasource,this.type=e.type,this.lastUpdateId=e.lastUpdateId,this.title_name=e.title_name,this.lastUpdate=e.lastUpdate,this.timeInterval=e.timeInterval,this.wi=e.wi,this.download=e.download,this.updateLastUpdate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t?(a.lastUpdate=new Date(t),$("#"+a.lastUpdateId).html(a.lastUpdate.toDateString()+" "+a.lastUpdate.toLocaleTimeString())):(a.lastUpdate=new Date,$("#"+a.lastUpdateId).html(a.lastUpdate.toDateString()+" "+a.lastUpdate.toLocaleTimeString()))};var n={cellHeight:80,verticalMargin:10,float:!1},i=[{x:0,y:0,width:6,height:7}],r=null,o=function(){$(".btn-delete-wi").unbind().click(function(){d($(this))}),$(".btn-edit-wi").unbind().click(function(){var t,e,a,n;t=$(this),e=$(t).attr("item"),a=X.getWidgetById(e),n=null,a.type===w.MUTILINE?n=new I(a):a.type===w.TEXTLINE?n=new S(a):a.type===w.GAUGES?n=new k(a):a.type===w.MAP?n=new M(a):a.type===w.TEXTVALUE?n=new A(a):a.type===w.TEXTBOX&&(n=new j(a)),n.initCreate()}),$(".btn-full-screen").unbind().click(function(){s($(this))}),$(".btn-download").unbind().click(function(){var t=X.getWidgetById($(this).attr("item")),e=document.getElementById(t.widgetId);html2canvas(e).then(function(t){l()(t.toDataURL(),"file-name.png")})})},s=function(t){var e=X.getWidgetById(t.attr("item"));$("#modal-full-screen").modal("show"),$("#content-widget").html(e.selectWiContentFull()),e.createFullWidget()},d=function(t){swal({title:"Are you sure?",text:"Delete this widget",icon:"warning",buttons:!0,dangerMode:!0}).then(function(e){e&&u($(t))})},u=function(t){var e=$(t).attr("item");r.removeWidget($("#"+e).closest(".grid-stack-item"));var a=z.findIndex(function(t){return t.itemId==e});z.splice(a,1)};this.selectWiContent=function(){switch(a.type){case w.MUTILINE:return'<canvas id="'+a.widgetId+'"></canvas>';case w.TEXTLINE:return' <h2 class="text-left"><span id="'+a.itemId.replace("item-","value-")+'">0</span> <span  id="'+a.itemId.replace("item-","unit-")+'">'+a.unit+'</span></h2>\n                             <canvas id="'+a.widgetId+'"></canvas>\n                            ';case w.RADAR:return'<canvas id="'+a.widgetId+'"></canvas>';case w.GAUGES:return a.itemId.replace("item-","gauges-text-"),a.itemId.replace("item-","unit_"),'\n                            <div id="'+a.widgetId+'"></div>\n                            ';case w.MAP:return'<div id="'+a.widgetId+'"></div>';case w.TABLE:return'<div>\n                            <table class="table table-bordered" id="'+a.widgetId+'" >\n                                <thead></thead><tbody></tbody>\n                            </table>\n                            </div>';case w.TEXTVALUE:return'\n                            <h1 style="color:'+a.rgb+'"><span id="'+a.widgetId+'">0</span> <span>'+a.unit+"</span><h1>\n                            ";case w.TEXTBOX:return'<span id="'+a.widgetId+'"></span>'}},this.selectWiContentFull=function(){switch(a.type){case w.MUTILINE:return'<canvas id="'+a.fullScreenId+'"></canvas>';case w.TEXTLINE:return' <h2 class="text-left"><span id="'+a.itemId.replace("item-","value_full")+'">0</span> '+a.unit+'</h2>\n                             <canvas id="'+a.fullScreenId+'"></canvas>\n                            ';case w.GAUGES:return'\n                            <h2><span id="'+a.itemId.replace("item-","gauges-text-full")+'">0</span> <span>'+a.unit+'</span></h2>\n                            <canvas id="'+a.fullScreenId+'"></canvas>\n                            ';case w.MAP:return'\n                            <div id="'+a.fullScreenId+'"></div>\n                            '}},this.createWidget=function(){var t,e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t=Math.floor(1e5+9e5*Math.random()),e=a.type.toLowerCase(),a.itemId="item-"+t,a.widgetId=e+"-"+t,a.lastUpdateId=e+"-lastupdate-"+t;var s=i.pop()||{x:3,y:4,width:6,height:7};$(".grid-stack").gridstack(n),r=$(".grid-stack").data("gridstack");var d="";"TextBox"!==a.type?(d=$("#layout-widget").html(),"TextValue"===a.type&&(s.width=4,s.height=4,d=$("#layout-widget-text-value").html()),d=(d=(d=(d=(d=d.replace(/div_id/g,a.itemId)).replace(/widget_id/g,a.widgetId)).replace("((wi))",a.selectWiContent())).replace("((title_name))",a.title_name)).replace("{last_update}",a.lastUpdateId)):(s.width=6,s.height=1,d=(d=(d=$("#layout-widget-text").html()).replace(/div_id/g,a.itemId)).replace("((wi))",a.selectWiContent())),s.id=a.itemId;var u=null;u=l?r.addWidget($(d),l.x,l.y,l.width,l.height,!0,null,null,null,null,s.id):r.addWidget($(d),s.x,s.y,s.width,s.height,!0,null,null,null,null,s.id),a.download||u.find(".full-screen").find(".btn-download").remove(),o()}}return f(t,null,[{key:"formateDataSave",value:function(t){var e={type:t.type,datasource:t.datasource,download:!!t.download&&t.download,timeInterval:t.timeInterval};return t.type===w.MUTILINE?(e.isGroupData=t.isGroupData,e.title_name=t.title_name,e.datasets=t.datasets):t.type===w.TEXTLINE?(e.title_name=t.title_name,e.unit=t.unit,e.rgb=t.rgb):t.type===w.RADAR?(e.datasets=t.datasets,e.title_name=t.title_name,e.labels=t.labels,e.label=t.label,e.color=t.color):t.type===w.GAUGES?(e.title_name=t.title_name,e.opts=t.opts,e.limitMin=t.limitMin,e.limitMax=t.limitMax,e.unit=t.unit):t.type===w.MAP?e.title_name=t.title_name:t.type===w.TABLE?(e.title_name=t.title_name,e.table=t.table):t.type===w.TEXTVALUE?(e.title_name=t.title_name,e.unit=t.unit,e.rgb=t.rgb):t.type===w.TEXTBOX&&(e.textbox=t.textbox,e.fontsize=t.fontsize),e}}]),t}(),O=function(t){function e(t){h(this,e);var a=p(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));a.isGroupData=t.isGroupData,a.fullScreenId=t.fullScreenId,a.chart=null,a.datasets=t.datasets;var n={maintainAspectRatio:!1,scales:{yAxes:[{gridLines:{display:!1},ticks:{beginAtZero:!0,fontFamily:"'Poppins', 'Kanit', 'sans-serif'",fontStyle:"bold"}}],xAxes:[{gridLines:{display:!1},ticks:{fontFamily:"'Poppins', 'Kanit', 'sans-serif'",fontStyle:"bold"}}]},legend:{labels:{fontFamily:"'Poppins', 'Kanit', 'sans-serif'",fontColor:"black"}},tooltips:{mode:"nearest",intersect:!1},hover:{mode:"nearest",intersect:!1}};return a.createMutiLine=function(){var t=document.getElementById(a.widgetId),e=new Chart(t,{type:"line",data:{datasets:Object(r.e)(a.datasets)},options:n});a.chart=e},a.createFullWidget=function(){var t=document.getElementById(a.fullScreenId);new Chart(t,{type:"line",data:{datasets:Object(r.e)(a.datasets)},options:n})},a.updateData=function(){var t=a.chart,e=new Date;t.data.labels.push(e.toLocaleTimeString());var n=0;t.data.datasets.forEach(function(t){t.data.length>10&&t.data.splice(0,1),a.isGroupData?t.data.push(u.a.get(b.getDatasources(),a.datasource.replace("[]",n))):t.data.push(b.fatoryGetDatasourceValue(a.datasource[n],a.datasource[n][1])),n++}),t.data.labels.length>10&&t.data.labels.splice(0,1),t.update(),a.updateLastUpdate()},a}return v(e,C),e}(),D=function(t){function e(t){h(this,e);var a=p(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));a.fullScreenId=t.fullScreenId,a.unit=t.unit,a.rgb=t.rgb;var n={maintainAspectRatio:!1,responsive:!0,scales:{yAxes:[{display:!1}],xAxes:[{display:!1}]},legend:{display:!1},elements:{point:{radius:0},line:{tension:0}},layout:{padding:{left:0,right:0,top:0,bottom:30}},stepsize:100};return a.createTextLine=function(){var t=document.getElementById(a.widgetId),e=new Chart(t,{type:"line",data:{labels:[],datasets:[{label:"",data:[],backgroundColor:["rgba(255, 255, 255, 0)"],borderColor:[a.rgb],borderWidth:2}]},options:n});return a.chart=e,a.updateData(),e},a.createFullWidget=function(){var t=document.getElementById(a.fullScreenId);new Chart(t,{type:"line",data:{labels:[],datasets:[{label:"",data:[],backgroundColor:["rgba(255, 255, 255, 0)"],borderColor:[a.rgb],borderWidth:2}]},options:n})},a.updateData=function(){var t=a.widgetId;t=t.replace(a.type.toLowerCase(),"value");var e=a.chart,n=new Date;e.data.labels.push(n.toLocaleTimeString()),e.data.datasets.forEach(function(e){e.data.length>10&&e.data.splice(0,1),e.data.push(b.fatoryGetDatasourceValue(a.datasource[0],a.datasource[0][1])),$("#"+t).html(b.fatoryGetDatasourceValue(a.datasource[0],a.datasource[0][1]))}),e.data.labels.length>10&&e.data.labels.splice(0,1),e.update(),a.updateLastUpdate()},a.liveData=function(){var t=a.widgetId;t=t.replace(a.type,"value_");var e=a.chart,n=new Date;e.data.labels.push(n.toLocaleTimeString()),e.data.datasets.forEach(function(t){t.data.length>10&&t.data.splice(0,1);var e=t.data[t.data.length-1];t.data.push(e)}),e.data.labels.length>10&&e.data.labels.splice(0,1),e.update()},a}return v(e,O),e}(),W=function(t){function e(t){h(this,e);var a=p(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));a.datasets=t.datasets,a.labels=t.labels,a.label=t.label,a.color=t.color,a.radar=null;var n={type:"radar",data:{labels:[],datasets:[]},options:{maintainAspectRatio:!1,legend:{position:"top"},title:{display:!0},scale:{ticks:{beginAtZero:!0}}}};return a.createRadar=function(){var t=document.getElementById(a.widgetId),e=new Chart(t,n),i=0;e.data.labels=a.labels,e.data.datasets=Object(r.e)(a.datasets),e.data.datasets.forEach(function(t){t.label=a.label[i],t.backgroundColor=Object(r.d)(a.color[i],20),t.borderColor=a.color[i],t.pointBackgroundColor=a.color[i],t.data=[],i++}),e.update(),a.radar=e},a.updateData=function(){var t=0;a.radar.data.datasets.forEach(function(e){e.data=[],a.radar.data.labels.map(function(n){e.data.push(b.fatoryGetDatasourceValue(a.datasource[t],a.datasource[t][1])),t++})}),a.radar.update(),a.updateLastUpdate()},a}return v(e,C),e}(),U=function t(){var e=this;h(this,t);var a={type:"radar",data:{labels:[],datasets:[]},options:{legend:{position:"top"},title:{display:!0},scale:{ticks:{beginAtZero:!0}}}};this.createRadarExample=function(){if(null===x){var t=document.getElementById("example-radar"),n=new Chart(t,a);x=n,e.updateRadarExample()}};this.updateRadarExample=function(){var t=[],e=[],a=[],n=[];Chart.helpers.color;$(".radar-labels:visible").each(function(){t.push($(this).val()),a.push(getRandomInt(0,50))}),x.data.labels=[],x.data.datasets=[],$(".label-radar:visible").each(function(){e.push($(this).val()),x.data.datasets.push({})}),$(".radar-color").each(function(){n.push($(this).val())});var i=0;x.data.labels=t,x.data.datasets.forEach(function(t){t.label=e[i],t.backgroundColor=Object(r.d)(n[i],20),t.borderColor=n[i],t.pointBackgroundColor=n[i],t.data=a,a=a.map(function(t){return t+getRandomInt(0,10)}),i++}),x.update()}},G=function(t){function e(t){h(this,e);var a=p(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return a.fullScreenId=t.fullScreenId,a.textId=t.textId,a.gaugeWidget=null,a.opts=t.opts,a.limitMax=t.limitMax?t.limitMax:100,a.limitMin=t.limitMin?t.limitMin:0,a.unit=t.unit,a.createGages=function(){a.gaugeWidget=new JustGage({id:a.widgetId,value:0,min:a.limitMin,max:a.limitMax,symbol:" "+a.unit,relativeGaugeSize:!0,titlePosition:"below"}),$("#"+a.widgetId).height($("#"+a.widgetId).height()-5),$("#"+a.widgetId).addClass("container")},a.updateData=function(){var t=b.fatoryGetDatasourceValue(a.datasource[0],a.datasource[0][1]);a.gaugeWidget.refresh(t||0),a.updateLastUpdate()},a}return v(e,C),e}(),R=function(t){function e(t){h(this,e);var a=p(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return a.fullScreenId=t.fullScreenId,a.myMap=null,a.createMap=function(){var t=void 0,e=a.widgetId,n=$("#"+a.itemId).height()-100;$("#"+e).css("height",n),$("#"+e).css("width","auto"),t=L.map(e,{dragging:!0,zoomControl:!0,scrollWheelZoom:!1,zoomAnimation:!1}),$.getJSON("https://raw.githubusercontent.com/apisit/thailand.json/master/thailand.json").then(function(e){var a=new L.TileLayer.BoundaryCanvas("https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{boundary:e,minZoom:5,maxZoom:9,attribution:"&copy; Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ"});t.addLayer(a);var n=L.geoJSON(e);t.fitBounds(n.getBounds())}).then(function(){setTimeout(function(){t.invalidateSize(!0),$.ajax({dataType:"json",url:"/js/company/test-api.json",async:!1,success:function(e){var a=[],n=e.WeatherForecasts;for(var i in n)L.marker([n[i].location.lat,n[i].location.lon]).addTo(t).bindPopup(n[i].location.province+" อ ุณหภูมิที่ระดับพื้นผิว : "+n[i].forecasts[1].data.tc+" °C"),a.push([n[i].location.lat,n[i].location.lon,n[i].forecasts[1].data.tc/100]);L.heatLayer(a,{radius:75}).addTo(t)}})},1e3)}),$(".grid-stack").on("change",function(e,a){null!=t&&t.invalidateSize(!0)}),a.myMap=t,console.log(a.myMap)},a.createFullWidget=function(){var t=void 0,e=a.fullScreenId;$("#"+e).css("height","450px"),$("#"+e).css("width","auto"),t=L.map(e,{dragging:!0,zoomControl:!0,scrollWheelZoom:!1,zoomAnimation:!1}),$.getJSON("https://raw.githubusercontent.com/apisit/thailand.json/master/thailand.json").then(function(e){var a=new L.TileLayer.BoundaryCanvas("https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{boundary:e,minZoom:5,maxZoom:9,attribution:"&copy; Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ"});t.addLayer(a);var n=L.geoJSON(e);t.fitBounds(n.getBounds())}).then(function(){setTimeout(function(){t.invalidateSize(!0),$.ajax({dataType:"json",url:"/js/company/test-api.json",async:!1,success:function(e){var a=[],n=e.WeatherForecasts;for(var i in n)L.marker([n[i].location.lat,n[i].location.lon]).addTo(t).bindPopup(n[i].location.province+" อ ุณหภูมิที่ระดับพื้นผิว : "+n[i].forecasts[1].data.tc+" °C"),a.push([n[i].location.lat,n[i].location.lon,n[i].forecasts[1].data.tc/100]);L.heatLayer(a,{radius:75}).addTo(t)}})},1e3)})},a}return v(e,C),e}(),P=function(t){function e(t){h(this,e);var a=p(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return a.table=t.table,a.createTable=function(){a.el=$("#"+a.widgetId),a.el.find("thead").append("<tr></tr>");for(var t=0;t<a.table.col_labels.length;t++)a.el.find("thead tr").append("<th>"+a.table.col_labels[t]+"</th>");for(var e=0;e<a.table.rows.length;e++){for(var n="",i=0;i<a.table.col_labels.length;i++)n+=0===i?"<td>"+a.table.rows[e].label+"</td>":"<td></td>";a.el.find("tbody").append("<tr>"+n+"</tr>")}$("#"+a.widgetId).parent().addClass("table-responsive")},a.updateData=function(){try{var t=0,e=a.table.rows;a.el.find("tbody tr").each(function(){var a=0;$(this).find("td").not(":first").each(function(){var n=b.fatoryGetDatasourceValue(e[t].data[a],e[t].data[a][1]);$(this).html(n),a++}),t++}),a.updateLastUpdate()}catch(t){}},a}return v(e,C),e}(),B=function(t){function e(t){h(this,e);var a=p(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return a.textValue=t.textValue,a.unit=t.unit,a.rgb=t.rgb,a.createTextValue=function(){},a.updateData=function(){var t=b.fatoryGetDatasourceValue(a.datasource[0],a.datasource[0][1]);$("#"+a.widgetId).html(t),a.updateLastUpdate()},a}return v(e,C),e}(),V=function(t){function e(t){h(this,e);var a=p(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return a.textbox=t.textbox,a.fontsize=t.fontsize,a.createTextBox=function(){console.log($("#"+a.widgetId)),$("#"+a.widgetId).html(a.textbox),$("#"+a.widgetId).css({"font-size":a.fontsize+"px"})},a}return v(e,C),e}(),z=[],N=function t(){var e=this;h(this,t);var a,n,r,o,l=null,s=[],d=[],f=[],p=0,v=(a=g(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.ajax({url:m+"company/webservices",success:function(t){(l=t.data).map(function(t){$("#webservice_id").append('<option value="'+t.webservice_id+'">'+t.service_name+"</option>")})},error:function(t){console.log(t)}});case 2:case"end":return t.stop()}},t,this)})),function(){return a.apply(this,arguments)}),b=(n=g(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.ajax({url:m+"company/staticDatasource",method:"GET",data:{static_id:$("#static_id").html()},success:function(t){l=t.data},error:function(t){console.log(t)}});case 2:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)}),w=(r=g(i.a.mark(function t(){var e,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return $("#list-datasource").empty(),$(".select-datasource").empty(),e="<h5>Datasource</h5>",a="<option value=''>--Select datasource--</option>",t.next=6,l.map(function(){var t=g(i.a.mark(function t(n,r){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e+='<div class="row">\n                            <div class="col-2 edit-datasource" title="Edit" index='+r+' style="cursor:pointer"> \n                                '+n.name+'\n                            </div>\n                            <div class="col-2 unActiveApi" id="datasource-isActive-'+r+'">\n                                <b>Not active</b>\n                            </div>\n                            <div class="col-3" id="datasource-'+r+'">\n\n                            </div>\n                        </div>',a+="<option value='"+n.id+"'>"+n.name+"</option>",p++,t.next=5,_(r);case 5:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}());case 6:setInterval(function(){x()},1e3),$(".select-datasource").html(a),$("#list-datasource").html(e);case 9:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)}),x=function(){var t;l.map((t=g(i.a.mark(function t(e,a){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(X.diffTime(e.lastUpdate,e.timeInterval)>=e.timeInterval)){t.next=4;break}return t.next=4,_(a);case 4:return t.abrupt("return");case 5:case"end":return t.stop()}},t,this)})),function(e,a){return t.apply(this,arguments)}))},_=(o=g(i.a.mark(function t(e){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return l[e].URL,a=l[e].name,t.next=4,$.ajax({url:"/js/company/test-api2.json",success:function(t){var n=new Date;l[e].lastUpdate=n,$("#datasource-"+e).html(n.toDateString()+" "+n.toLocaleTimeString()),$("#datasource-isActive-"+e).html("<b>Active</b>"),$("#datasource-isActive-"+e).removeClass("unActiveApi"),$("#datasource-isActive-"+e).addClass("activeApi"),s[a]=t,p===l.length&&(E.loadingApi=!0)},error:function(t){console.log(t)}});case 4:case"end":return t.stop()}},t,this)})),function(t){return o.apply(this,arguments)}),T=function(t){return l.find(function(e){return e.id==t})},I=function(t){if("object"==(void 0===t?"undefined":c(t)))return Object.keys(t)},k=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;$(e).parent().find(".data-list").empty();var a="datasources['"+t+"']";$(e).val(a),M(a,e)},M=function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{d=e.match(y);var n=function t(e,a){if("object"==(void 0===a?"undefined":c(a)))return e==d.length?[Object.keys(a),a]:t(e+1,a[d[e]])}(2,s[d[1]]);$(a).parent().find(".data-list").empty(),n[0].map(function(t){$(a).parent().find(".data-list").append('<li class="value-data list-group-item" style="cursor:pointer" value="'+t+'">'+t+" : "+n[1][t]+"</li>")}),$(".data-list").scrollTop(0),d.length>2&&$(a).parent().find(".data-list").prepend('<li class="back-value-data list-group-item" back="'+d.slice(0,d.length-1).join(",")+'" style="cursor:pointer">Back</li>')}catch(t){}$("#Mutiline_value  .data-list,#Radar  .data-list,#Table  .data-list").hover(function(){$(this).closest(".value-datasource").focus()},function(){$(this).prev().blur(),$(this).hide()}),$(".value-data").unbind().click(function(){var e=$(this).parent().parent().find(".value-datasource,.value-group-data"),a=$(e).val();a+="['"+$(this).attr("value")+"']",$(e).val(a),t($(e).val(),e),$(e).focus(),$(".value-group-data").change()}),$(".back-value-data").unbind().click(function(){for(var e=$(this).attr("back").split(","),a="datasource",n=1;n<e.length;n++)a+="['"+e[n]+"']";$(this).parent().parent().find(".value-datasource,.value-group-data").val(a),t(a,$(this).parent().parent().find(".value-datasource,.value-group-data"))})},L={createGroupData:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.find(".data-list").empty(),e.find(".value-group-data").val(t),L.updateDataGroup(t,e)},updateDataGroup:function(t,e){try{var a=I(u.a.get(s,t));e.find(".data-list").empty(),a.map(function(t){e.find(".data-list").append('<li class="value-data list-group-item" style="cursor:pointer" value="'+t+'">'+t+"</li>")}),$(".data-list").scrollTop(0)}catch(t){console.log(t)}$("#Mutiline_group_data  .data-list").hover(function(){$(this).closest(".value-group-data").focus()},function(){$(this).prev().blur(),$(this).hide()}),$("#Mutiline_group_data .value-data").unbind().click(function(){var t=e.parent().parent().find(".value-group-data"),a=$(t).val();a+="."+$(this).attr("value"),$(t).val(a),L.updateDataGroup($(t).val(),e),$(t).focus(),$(".value-group-data").change()}),$("#Mutiline_group_data .back-value-data").unbind().click(function(){for(var t=$(this).attr("back").split(","),e="datasource",a=1;a<t.length;a++)e+="['"+t[a]+"']";$(this).parent().parent().find(".value-datasource,.value-group-data").val(e),M(e,$(this).parent().parent().find(".value-datasource,.value-group-data"))})},createDataValue:function(t,e){try{var a=I(u.a.get(s,t));e.find(".data-list-value").empty(),a.map(function(t){var a=u.a.get(s,$(".value-group-data").val()+".0."+t);e.find(".data-list-value").append('<li class="value-data list-group-item" style="cursor:pointer" value="'+t+'">'+t+" : "+a+"</li>")}),$(".data-list-value").scrollTop(0)}catch(t){console.log(t)}$("#Mutiline_group_data .value-data").unbind().click(function(){var t=$(this).parent().parent().find(".value-datasource"),e=$(t).val();e+="."+$(this).attr("value"),$(t).val(e),$(t).focus(),L.updateDataValue(e,t)})},updateDataValue:function(t,e){console.log(t);try{console.log($(".value-group-data").val()+".0"+t);var a=I(u.a.get(s,$(".value-group-data").val()+".0"+e.val())),n=t.match(y);e.parent().find(".data-list-value").empty(),a.map(function(a){var n=u.a.get(s,""+s+$(".value-group-data").val()+".0"+t+"."+a);e.parent().find(".data-list-value").append('<li class="value-data list-group-item" style="cursor:pointer" value="'+a+'">'+a+" : "+n+" </li>")}),$(".data-list-value").scrollTop(0),1==n.length?e.parent().find(".data-list-value").prepend('<li class="back-value-data list-group-item" back="" style="cursor:pointer">Back</li>'):e.parent().find(".data-list-value").prepend('<li class="back-value-data list-group-item" back="'+n.slice(0,n.length-1).join(".")+'" style="cursor:pointer">Back</li>')}catch(t){console.log(t)}$("#Mutiline_group_data .value-data").unbind().click(function(){var t=$(this).parent().parent().find(".value-datasource"),e=$(t).val();e+="."+$(this).attr("value"),$(t).val(e),$(t).focus(),L.updateDataValue(e,t)}),$("#Mutiline_group_data .back-value-data").unbind().click(function(){var t=$(this).parent().parent().find(".value-datasource"),e=$(this).attr("back");""==e?t.val(""):t.val("."+e),L.updateDataValue(e,t)})}};this.setDataAccess=function(t){f=t},this.getDatasourceValue=function(t,a){return"object"==c(a[f[t]])?e.getDatasourceValue(t+1,a[f[t]]):a[f[t]]},this.fatoryGetDatasourceValue=function(t,a){try{return f=t,e.getDatasourceValue(2,s[a])}catch(t){}},this.getDatasources=function(){return s};var A,S=(A=g(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:$("#btn-add-datasource").unbind().click(function(){$("#addDatasource").modal("show")}),$("#btn-add-new-datasource").unbind().click(function(){$.ajax({url:m+"company/static/datasource",method:"POST",data:{static_id:$("#static_id").html(),name:$("#name_datasource").val(),webservice_id:$("#webservice_id").val(),timeInterval:$("#add-data-time-interval").val()},success:function(t){b(),$("#addDatasource").modal("hide")},error:function(t){console.log(t)}})}),$("#Gauges,#TextValue,#text-line").on("change",".select-datasource",function(){if($(this).parent().next().find(".value-datasource").val(""),$(this).parent().next().find(".data-list").hide(),""!=$(this).val()){var t=T($(this).val());$(this).parent().next().find(".value-datasource").focus(),k(t.name,$(this).parent().next().find(".value-datasource"))}else $(this).parent().next().find(".data-list").empty()}),$("#Gauges,#TextValue,#text-line").on("focus",".value-datasource",function(){$("#Gauges,#TextValue").find(".data-list.active-data").each(function(){$(this).hide(),$(this).removeClass("active-data")}),$(this).next().addClass("active-data"),$(this).next().show()}),$("#Mutiline_value").on("change",".select-datasource",function(){if($("#Mutiline_value").find(".value-datasource").val(""),$("#Mutiline_value").find(".data-list").hide(),""!=$(this).val()){var t=T($(this).val());k(t.name,$("#Mutiline_value").find(".value-datasource"))}else $(this).parent().parent().next().find(".data-list").empty()}),$("#Mutiline_group_data").on("change",".select-datasource",function(){if($("#Mutiline_group_data").find(".value-datasource").val(""),$("#Mutiline_group_data").find(".data-list").hide(),""!=$(this).val()){var t=T($(this).val());L.createGroupData(t.name,$("#Mutiline_group_data"))}else $(this).parent().parent().next().find(".data-list").empty()}),$("#Mutiline_group_data").on("change",".value-group-data",function(){var t=$("#Mutiline_group_data"),e=u.a.get(s,$(this).val());validate.isArray(e)&&(t.find("input[name='end']").val(e.length-1),L.createDataValue($(this).val()+".0",t))}),$("#Mutiline_group_data").on("change",".data-list-value",function(){}),$("#Table").on("change",".select-datasource",function(){if($("#Table").find(".value-datasource").val(""),$("#Table").find(".data-list").hide(),$("#Table").find(".data-list").empty(),""!=$(this).val()){var t=T($(this).val());k(t.name,$("#Table").find(".value-datasource"))}}),$("#Radar").on("change",".select-datasource",function(){var t=$(this).parent().parent().next().next();if($(t).find(".value-datasource").val(""),$(t).find(".data-list").hide(),$(t).find(".data-list").empty(),""!=$(this).val()){var e=T($(this).val());k(e.name,$(t).find(".value-datasource"))}}),$("#Table").on("focus",".value-datasource",function(){$("#Table").find(".data-list.active-data").hide().removeClass("active-data"),$(this).next().addClass("active-data"),$(this).next().show()}),$("#Radar").on("focus",".value-datasource",function(){$(this).parent().parent().find(".data-list.active-data").each(function(){$(this).hide(),$(this).removeClass("active-data")}),$(this).next().addClass("active-data"),$(this).next().show()}),$("#Radar").on("hover",".data-list",function(){$(this).closest(".value-datasource").focus()},function(){$(this).prev().blur(),$(this).hide()}),$("#Mutiline_value").on("focus",".value-datasource",function(){$(this).parent().parent().parent().find(".data-list.active-data").each(function(){$(this).hide(),$(this).removeClass("active-data")}),$(this).next().addClass("active-data"),$(this).next().show()}),$("#Mutiline_group_data").on("focus",".value-group-data",function(){$("#Mutiline_group_data").find(".data-list.active-data").each(function(){$(this).hide(),$(this).removeClass("active-data")}),$(this).next().addClass("active-data"),$(this).next().show()}),$("#Mutiline_value,#Gauges,#TextValue,#Radar").on("keyup",".value-datasource",function(){M($(this).val(),$(this))}),$("#btn-add-value-Mutiline").unbind().click(function(){var t=$("#line_value_layout").first().html(),e=$("#Mutiline_value").append(t),a=$("#Mutiline_value").find(".select-datasource").val();if(""!=a){var n=T(a);e.find(".data-list").hide(),e.find(".data-list").removeClass("active-data"),k(n.name,e.find(".value-datasource").last())}else $(this).parent().parent().next().find(".data-list").empty()});case 17:case"end":return t.stop()}},t,this)})),function(){return A.apply(this,arguments)});this.initCreate=g(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S();case 2:return t.next=4,v();case 4:return t.next=6,b();case 6:return t.next=8,w();case 8:case"end":return t.stop()}},t,this)}))},X=function(){function t(){h(this,t);var e,a,n={cellHeight:80,verticalMargin:10,float:!1},o=null,l=null,d=null,c=null,f=!1,p=function(){return $("#widget_type").val()},v=function(){return $("#title-name").val()},x=function(){return $("#time-interval").val()},E=function(){return(new Date).toUTCString()},T=function(){if(0==$(".form-radar-value:visible").length){var t=$("#layout-radar-value").html(),e=$("#layout-add-value-radar").html();$("#Radar_value").append(t),$(".radar-labels:visible").each(function(){var t=e.replace("((value-radar))",$(this).val());$(".add-value-radar:visible").append(t)})}else{var a=$("#Radar_value .form-radar-value").html();$("#Radar_value").append('<div class="form-radar-value">'+a+"</div>")}},I=function(){var t,e,a,n,i,o,l,s,d,h,g=p(),m=null,_=null;g===w.MUTILINE?(_=function(t){var e=[],a=null;if(f){for(var n=$(".value-group-data:visible").val(),i=$("input[name='start']:visible").val(),o=$("input[name='end']:visible").val(),l=$("input[name='value-data']:visible").val(),s=$("input[name='label-data']:visible").val(),d=i;d<=o;d++){var c,h=Object(r.f)();c={label:u.a.get(b.getDatasources(),n+"."+d+s),backgroundColor:"rgba(255,255,255,0.0)",borderColor:h,borderWidth:2},e.push(c)}a={isGroupData:!0,datasource:n+".[]"+l,fullScreenId:"myChartFull_"+t,download:!0,type:p(),title_name:v(),lastUpdate:E(),timeInterval:x(),datasets:[].concat(e)}}else{var g=$("#Mutiline_value").find(".label-y-chart-line").length,m=[];$("#Mutiline_value").find(".value-datasource:visible").each(function(){m.push($(this).val().match(y))});for(var w=0;w<g;w++){var _,T=$("#Mutiline_value").find(".label-y-chart-line"),I=$("#Mutiline_value").find(".rgb-chart-line");_={label:$(T[w]).val(),backgroundColor:"rgba(255,255,255,0.0)",borderColor:$(I[w]).val(),borderWidth:2},e.push(_)}a={isGroupData:!1,datasource:m,fullScreenId:"myChartFull_"+t,download:!0,type:p(),title_name:v(),lastUpdate:E(),timeInterval:x(),datasets:[].concat(e)}}return a}(),(m=new O(Object.assign({},_))).createWidget(),m.createMutiLine()):g===w.TEXTLINE?(d=$("#text-line").find("#unit").val(),h=$("#value-text-line").find("#rgb").val(),_={datasource:[$("#text-line").find(".value-datasource").val().match(y)],download:!0,type:p(),title_name:v(),lastUpdate:E(),timeInterval:x(),rgb:h,unit:d},(m=new D(_)).createWidget(),m.createTextLine()):g===w.RADAR?(n=[],i=[],o=[],l=[],s=[],$("#Radar").find(".radar-labels:visible").each(function(){i.push($(this).val())}),$("#Radar_value").find(".form-radar-value:visible").each(function(){n.push({}),o.push($(this).find(".label-radar").val()),$(this).find(".value-datasource:visible").each(function(){l.push($(this).val().match(y))}),$(this).find(".radar-color:visible").each(function(){s.push($(this).val())})}),_={datasets:n,labels:i,label:o,color:s,datasource:l,type:p(),title_name:v(),lastUpdate:E(),timeInterval:x()},(m=new W(_)).createWidget(),m.createRadar()):g===w.GAUGES?(_=function(t){var e=$("#Gauges").find("#g_limitMin").val(),a=$("#Gauges").find("#g_limitMax").val(),n=$("#Gauges").find("#unit").val();return{textId:"gauges-text-"+t,datasource:[$("#Gauges").find(".value-datasource").val().match(y)],fullScreenId:"gaugesFull-"+t,download:!0,type:p(),title_name:v(),lastUpdate:E(),timeInterval:x(),limitMax:a,limitMin:e,unit:n,opts:{angle:0,lineWidth:.23,radiusScale:1,pointer:{length:.6,strokeWidth:.035,color:"#000000"},limitMax:!1,limitMin:!1,colorStart:"#6FADCF",colorStop:"#8FC0DA",strokeColor:"#E0E0E0",generateGradient:!0,highDpiSupport:!0,staticLabels:{font:"10px Poppins",labels:[0,Number(a)],color:"#000000",fractionDigits:0}}}}(),(m=new G(_)).createWidget(),m.createGages()):g===w.MAP?(_={fullScreenId:"mapFull-"+a,download:!1,type:p(),title_name:v(),lastUpdate:E(),timeInterval:x()},(m=new R(_)).createWidget(),m.createMap()):g===w.TABLE?(_={download:!1,type:p(),title_name:v(),lastUpdate:E(),timeInterval:x(),table:c.getValue()},(m=new P(_)).createWidget(),m.createTable()):g===w.TEXTVALUE?(_=function(t){var e=$("#TextValue").find("#unit").val(),a=$("#TextValue").find("#rgb").val();return{datasource:[$("#TextValue").find(".value-datasource").val().match(y)],fullScreenId:"textValueFull-"+t,download:!1,type:p(),title_name:v(),lastUpdate:E(),timeInterval:x(),unit:e,rgb:a}}(),(m=new B(_)).createWidget(),m.createTextValue()):g===w.TEXTBOX&&(t=$("#text-box").find("#text-custom").val(),e=$("#text-box").find("#font-size").val(),_={type:p(),download:!1,title_name:null,lastUpdate:null,timeInterval:null,textbox:t,fontsize:e},(m=new V(_)).createWidget(),m.createTextBox()),z.push(m)},k=function(){$("#settingW").click(function(){clearInterval(l),$(this).hide(),$(".full-screen").hide(),$(".edit-widget").show(),$("#addW").show(),$("#saveW").show(),$("#cancelW").show(),o.enableMove(!0),o.enableResize(!0)}),$("#widget_type").change(function(){var t;$(".value_widget").hide(),t=p(),$(".value_widget").hide(),$("#default-value").show(),$("#add-new-widget").show(),t===w.MUTILINE?$("#MutiLine").show():t===w.TEXTLINE?$("#text-line").show():t===w.RADAR?($("#Radar").show(),(d=new U).createRadarExample(),$("#addWidget").on("change",".radar-labels,.label-radar",function(){d.updateRadarExample()}),$("#btn-add-datasource-radar").unbind().click(function(){$(".remove-radar-labels").prop("disabled",!0),$("#btn-add-label-radar").hide(),$("#btn-edit-label-radar").show(),$(".radar-labels").prop("disabled",!0),T(),d.updateRadarExample(),$(".remove-datasource-radar").unbind().click(function(){$(this).parent().remove(),d.updateRadarExample()})}),$("#btn-edit-label-radar").unbind().click(function(){swal({title:"Are you sure?",text:"When you edit lables datasource will reset",icon:"warning",buttons:!0,dangerMode:!0}).then(function(t){t&&($("#btn-add-label-radar").show(),$("#btn-edit-label-radar").hide(),$("#Radar_value").empty(),$(".radar-labels").prop("disabled",!1),$(".remove-radar-labels").prop("disabled",!1),d.updateRadarExample())})})):t===w.TABLE?($("#Table").show(),(c=new s.default($("#example_table"),{col:{amount:3},row:{amount:3}})).createTableEx(),$("#btn_add_col").unbind().click(function(){c.addCol()}),$("#btn_remove_col").unbind().click(function(){c.removeCol()}),$("#btn_add_row").unbind().click(function(){c.addRow()}),$("#btn_remove_row").unbind().click(function(){c.removeRow()})):t===w.GAUGES?$("#Gauges").show():t===w.TEXTVALUE?$("#TextValue").show():t===w.TEXTBOX?($("#text-box").show(),$("#default-value").hide()):($("#add-new-widget").hide(),$("#default-value").hide(),$("#form-input-widget").html(""))}),$("#addW").unbind().click(function(){$("#addWidget").modal("show"),$(".value_widget").hide(),$("#add-new-widget").hide(),$("#default-value").hide()}),$("#add-new-widget").unbind().click(function(){I()}),$("#saveW").unbind().click(function(){var e;$("#saveW").hide(),$("#addW").hide(),$("#cancelW").hide(),$("#settingW").show(),$(".full-screen").show(),$(".edit-widget").hide(),M(),e=_.map($(".grid-stack > .grid-stack-item:visible"),function(e){var a=(e=$(e)).data("_gridstack_node"),n=t.getWidgetById(a.id);return{x:a.x,y:a.y,width:a.width,height:a.height,widget:C.formateDataSave(n)}}),$.ajax({url:m+"company/static/dashboard",method:"PUT",data:{static_id:$("#static_id").html(),dashboard:JSON.stringify(e,null,"")},success:function(t){console.log(t)},error:function(t){console.log(t)}}),o.enableMove(!1),o.enableResize(!1)}),$("#cancelW").unbind().click(function(){$("#saveW").hide(),$("#addW").hide(),$(".edit-widget").hide(),$(".full-screen").show(),$("#cancelW").hide(),$("#settingW").show(),M(),o.enableMove(!1),o.enableResize(!1)}),$("#btn-detail-toggle ").unbind().click(function(){$("#top-header").slideToggle("fast"),$(this).toggleClass("flip")}),$("#Mutiline_value").on("click",".remove-value",function(){$(this).parent().parent().remove()}),$("#addWidget").unbind().on("click","#btn-add-label-radar",function(){$("#Radar_label").append('  <div class="input-group">\n                                                <input type="text" class="form-control radar-labels mt-2" value="">\n                                                <div class="input-group-append">\n                                                    <button class="btn btn-danger mt-2  remove-radar-labels" type="button"><i class="fas fa-times"></i></button>\n                                                </div>\n                                            </div>'),d.updateRadarExample()}),$("#Radar_value").on("change",".radar-color",function(){d.updateRadarExample()}),$("#Radar_label").unbind().on("click",".remove-radar-labels",function(){$(this).parent().parent().remove(),d.updateRadarExample()}),$("input[name='isGroupData']").change(function(){if(1==(f=$(this).val()))return $("#Mutiline_value").hide(),void $("#Mutiline_group_data").show();$("#Mutiline_value").show(),$("#Mutiline_group_data").hide()})},M=(e=g(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:l=setInterval(function(){z.length>0&&L([].concat(z))},1e3);case 1:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)}),L=function(e){for(var a=0;a<e.length;a++){var n=e[a];n.updateData&&(t.diffTime(n.lastUpdate,n.timeInterval)>=n.timeInterval?n.updateData():n.liveData&&n.liveData())}},A=(a=g(i.a.mark(function t(e){var a,n,r,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=null,n=null,r=null,o="",e.map(function(t,e){a=null,n=t.widget,r=t,o=n.type,n.lastUpdate=E(),o===w.MUTILINE?((a=new O(n)).createWidget(r),a.createMutiLine()):o===w.GAUGES?((a=new G(n)).createWidget(r),a.createGages()):o===w.RADAR?((a=new W(n)).createWidget(r),a.createRadar()):o===w.TEXTLINE?((a=new D(n)).createWidget(r),a.createTextLine()):o===w.MAP?((a=new R(n)).createWidget(r),a.createMap()):o===w.TABLE?((a=new P(n)).createWidget(r),a.createTable()):o===w.TEXTVALUE?((a=new B(n)).createWidget(r),a.createTextValue()):o===w.TEXTBOX&&((a=new V(n)).createWidget(r),a.createTextBox()),z.push(a)}),$(".edit-widget").hide();case 6:case"end":return t.stop()}},t,this)})),function(t){return a.apply(this,arguments)});this.initDashboard=g(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return b=new N,e="",t.next=4,b.initCreate();case 4:return t.next=6,$.ajax({url:m+"company/static/"+$("#static_id").html(),method:"GET",success:function(t){t.data&&(e=GridStackUI.Utils.sort(JSON.parse(t.data[0].dashboard)))},error:function(t){console.log(t)}});case 6:return t.next=8,A(e);case 8:return $(".grid-stack").gridstack(n),(o=$(".grid-stack").data("gridstack")).enableMove(!1),o.enableResize(!1),t.next=14,M();case 14:$("#loading").remove(),k();case 16:case"end":return t.stop()}},t,this)}))}return f(t,null,[{key:"diffTime",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var e=new Date,a=new Date(t),n=(e.getTime()-a.getTime())/1e3;return Math.abs(Math.round(n))}},{key:"updateGridData",value:function(t){}},{key:"getWidgetById",value:function(t){return z.find(function(e){return e.itemId==t})}}]),t}();$(document).ready(function(){$("#sidebarCollapse").click(),(new X).initDashboard(),$(".grid-stack").on("gsresizestop",function(t,e){var a=$(e),n=JSON.parse(a.data("_gridstack_data")),i=a.data("_gridstack_node"),r=n.type;if("Gauges"===r);else if("MutiLine"===r){t.target,a.find(".card-body").width(),a.find(".card-body").height();var o=a.find(".card-body");$(o).find("canvas")}else if("Map"===r){X.getWidgetById(i.id).myMap.invalidateSize()}})})},DuR2:function(t,e){var a;a=function(){return this}();try{a=a||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(a=window)}t.exports=a},SeUI:function(t,e,a){var n,i,r;!function(a,o){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=o():(i=[],void 0===(r="function"==typeof(n=o)?n.apply(e,i):n)||(t.exports=r))}(0,function(){"use strict";var t=Object.prototype.toString;function e(t,e){return null!=t&&Object.prototype.hasOwnProperty.call(t,e)}function a(t){if(!t)return!0;if(i(t)&&0===t.length)return!0;if("string"!=typeof t){for(var a in t)if(e(t,a))return!1;return!0}return!1}function n(e){return t.call(e)}var i=Array.isArray||function(e){return"[object Array]"===t.call(e)};function r(t){var e=parseInt(t);return e.toString()===t?e:t}function o(t){t=t||{};var o=function(t){return Object.keys(o).reduce(function(e,a){return"create"===a?e:("function"==typeof o[a]&&(e[a]=o[a].bind(o,t)),e)},{})};function l(a,n){return t.includeInheritedProps||"number"==typeof n&&Array.isArray(a)||e(a,n)}function s(t,e){if(l(t,e))return t[e]}function d(t,e,a,n){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if("string"==typeof e)return d(t,e.split(".").map(r),a,n);var i=e[0],o=s(t,i);return 1===e.length?(void 0!==o&&n||(t[i]=a),o):(void 0===o&&("number"==typeof e[1]?t[i]=[]:t[i]={}),d(t[i],e.slice(1),a,n))}return o.has=function(a,n){if("number"==typeof n?n=[n]:"string"==typeof n&&(n=n.split(".")),!n||0===n.length)return!!a;for(var o=0;o<n.length;o++){var l=r(n[o]);if(!("number"==typeof l&&i(a)&&l<a.length||(t.includeInheritedProps?l in Object(a):e(a,l))))return!1;a=a[l]}return!0},o.ensureExists=function(t,e,a){return d(t,e,a,!0)},o.set=function(t,e,a,n){return d(t,e,a,n)},o.insert=function(t,e,a,n){var r=o.get(t,e);n=~~n,i(r)||(r=[],o.set(t,e,r)),r.splice(n,0,a)},o.empty=function(t,e){var r,s;if(!a(e)&&(null!=t&&(r=o.get(t,e)))){if("string"==typeof r)return o.set(t,e,"");if(function(t){return"boolean"==typeof t||"[object Boolean]"===n(t)}(r))return o.set(t,e,!1);if("number"==typeof r)return o.set(t,e,0);if(i(r))r.length=0;else{if(!function(t){return"object"==typeof t&&"[object Object]"===n(t)}(r))return o.set(t,e,null);for(s in r)l(r,s)&&delete r[s]}}},o.push=function(t,e){var a=o.get(t,e);i(a)||(a=[],o.set(t,e,a)),a.push.apply(a,Array.prototype.slice.call(arguments,2))},o.coalesce=function(t,e,a){for(var n,i=0,r=e.length;i<r;i++)if(void 0!==(n=o.get(t,e[i])))return n;return a},o.get=function(t,e,a){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if(null==t)return a;if("string"==typeof e)return o.get(t,e.split("."),a);var n=r(e[0]),i=s(t,n);return void 0===i?a:1===e.length?i:o.get(t[n],e.slice(1),a)},o.del=function(t,e){if("number"==typeof e&&(e=[e]),null==t)return t;if(a(e))return t;if("string"==typeof e)return o.del(t,e.split("."));var n=r(e[0]);return l(t,n)?1!==e.length?o.del(t[n],e.slice(1)):(i(t)?t.splice(n,1):delete t[n],t):t},o}var l=o();return l.create=o,l.withInheritedProps=o({includeInheritedProps:!0}),l})},SldL:function(t,e,a){!function(t){"use strict";var e,a=Object.prototype,n=a.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},r=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function s(t,e,a,n){var i=e&&e.prototype instanceof h?e:h,r=Object.create(i.prototype),o=new k(n||[]);return r._invoke=function(t,e,a){var n=u;return function(i,r){if(n===f)throw new Error("Generator is already running");if(n===p){if("throw"===i)throw r;return L()}for(a.method=i,a.arg=r;;){var o=a.delegate;if(o){var l=E(o,a);if(l){if(l===v)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(n===u)throw n=p,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n=f;var s=d(t,e,a);if("normal"===s.type){if(n=a.done?p:c,s.arg===v)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n=p,a.method="throw",a.arg=s.arg)}}}(t,a,o),r}function d(t,e,a){try{return{type:"normal",arg:t.call(e,a)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var u="suspendedStart",c="suspendedYield",f="executing",p="completed",v={};function h(){}function g(){}function m(){}var b={};b[r]=function(){return this};var y=Object.getPrototypeOf,$=y&&y(y(M([])));$&&$!==a&&n.call($,r)&&(b=$);var w=m.prototype=h.prototype=Object.create(b);function x(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function _(t){var e;this._invoke=function(a,i){function r(){return new Promise(function(e,r){!function e(a,i,r,o){var l=d(t[a],t,i);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==typeof u&&n.call(u,"__await")?Promise.resolve(u.__await).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):Promise.resolve(u).then(function(t){s.value=t,r(s)},function(t){return e("throw",t,r,o)})}o(l.arg)}(a,i,e,r)})}return e=e?e.then(r,r):r()}}function E(t,a){var n=t.iterator[a.method];if(n===e){if(a.delegate=null,"throw"===a.method){if(t.iterator.return&&(a.method="return",a.arg=e,E(t,a),"throw"===a.method))return v;a.method="throw",a.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=d(n,t.iterator,a.arg);if("throw"===i.type)return a.method="throw",a.arg=i.arg,a.delegate=null,v;var r=i.arg;return r?r.done?(a[t.resultName]=r.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,v):r:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function M(t){if(t){var a=t[r];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function a(){for(;++i<t.length;)if(n.call(t,i))return a.value=t[i],a.done=!1,a;return a.value=e,a.done=!0,a};return o.next=o}}return{next:L}}function L(){return{value:e,done:!0}}g.prototype=w.constructor=m,m.constructor=g,m[l]=g.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l in t||(t[l]="GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(_.prototype),_.prototype[o]=function(){return this},t.AsyncIterator=_,t.async=function(e,a,n,i){var r=new _(s(e,a,n,i));return t.isGeneratorFunction(a)?r:r.next().then(function(t){return t.done?t.value:r.next()})},x(w),w[l]="Generator",w[r]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var a in t)e.push(a);return e.reverse(),function a(){for(;e.length;){var n=e.pop();if(n in t)return a.value=n,a.done=!1,a}return a.done=!0,a}},t.values=M,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var a in this)"t"===a.charAt(0)&&n.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function i(n,i){return l.type="throw",l.arg=t,a.next=n,i&&(a.method="next",a.arg=e),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],l=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),d=n.call(o,"finallyLoc");if(s&&d){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=t,o.arg=e,r?(this.method="next",this.next=r.finallyLoc,v):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),I(a),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc===t){var n=a.completion;if("throw"===n.type){var i=n.arg;I(a)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,a,n){return this.delegate={iterator:M(t),resultName:a,nextLoc:n},"next"===this.method&&(this.arg=e),v}}}(t.exports)},Xxa5:function(t,e,a){t.exports=a("SldL")},t4zo:function(t,e,a){(function(a){var n,i,r;i=[],void 0===(r="function"==typeof(n=function(){"use strict";function e(t,e,a){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){o(n.response,e,a)},n.onerror=function(){console.error("could not download file")},n.send()}function n(t){var e=new XMLHttpRequest;return e.open("HEAD",t,!1),e.send(),200<=e.status&&299>=e.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(a){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof a&&a.global===a?a:void 0,o=r.saveAs||"object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype?function(t,a,o){var l=r.URL||r.webkitURL,s=document.createElement("a");a=a||t.name||"download",s.download=a,s.rel="noopener","string"==typeof t?(s.href=t,s.origin===location.origin?i(s):n(s.href)?e(t,a,o):i(s,s.target="_blank")):(s.href=l.createObjectURL(t),setTimeout(function(){l.revokeObjectURL(s.href)},4e4),setTimeout(function(){i(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,a,r){if(a=a||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Depricated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,r),a);else if(n(t))e(t,a,r);else{var o=document.createElement("a");o.href=t,o.target="_blank",setTimeout(function(){i(o)})}}:function(t,a,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof t)return e(t,a,n);var o="application/octet-stream"===t.type,l=/constructor/i.test(r.HTMLElement)||r.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||o&&l)&&"object"==typeof FileReader){var d=new FileReader;d.onloadend=function(){var t=d.result;t=s?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=t:location=t,i=null},d.readAsDataURL(t)}else{var u=r.URL||r.webkitURL,c=u.createObjectURL(t);i?i.location=c:location.href=c,i=null,setTimeout(function(){u.revokeObjectURL(c)},4e4)}};r.saveAs=o.saveAs=o,void 0!==t&&(t.exports=o)})?n.apply(e,i):n)||(t.exports=r)}).call(e,a("DuR2"))}});