!function(t){var e={};function n(l){if(e[l])return e[l].exports;var o=e[l]={i:l,l:!1,exports:{}};return t[l].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,l){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:l})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="http://localhost:8080/",n(n.s=36)}({"1/oX":function(t,e){var n=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=null,l=null,o=[],a=null,i=[],s=null,c=function(t){$.ajax({url:END_POINT+"company/database/log/download",data:{file_name:t},success:function(e){var n=[];n.push(e);var l=document.createElement("a"),o=window.URL.createObjectURL(new Blob(n,{type:"application/text"}));l.href=o,l.download=t,l.click(),window.URL.revokeObjectURL(o)},error:function(t){console.log(t)}})},r=function(t){$.ajax({url:END_POINT+"company/database/logfile",method:"DELETE",data:{file_name:t},success:function(t){console.log(t),e.refreshDatatable(),$("#btn-back").click()},error:function(t){console.log(t)}})},d=function(t,e){g(!0,$("#table-log")),$.ajax({url:END_POINT+"company/database/logfile",data:{folder:t,file:e},success:function(t){o=t.data,u(),g(!1,$("#table-log"))},error:function(t){console.log(t)}})},f=function(){$(".log-viewer").hide(),$(".file-log-viewer").show()},u=function(){var t=[];l.fnClearTable(),o.logs.length>0&&($("#path-file").html("logs/"+o.current_file),$("#file-size").html(""+o.size),$.each(o.logs,function(e,n){var l=[];l[0]='<i class="'+n.level_img+'" style="color:'+n.level_color+'"></i> <span class="text-'+n.level_class+'">'+n.level+"</span>",l[1]=n.date,l[2]="<div class='text-wrap width-200'>"+n.text+"</div>",l[3]=n.stack?"<button class='btn btn-danger btn-sm btn-radius btn-stack' index=\""+e+'">stack</button>':"",t.push(l)}),l.fnAddData(t))},b=function(t){null===s&&(s=' <div class="modal fade" id="modal-stack">\n                                <div class="modal-dialog modal-lg" width:"900px">\n                                    <div class="modal-content">\n                                        <div class="modal-header">\n                                            <h5 class="modal-title" id="title-user">Stack</h5>\n                                            <button type="button" class="close" data-dismiss="modal">&times;</button>\n                                        </div>\n\n                                        <div class="modal-body">\n                                            <textarea class="form-control" style="width:100%;height:400px" id="text-stack" readonly></textarea>\n                                        </div>\n\n                                        <div class="modal-footer">\n                                        \n                                        </div>\n                                    </div>\n                                </div>\n                            </div>',$("body").append(s)),$("#modal-stack").modal("show"),$("#text-stack").html(o.logs[t].stack)};this.initialAndRun=function(){$("#btn-download-file").unbind().click(function(){c(a.file)}),$("#btn_delete_file").unbind().click(function(){swal({title:"Are you sure?",text:"to delete this file : "+a.file,icon:"warning",buttons:!0,dangerMode:!0}).then(function(t){t&&r(a.file)})}),e.refreshDatatable()};var h=function(){if(null!==n)return!1;n=$("#table-file-log").dataTable({}),$("#table-file-log").on("click",".btn-look-file",function(){var t;t=$(this).attr("index"),$(".log-viewer").show(),$(".file-log-viewer").hide(),$("#file-size").html(""),$("#path-file").html(""),null===l&&(l=$("#table-log").dataTable({}),$("#table-log").on("click",".btn-stack",function(){b($(this).attr("index"))})),$("#btn-back").unbind().click(function(){f()}),a=null,a=i[t],d(i[t].folder,i[t].file)}),$("#table-file-log").on("click",".btn-download-file",function(){var t;t=$(this).attr("index"),c(i[t].file)}),$("#table-file-log").on("click",".btn-delete-file",function(){var t;t=$(this).attr("index"),swal({title:"Are you sure?",text:"to delete this file : "+i[t].file,icon:"warning",buttons:!0,dangerMode:!0}).then(function(e){e&&r(i[t].file)})})},g=function(t,e){t?($(".dataTables_wrapper").hide(),e.hide(),$(".lds-roller").show()):($(".dataTables_wrapper").show(),e.show(),$(".lds-roller").hide())};this.refreshDatatable=function(){g(!0,$("#table-file-log")),$.ajax({url:END_POINT+"company/database/log/file",method:"GET",success:function(t){var e;console.log(t),h(),i=t.file_log.files,e=[],n.fnClearTable(),i.length>0&&($.each(i,function(t,n){var l=[];l[0]=n.file,l[1]=n.size,l[2]=' <center>\n                                    <button type="button" class="btn btn-warning btn-sm btn-look-file" index='+t+'  data-toggle="tooltip"\n                                        data-placement="top" title="Look">\n                                        <i class="fas fa-file"></i>\n                                    </button>\n                                    <button type="button" class="btn btn-success btn-sm btn-download-file" index='+t+'  data-toggle="tooltip"\n                                        data-placement="top" title="Download">\n                                        <i class="fas fa-arrow-down"></i>\n                                    </button>\n                                    <button type="button" class="btn btn-danger btn-sm btn-delete-file"  index='+t+'  data-toggle="tooltip"\n                                        data-placement="top" title="Delete">\n                                        <i class="fas fa-trash-alt"></i>\n                                    </button>\n                                </center>',e.push(l)}),n.fnAddData(e)),$('[data-toggle="tooltip"]').tooltip(),g(!1,$("#table-file-log")),$("#total_size").html("Size : "+t.file_log.size_total)},error:function(t){console.log(t)}})}};$(document).ready(function(){(new n).initialAndRun()})},36:function(t,e,n){t.exports=n("1/oX")}});